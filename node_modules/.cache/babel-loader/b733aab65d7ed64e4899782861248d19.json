{"remainingRequest":"/home/stoneage/vueJs projects/aliceblueTradevuex/node_modules/babel-loader/lib/index.js!/home/stoneage/vueJs projects/aliceblueTradevuex/src/store/modules/orderWindow.js","dependencies":[{"path":"/home/stoneage/vueJs projects/aliceblueTradevuex/src/store/modules/orderWindow.js","mtime":1655193647416},{"path":"/home/stoneage/vueJs projects/aliceblueTradevuex/babel.config.js","mtime":1649344700943},{"path":"/home/stoneage/vueJs projects/aliceblueTradevuex/node_modules/cache-loader/dist/cjs.js","mtime":1655272566310},{"path":"/home/stoneage/vueJs projects/aliceblueTradevuex/node_modules/babel-loader/lib/index.js","mtime":1655272566942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3N0b25lYWdlL3Z1ZUpzIHByb2plY3RzL2FsaWNlYmx1ZVRyYWRldnVleC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvc3RvbmVhZ2UvdnVlSnMgcHJvamVjdHMvYWxpY2VibHVlVHJhZGV2dWV4L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyI7Cgp2YXIgX3N0YXRlOwoKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnBhcnNlLWZsb2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wYXJzZS1pbnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZi5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHNlcnZpY2UgZnJvbSAnLi4vU2VydmljZXMvaHR0cHNlcnZpY2UnOwppbXBvcnQgZXJyb3JIYW5kbGluZyBmcm9tICcuLi9TZXJ2aWNlcy9lcnJvckhhbmRsaW5nJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CgpmdW5jdGlvbiBjaGVja051bGxOYW4odmFsdWUpIHsKICByZXR1cm4gdmFsdWUgJiYgISF2YWx1ZSAmJiB2YWx1ZS50b1N0cmluZygpICE9ICJOQSIgJiYgdmFsdWUudG9TdHJpbmcoKSAhPSAiLSIgJiYgIWlzTmFOKHZhbHVlKSA/IHRydWUgOiBmYWxzZTsKfQoKZnVuY3Rpb24gc2V0UXR5Rm9jdXMoKSB7CiAgdmFyIHF0eUlucHV0Qm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3F0eSIpOwogIHF0eUlucHV0Qm94ICE9IG51bGwgPyBxdHlJbnB1dEJveC5mb2N1cygpIDogJyc7Cn0KCnZhciBvcmRlcldpbmRvdyA9IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiAoX3N0YXRlID0gewogICAgLy8gd2luZG93IGJ0bnMgc3RhdGUgdmFyaWFibGVzCiAgICBvcmRlclR5cGVMaXN0OiBbIlJlZ3VsYXIiLCAiQ292ZXIiLCAiQnJhY2tldCIsICJBTU8iXSwKICAgIHZhbGlkaXR5SXRlbXM6IFsiREFZIiwgIklPQyJdLAogICAgYnJhY2tldFByaWNlSXRlbXM6IFsiTCIsICJTTCJdLAogICAgY292ZXJQcmljZUl0ZW1zOiBbIkwiLCAiTUtUIl0sCiAgICBvcmRlclRhYjogbnVsbCwKICAgIHByaWNlVHlwZTogbnVsbCwKICAgIHByb2RUeXBlOiBudWxsLAogICAgdmFsaWRpdHlUeXBlOiAnREFZJywKICAgIHNob3dPcmRlcldpbmRvdzogZmFsc2UsCiAgICByZW1vdmVDc3M6IHRydWUsCiAgICBvcmRlclR5cGU6ICdCdXknLAogICAgLy8gb3JkZXJTd2l0Y2gKICAgIHRvZ2dsZU9yZGVyOiBmYWxzZSwKICAgIGN1cnJlbnRPcmRlcjogW10sCiAgICBwcmljZVJhbmdlRGV0YWlsczogW10sCiAgICBzY3JpcHRRdW90ZURldGFpbHM6IFtdLAogICAgY3VycmVudEV4Y2hhbmdlOiAnJywKICAgIGN1cnJlbnRJbnN0cnVtZW50OiAnJywKICAgIGN1cnJlbnRUb2tlbjogJycsCiAgICAvLyBxdHkgJiBwcmljZSBWYWx1ZXMKICAgIG1pbmxvdDogJycsCiAgICBsdHA6ICcnLAogICAgY3VycmVudEx0cDogbnVsbCwKICAgIHRyaWdnZXJQcmljZTogJycsCiAgICB0aWNrUHJpY2U6ICcnLAogICAgZGlzY2xvc2VkUXVhbnRpdHk6IDAsCiAgICBxdWFudGl0eTogJycsCiAgICBwcmljZTogJycsCiAgICAvLyBkaXNhYmxlIGlucHV0cyBib29sZWFuCiAgICBpc1ByaWNlOiBCb29sZWFuLAogICAgaXNUcmdQcmljZTogQm9vbGVhbiwKICAgIGlzRGlzY2xvc2VkUXR5OiBCb29sZWFuLAogICAgLy8gcHJpY2UgcmFuZ2UgZGF0YQogICAgbnNlUHJpY2VSYW5nZURhdGE6IFtdLAogICAgYnNlUHJpY2VSYW5nZURhdGE6IFtdLAogICAgbG93ZXJSYW5nZTogJycsCiAgICB1cHBlclJhbmdlOiAnJywKICAgIG5zZUJzZVR5cGU6IGZhbHNlLAogICAgbW9kaWZ5T3JkZXI6IGZhbHNlLAogICAgLy8gY3VycmVudFBhZ2UgSWRlbnRpZnkKICAgIGN1cnJlbnRQYWdlOiAnJwogIH0sIF9kZWZpbmVQcm9wZXJ0eShfc3RhdGUsICJjdXJyZW50SW5zdHJ1bWVudCIsICcnKSwgX2RlZmluZVByb3BlcnR5KF9zdGF0ZSwgImlzTmZvIiwgdHJ1ZSksIF9kZWZpbmVQcm9wZXJ0eShfc3RhdGUsICJsb2FkaW5nIiwgZmFsc2UpLCBfZGVmaW5lUHJvcGVydHkoX3N0YXRlLCAid2luZG93TG9hZGluZyIsIGZhbHNlKSwgX2RlZmluZVByb3BlcnR5KF9zdGF0ZSwgImFsbFByaWNlSXRlbXMiLCBbIkwiLCAiTUtUIiwgIlNMIiwgIlNMLU0iXSksIF9kZWZpbmVQcm9wZXJ0eShfc3RhdGUsICJwb3N0aW9uUHJpY2VJdGVtcyIsIFsiTCIsICJNS1QiLCAiU0wiXSksIF9kZWZpbmVQcm9wZXJ0eShfc3RhdGUsICJzaG93UHJpY2VJdGVtcyIsIFtdKSwgX2RlZmluZVByb3BlcnR5KF9zdGF0ZSwgImVxUHJvZHVjdEl0ZW1zIiwgWyJNSVMiLCAiQ05DIl0pLCBfZGVmaW5lUHJvcGVydHkoX3N0YXRlLCAiYWxsUHJvZHVjdEl0ZW1zIiwgWyJNSVMiLCAiTlJNTCJdKSwgX2RlZmluZVByb3BlcnR5KF9zdGF0ZSwgInNob3dwcm9kdWN0SXRlbXMiLCBbXSksIF9kZWZpbmVQcm9wZXJ0eShfc3RhdGUsICJvcmRlckRhdGEiLCBbXSksIF9kZWZpbmVQcm9wZXJ0eShfc3RhdGUsICJjaGFydFNjcmlwRGF0YSIsIFtdKSwgX2RlZmluZVByb3BlcnR5KF9zdGF0ZSwgIm5zZVN3aXRjaFByaWNlIiwgJzAuMDAnKSwgX2RlZmluZVByb3BlcnR5KF9zdGF0ZSwgImJzZVN3aXRjaFByaWNlIiwgJzAuMDAnKSwgX2RlZmluZVByb3BlcnR5KF9zdGF0ZSwgImF2YWlsYWJsZU1hcmdpbiIsICcwLjAwJyksIF9zdGF0ZSksCiAgbXV0YXRpb25zOiB7CiAgICBzZXRSZW1vdmVDc3M6IGZ1bmN0aW9uIHNldFJlbW92ZUNzcyhzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5yZW1vdmVDc3MgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldE9yZGVyV2luZG93OiBmdW5jdGlvbiBzZXRPcmRlcldpbmRvdyhzdGF0ZSwgcGF5bG9hZCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlLnNob3dPcmRlcldpbmRvdyA9IHBheWxvYWQ7CiAgICAgICAgICAgICAgICBzdGF0ZS5tb2RpZnlPcmRlciA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2V0T3JkZXJXaW5kb3dNb2RpZnk6IGZ1bmN0aW9uIHNldE9yZGVyV2luZG93TW9kaWZ5KHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0ZS5zaG93T3JkZXJXaW5kb3cgPSBwYXlsb2FkOwogICAgICAgICAgICAgICAgc3RhdGUubW9kaWZ5T3JkZXIgPSB0cnVlOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZXRPcmRlclR5cGU6IGZ1bmN0aW9uIHNldE9yZGVyVHlwZShzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5vcmRlclR5cGUgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldFRvZ2dsZU9yZGVyOiBmdW5jdGlvbiBzZXRUb2dnbGVPcmRlcihzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS50b2dnbGVPcmRlciA9IHBheWxvYWQ7CiAgICB9LAogICAgc2V0Q3VycmVudE9yZGVyOiBmdW5jdGlvbiBzZXRDdXJyZW50T3JkZXIoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUuY3VycmVudE9yZGVyID0gcGF5bG9hZC5kYXRhOwoKICAgICAgaWYgKHBheWxvYWQucGFnZSA9PSAiaG9sZGluZ3MiKSB7CiAgICAgICAgc3RhdGUuY3VycmVudEV4Y2hhbmdlID0gcGF5bG9hZC5kYXRhLkV4Y2hTZWcxICYmIHBheWxvYWQuZGF0YS5Oc2V0c3ltICE9ICIwIiA/IHBheWxvYWQuZGF0YS5FeGNoU2VnMSA6IHBheWxvYWQuZGF0YS5FeGNoU2VnMjsKICAgICAgICBzdGF0ZS5jdXJyZW50VG9rZW4gPSBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgPT0gIk5TRSIgPyBwYXlsb2FkLmRhdGEuVG9rZW4xIDogcGF5bG9hZC5kYXRhLlRva2VuMjsKICAgICAgfSBlbHNlIGlmIChwYXlsb2FkLnBhZ2UgPT0gImFuYWx5dGljcyIpIHsKICAgICAgICBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgPSBwYXlsb2FkLmV4Y2g7CiAgICAgICAgc3RhdGUuY3VycmVudFRva2VuID0gcGF5bG9hZC5kYXRhLm5zZVRva2VuID8gcGF5bG9hZC5kYXRhLm5zZVRva2VuIDogcGF5bG9hZC5kYXRhLnRva2VuOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRoaXMgYmxvY2sgaXMgZm9yIFBPU0lUSU9OUyBhbmQgT1JERVJTCiAgICAgICAgc3RhdGUuY3VycmVudEV4Y2hhbmdlID0gcGF5bG9hZC5wYWdlID09ICdta1dhdGNoJyA/IHBheWxvYWQuZGF0YS5leCA6IHBheWxvYWQuZGF0YS5FeGNoYW5nZTsKICAgICAgICBzdGF0ZS5jdXJyZW50VG9rZW4gPSBwYXlsb2FkLmRhdGEudG9rZW4gPyBwYXlsb2FkLmRhdGEudG9rZW4gOiBwYXlsb2FkLmRhdGEuVG9rZW47CiAgICAgIH0KCiAgICAgIGlmIChwYXlsb2FkLnBhZ2UgPT0gIm1rV2F0Y2giKSB7CiAgICAgICAgc3RhdGUuY3VycmVudEluc3RydW1lbnQgPSBzdGF0ZS5jdXJyZW50T3JkZXIuSW5zdHJ1bWVudDsKICAgICAgfSBlbHNlIGlmIChwYXlsb2FkLnBhZ2UgPT0gIm9yZGVycyIgfHwgcGF5bG9hZC5wYWdlID09ICJwb3NpdGlvbnMiKSB7CiAgICAgICAgc3RhdGUuY3VycmVudEluc3RydW1lbnQgPSBzdGF0ZS5jdXJyZW50T3JkZXIuSW5zdG5hbWU7CiAgICAgIH0KCiAgICAgIHN0YXRlLmN1cnJlbnRJbnN0cnVtZW50ID09ICdPUFRJRFgnIHx8IHN0YXRlLmN1cnJlbnRJbnN0cnVtZW50ID09ICdPUFRTVEsnID8gc3RhdGUuaXNOZm8gPSBmYWxzZSA6IHN0YXRlLmlzTmZvID0gdHJ1ZTsKICAgICAgc3RhdGUuY3VycmVudFBhZ2UgPSBwYXlsb2FkLnBhZ2U7CgogICAgICBpZiAocGF5bG9hZC5wYWdlID09ICJob2xkaW5ncyIpIHsKICAgICAgICBzdGF0ZS5jdXJyZW50SW5zdHJ1bWVudCA9IHN0YXRlLmN1cnJlbnRFeGNoYW5nZSA9PSAiTlNFIiA/IHN0YXRlLmN1cnJlbnRPcmRlci5Oc2V0c3ltIDogc3RhdGUuY3VycmVudE9yZGVyLkJzZXRzeW07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdGUuY3VycmVudEluc3RydW1lbnQgPSBwYXlsb2FkLmRhdGEuZm9ybWF0U2NyaXBOYW1lOwogICAgICB9CiAgICB9LAogICAgc2V0UHJpY2VSYW5nZURldGFpbHM6IGZ1bmN0aW9uIHNldFByaWNlUmFuZ2VEZXRhaWxzKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUubnNlUHJpY2VSYW5nZURhdGEgPSBbXTsKICAgICAgICAgICAgICAgIHN0YXRlLmJzZVByaWNlUmFuZ2VEYXRhID0gW107CiAgICAgICAgICAgICAgICBwYXlsb2FkLmxlbmd0aCA9PSAxIHx8IHBheWxvYWQubGVuZ3RoID09IHVuZGVmaW5lZCA/IHN0YXRlLm5zZUJzZVR5cGUgPSBmYWxzZSA6IHN0YXRlLm5zZUJzZVR5cGUgPSB0cnVlOyAvLyBDaGVjayB1bmRlZmluZWQsIG51bGwgLCBlbXB0eSBmb3IgYm90aCBsb3dlciBhbmQgdXBwZXJSYW5nZQoKICAgICAgICAgICAgICAgIGlmIChwYXlsb2FkLmxlbmd0aCA+PSAxKSB7CiAgICAgICAgICAgICAgICAgIHBheWxvYWQuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgICAgICAgICBlbC5FeGNoZyA9PSBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgPyBzdGF0ZS5wcmljZVJhbmdlRGV0YWlscyA9IGVsIDogJyc7CgogICAgICAgICAgICAgICAgICAgIGlmIChlbC5FeGNoZyA9PSAiTlNFIikgewogICAgICAgICAgICAgICAgICAgICAgc3RhdGUubnNlUHJpY2VSYW5nZURhdGEucHVzaChlbCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbC5FeGNoZyA9PSAiQlNFIikgewogICAgICAgICAgICAgICAgICAgICAgc3RhdGUuYnNlUHJpY2VSYW5nZURhdGEucHVzaChlbCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgc3RhdGUubG93ZXJSYW5nZSA9IHN0YXRlLnByaWNlUmFuZ2VEZXRhaWxzLmxvd2VyY2lyY3VpdGxpbWl0ID8gY2hlY2tOdWxsTmFuKHN0YXRlLnByaWNlUmFuZ2VEZXRhaWxzLmxvd2VyY2lyY3VpdGxpbWl0LnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCAiIikpID8gcGFyc2VGbG9hdChzdGF0ZS5wcmljZVJhbmdlRGV0YWlscy5sb3dlcmNpcmN1aXRsaW1pdC50b1N0cmluZygpLnJlcGxhY2UoLywvZywgIiIpKSA6ICcwLjAwJyA6ICcwLjAwJzsKICAgICAgICAgICAgICAgICAgc3RhdGUudXBwZXJSYW5nZSA9IHN0YXRlLnByaWNlUmFuZ2VEZXRhaWxzLmhpZ2hlcmNpcmN1aXRsaW1pdCA/IGNoZWNrTnVsbE5hbihzdGF0ZS5wcmljZVJhbmdlRGV0YWlscy5oaWdoZXJjaXJjdWl0bGltaXQudG9TdHJpbmcoKS5yZXBsYWNlKC8sL2csICIiKSkgPyBwYXJzZUZsb2F0KHN0YXRlLnByaWNlUmFuZ2VEZXRhaWxzLmhpZ2hlcmNpcmN1aXRsaW1pdC50b1N0cmluZygpLnJlcGxhY2UoLywvZywgIiIpKSA6ICcwLjAwJyA6ICcwLjAwJzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHN0YXRlLnByaWNlUmFuZ2VEZXRhaWxzID0gcGF5bG9hZDsKICAgICAgICAgICAgICAgICAgc3RhdGUubG93ZXJSYW5nZSA9IGNoZWNrTnVsbE5hbihzdGF0ZS5wcmljZVJhbmdlRGV0YWlscy5sb3dlcmNpcmN1aXRsaW1pdC50b1N0cmluZygpLnJlcGxhY2UoLywvZywgIiIpKSA/IHBhcnNlRmxvYXQoc3RhdGUucHJpY2VSYW5nZURldGFpbHMubG93ZXJjaXJjdWl0bGltaXQudG9TdHJpbmcoKS5yZXBsYWNlKC8sL2csICIiKSkgOiAnMC4wMCc7CiAgICAgICAgICAgICAgICAgIHN0YXRlLnVwcGVyUmFuZ2UgPSBjaGVja051bGxOYW4oc3RhdGUucHJpY2VSYW5nZURldGFpbHMuaGlnaGVyY2lyY3VpdGxpbWl0LnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCAiIikpID8gcGFyc2VGbG9hdChzdGF0ZS5wcmljZVJhbmdlRGV0YWlscy5oaWdoZXJjaXJjdWl0bGltaXQudG9TdHJpbmcoKS5yZXBsYWNlKC8sL2csICIiKSkgOiAnMC4wMCc7CgogICAgICAgICAgICAgICAgICBfdGhpcy5kaXNwYXRjaCgnb3JkZXJXaW5kb3cvc2V0Q3VycmVudEx0cCcsIGNoZWNrTnVsbE5hbihzdGF0ZS5wcmljZVJhbmdlRGV0YWlscy5MdHApID8gc3RhdGUucHJpY2VSYW5nZURldGFpbHMuTHRwIDogY2hlY2tOdWxsTmFuKHN0YXRlLnNjcmlwdFF1b3RlRGV0YWlscy5MVFApID8gc3RhdGUuc2NyaXB0UXVvdGVEZXRhaWxzLkxUUCA6ICcwLjAwJyk7CiAgICAgICAgICAgICAgICB9IC8vIG5zZSBic2UgcmFkaW8gYnV0dG9uIGNhbGwgZnVuY3Rpb24KCgogICAgICAgICAgICAgICAgaWYgKCEoc3RhdGUuY3VycmVudEV4Y2hhbmdlID09ICJOU0UiICYmIHBheWxvYWQubGVuZ3RoID4gMSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29tbWl0KCdvcmRlcldpbmRvdy9tYWtlQWN0aXZlJywgJ05TRScpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIGlmICghKHN0YXRlLmN1cnJlbnRFeGNoYW5nZSA9PSAiQlNFIiAmJiBwYXlsb2FkLmxlbmd0aCA+IDEpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29tbWl0KCdvcmRlcldpbmRvdy9tYWtlQWN0aXZlJywgJ0JTRScpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2V0U2NyaXB0UXVvdGVEZXRhaWxzOiBmdW5jdGlvbiBzZXRTY3JpcHRRdW90ZURldGFpbHMoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUuc2NyaXB0UXVvdGVEZXRhaWxzID0gcGF5bG9hZDsKCiAgICAgICAgICAgICAgICBfdGhpczIuZGlzcGF0Y2goJ29yZGVyV2luZG93L3NldERlZmF1bHRWYWx1ZXMnLCBzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMpOwoKICAgICAgICAgICAgICAgIF90aGlzMi5kaXNwYXRjaCgnb3JkZXJXaW5kb3cvc2V0Q3VycmVudEx0cCcsIGNoZWNrTnVsbE5hbihzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMuTFRQKSA/IHN0YXRlLnNjcmlwdFF1b3RlRGV0YWlscy5MVFAgOiAnMC4wMCcpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZXRDaGFydFNjcmlwRGF0YTogZnVuY3Rpb24gc2V0Q2hhcnRTY3JpcERhdGEoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUuY2hhcnRTY3JpcERhdGEgPSBwYXlsb2FkLCBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2hhcnRzY3JpcCcsIEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTsKICAgIH0sCiAgICBzZXRDdXJyZW50UXR5OiBmdW5jdGlvbiBzZXRDdXJyZW50UXR5KHN0YXRlLCBxdHkpIHsKICAgICAgc3RhdGUucXVhbnRpdHkgPSBxdHk7CiAgICB9LAogICAgc2V0Q3VycmVudFByaWNlOiBmdW5jdGlvbiBzZXRDdXJyZW50UHJpY2Uoc3RhdGUsIHByaWNlKSB7CiAgICAgIHN0YXRlLnByaWNlID0gcHJpY2U7CiAgICB9LAogICAgc2V0Q3VycmVudFRyZ1ByaWNlOiBmdW5jdGlvbiBzZXRDdXJyZW50VHJnUHJpY2Uoc3RhdGUsIHRyZ1ByaWNlKSB7CiAgICAgIHN0YXRlLnRyaWdnZXJQcmljZSA9IHRyZ1ByaWNlOwogICAgfSwKICAgIC8vIG1ha2UgYWN0aXZlIG1ldGhvZCBmb3IgbnNlIGJzZSByYWRpbyBzd2l0Y2gKICAgIG1ha2VBY3RpdmU6IGZ1bmN0aW9uIG1ha2VBY3RpdmUoc3RhdGUsIGV4Y2hhbmdlKSB7CiAgICAgIGlmIChleGNoYW5nZSA9PSAiTlNFIiAmJiAhc3RhdGUubW9kaWZ5T3JkZXIpIHsKICAgICAgICBjaGVja051bGxOYW4oc3RhdGUuc2NyaXB0UXVvdGVEZXRhaWxzLkxUUCk7CiAgICAgICAgc3RhdGUudHJpZ2dlclByaWNlID0gc3RhdGUubHRwID0gc3RhdGUucHJpY2UgPSBjaGVja051bGxOYW4oc3RhdGUubnNlUHJpY2VSYW5nZURhdGFbMF0uTHRwKSA/IHN0YXRlLm5zZVByaWNlUmFuZ2VEYXRhWzBdLkx0cCA6IGNoZWNrTnVsbE5hbihzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMuTFRQKSA/IHN0YXRlLnNjcmlwdFF1b3RlRGV0YWlscy5MVFAgOiAnMC4wMCc7CiAgICAgICAgY2hlY2tOdWxsTmFuKHN0YXRlLm5zZVByaWNlUmFuZ2VEYXRhWzBdLmxvd2VyY2lyY3VpdGxpbWl0LnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCAiIikpID8gc3RhdGUubG93ZXJSYW5nZSA9IHBhcnNlRmxvYXQoc3RhdGUubnNlUHJpY2VSYW5nZURhdGFbMF0ubG93ZXJjaXJjdWl0bGltaXQudG9TdHJpbmcoKS5yZXBsYWNlKC8sL2csICIiKSkgOiAnMC4wMCc7CiAgICAgICAgY2hlY2tOdWxsTmFuKHN0YXRlLm5zZVByaWNlUmFuZ2VEYXRhWzBdLmhpZ2hlcmNpcmN1aXRsaW1pdC50b1N0cmluZygpLnJlcGxhY2UoLywvZywgIiIpKSA/IHN0YXRlLnVwcGVyUmFuZ2UgPSBwYXJzZUZsb2F0KHN0YXRlLm5zZVByaWNlUmFuZ2VEYXRhWzBdLmhpZ2hlcmNpcmN1aXRsaW1pdC50b1N0cmluZygpLnJlcGxhY2UoLywvZywgIiIpKSA6ICcwLjAwJzsKICAgICAgICBzdGF0ZS5uc2VQcmljZVJhbmdlRGF0YVswXS5sb3RTaXplID8gc3RhdGUubWlubG90ID0gc3RhdGUubnNlUHJpY2VSYW5nZURhdGFbMF0ubG90U2l6ZSA6IHN0YXRlLm1pbmxvdCA9IDA7CiAgICAgICAgc3RhdGUuc2NyaXB0UXVvdGVEZXRhaWxzWyduc2VPckJzZVRpY2tTaXplJ10gPSBzdGF0ZS5uc2VQcmljZVJhbmdlRGF0YVswXS50aWNrU2l6ZTsKICAgICAgICB0aGlzLmNvbW1pdCgnb3JkZXJXaW5kb3cvc2V0VGlja1ByaWNlJywgc3RhdGUuc2NyaXB0UXVvdGVEZXRhaWxzKTsKICAgICAgICB0aGlzLmRpc3BhdGNoKCdvcmRlcldpbmRvdy9zZXRDdXJyZW50THRwJywgY2hlY2tOdWxsTmFuKHN0YXRlLm5zZVByaWNlUmFuZ2VEYXRhWzBdLkx0cCkgPyBzdGF0ZS5uc2VQcmljZVJhbmdlRGF0YVswXS5MdHAgOiBjaGVja051bGxOYW4oc3RhdGUuc2NyaXB0UXVvdGVEZXRhaWxzLkxUUCkgPyBzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMuTFRQIDogJzAuMDAnKTsKICAgICAgfSBlbHNlIGlmICghc3RhdGUubW9kaWZ5T3JkZXIpIHsKICAgICAgICBzdGF0ZS50cmlnZ2VyUHJpY2UgPSBzdGF0ZS5sdHAgPSBzdGF0ZS5wcmljZSA9IGNoZWNrTnVsbE5hbihzdGF0ZS5ic2VQcmljZVJhbmdlRGF0YVswXS5MdHApID8gc3RhdGUuYnNlUHJpY2VSYW5nZURhdGFbMF0uTHRwIDogY2hlY2tOdWxsTmFuKHN0YXRlLnNjcmlwdFF1b3RlRGV0YWlscy5MVFApID8gc3RhdGUuc2NyaXB0UXVvdGVEZXRhaWxzLkxUUCA6ICcwLjAwJzsKICAgICAgICBjaGVja051bGxOYW4oc3RhdGUuYnNlUHJpY2VSYW5nZURhdGFbMF0ubG93ZXJjaXJjdWl0bGltaXQudG9TdHJpbmcoKS5yZXBsYWNlKC8sL2csICIiKSkgPyBzdGF0ZS5sb3dlclJhbmdlID0gcGFyc2VGbG9hdChzdGF0ZS5ic2VQcmljZVJhbmdlRGF0YVswXS5sb3dlcmNpcmN1aXRsaW1pdC50b1N0cmluZygpLnJlcGxhY2UoLywvZywgIiIpKSA6ICcwLjAwJzsKICAgICAgICBjaGVja051bGxOYW4oc3RhdGUuYnNlUHJpY2VSYW5nZURhdGFbMF0uaGlnaGVyY2lyY3VpdGxpbWl0LnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCAiIikpID8gc3RhdGUudXBwZXJSYW5nZSA9IHBhcnNlRmxvYXQoc3RhdGUuYnNlUHJpY2VSYW5nZURhdGFbMF0uaGlnaGVyY2lyY3VpdGxpbWl0LnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCAiIikpIDogJzAuMDAnOwogICAgICAgIHN0YXRlLmJzZVByaWNlUmFuZ2VEYXRhWzBdLmxvdFNpemUgPyBzdGF0ZS5taW5sb3QgPSBzdGF0ZS5ic2VQcmljZVJhbmdlRGF0YVswXS5sb3RTaXplIDogc3RhdGUubWlubG90ID0gMDsKICAgICAgICBzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHNbJ25zZU9yQnNlVGlja1NpemUnXSA9IHN0YXRlLmJzZVByaWNlUmFuZ2VEYXRhWzBdLnRpY2tTaXplOwogICAgICAgIHRoaXMuY29tbWl0KCdvcmRlcldpbmRvdy9zZXRUaWNrUHJpY2UnLCBzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMpOwogICAgICAgIHRoaXMuZGlzcGF0Y2goJ29yZGVyV2luZG93L3NldEN1cnJlbnRMdHAnLCBjaGVja051bGxOYW4oc3RhdGUuYnNlUHJpY2VSYW5nZURhdGFbMF0uTHRwKSA/IHN0YXRlLmJzZVByaWNlUmFuZ2VEYXRhWzBdLkx0cCA6IGNoZWNrTnVsbE5hbihzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMuTFRQKSA/IHN0YXRlLnNjcmlwdFF1b3RlRGV0YWlscy5MVFAgOiAnMC4wMCcpOwogICAgICB9CgogICAgICBpZiAoc3RhdGUuY3VycmVudFBhZ2UgPT0gJ2hvbGRpbmdzJykgewogICAgICAgIHN0YXRlLm9yZGVyVHlwZS50b0xvd2VyQ2FzZSgpID09ICdidXknID8gdGhpcy5jb21taXQoJ29yZGVyV2luZG93L3NldEN1cnJlbnRRdHknLCBzdGF0ZS5taW5sb3QpIDogdGhpcy5jb21taXQoJ29yZGVyV2luZG93L3NldEN1cnJlbnRRdHknLCBzdGF0ZS5jdXJyZW50T3JkZXIuU2VsbGFibGVRdHkpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY29tbWl0KCdvcmRlcldpbmRvdy9zZXRDdXJyZW50UXR5Jywgc3RhdGUub3JkZXJEYXRhLnBhZ2UgPT0gJ29yZGVycycgJiYgc3RhdGUub3JkZXJEYXRhLnR5cGUgPyBzdGF0ZS5vcmRlckRhdGEuZGF0YS5RdHkgOiBzdGF0ZS5taW5sb3QpOwogICAgICB9CgogICAgICB0aGlzLmNvbW1pdCgnb3JkZXJXaW5kb3cvc2V0TnNlU3dpdGNoUHJpY2UnLCBjaGVja051bGxOYW4oc3RhdGUubnNlUHJpY2VSYW5nZURhdGFbMF0uTHRwKSA/IHN0YXRlLm5zZVByaWNlUmFuZ2VEYXRhWzBdLkx0cCA6IGNoZWNrTnVsbE5hbihzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMuTFRQKSA/IHN0YXRlLnNjcmlwdFF1b3RlRGV0YWlscy5MVFAgOiAnMC4wMCcpOwogICAgICB0aGlzLmNvbW1pdCgnb3JkZXJXaW5kb3cvc2V0QnNlU3dpdGNoUHJpY2UnLCBjaGVja051bGxOYW4oc3RhdGUuYnNlUHJpY2VSYW5nZURhdGFbMF0uTHRwKSA/IHN0YXRlLmJzZVByaWNlUmFuZ2VEYXRhWzBdLkx0cCA6IGNoZWNrTnVsbE5hbihzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMuTFRQKSA/IHN0YXRlLnNjcmlwdFF1b3RlRGV0YWlscy5MVFAgOiAnMC4wMCcpOwogICAgICBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgPSBleGNoYW5nZTsKICAgIH0sCiAgICBzZXRQcmljZVR5cGU6IGZ1bmN0aW9uIHNldFByaWNlVHlwZShzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5wcmljZVR5cGUgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldFByb2RUeXBlOiBmdW5jdGlvbiBzZXRQcm9kVHlwZShzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5wcm9kVHlwZSA9IHBheWxvYWQ7CiAgICB9LAogICAgc2V0T3JkZXJUYWI6IGZ1bmN0aW9uIHNldE9yZGVyVGFiKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLm9yZGVyVGFiID0gcGF5bG9hZDsKICAgIH0sCiAgICBzZXRWYWxpZGl0eVR5cGU6IGZ1bmN0aW9uIHNldFZhbGlkaXR5VHlwZShzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS52YWxpZGl0eVR5cGUgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldFdpbmRvd0xvYWRpbmc6IGZ1bmN0aW9uIHNldFdpbmRvd0xvYWRpbmcoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUud2luZG93TG9hZGluZyA9IHBheWxvYWQ7CiAgICB9LAogICAgLy8gYnkgQmhhcmF0aCAKICAgIHNldFByaWNlSXRlbXM6IGZ1bmN0aW9uIHNldFByaWNlSXRlbXMoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUuc2hvd1ByaWNlSXRlbXMgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldFByb2R1Y3RJdGVtczogZnVuY3Rpb24gc2V0UHJvZHVjdEl0ZW1zKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLnNob3dwcm9kdWN0SXRlbXMgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldElzTmZvOiBmdW5jdGlvbiBzZXRJc05mbyhzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5pc05mbyA9IHBheWxvYWQ7CiAgICB9LAogICAgY2hhbmdlT3JkZXJUeXBlOiBmdW5jdGlvbiBjaGFuZ2VPcmRlclR5cGUoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3dpdGNoIChwYXlsb2FkKSB7CiAgICAgICAgY2FzZSAicmVndWxhciI6IC8vUmVndWxhciBPcmRlciAvLyBXZSBoYXZlIHRha2VuIChyZWd1bGFyID0gYW1vKSBleGNlcHQgZm9yIHZhbGlkaXR5CgogICAgICAgIGNhc2UgImFtbyI6CiAgICAgICAgICB7CiAgICAgICAgICAgIGlmIChzdGF0ZS5wcmljZVR5cGUgPT0gIkwiKSB7CiAgICAgICAgICAgICAgc3RhdGUuaXNQcmljZSA9IHRydWU7CiAgICAgICAgICAgICAgc3RhdGUuaXNUcmdQcmljZSA9IGZhbHNlOwogICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLnByaWNlVHlwZSA9PSAiTUtUIikgewogICAgICAgICAgICAgIHN0YXRlLmlzUHJpY2UgPSBmYWxzZTsKICAgICAgICAgICAgICBzdGF0ZS5pc1RyZ1ByaWNlID0gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUucHJpY2VUeXBlID09ICJTTCIpIHsKICAgICAgICAgICAgICBzdGF0ZS5pc1ByaWNlID0gdHJ1ZTsKICAgICAgICAgICAgICBzdGF0ZS5pc1RyZ1ByaWNlID0gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5wcmljZVR5cGUgPT0gIlNMLU0iKSB7CiAgICAgICAgICAgICAgc3RhdGUuaXNQcmljZSA9IGZhbHNlOwogICAgICAgICAgICAgIHN0YXRlLmlzVHJnUHJpY2UgPSB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgY2FzZSAiY292ZXIiOgogICAgICAgICAgewogICAgICAgICAgICAvLyBDb3ZlciBPcmRlciB2YWxpZGF0aW9uCiAgICAgICAgICAgIGlmIChzdGF0ZS5wcmljZVR5cGUgPT0gIkwiKSB7CiAgICAgICAgICAgICAgc3RhdGUuaXNQcmljZSA9IHRydWU7CiAgICAgICAgICAgICAgc3RhdGUuaXNUcmdQcmljZSA9IHRydWU7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUucHJpY2VUeXBlID09ICJNS1QiKSB7CiAgICAgICAgICAgICAgc3RhdGUuaXNQcmljZSA9IGZhbHNlOwogICAgICAgICAgICAgIHN0YXRlLmlzVHJnUHJpY2UgPSB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgY2FzZSAiYnJhY2tldCI6CiAgICAgICAgICB7CiAgICAgICAgICAgIC8vIGJyYWNrZXQgT3JkZXIgdmFsaWRhdGlvbgogICAgICAgICAgICBpZiAoc3RhdGUucHJpY2VUeXBlID09ICJMIikgewogICAgICAgICAgICAgIHN0YXRlLmlzUHJpY2UgPSB0cnVlOwogICAgICAgICAgICAgIHN0YXRlLmlzVHJnUHJpY2UgPSBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5wcmljZVR5cGUgPT0gIlNMIikgewogICAgICAgICAgICAgIHN0YXRlLmlzUHJpY2UgPSB0cnVlOwogICAgICAgICAgICAgIHN0YXRlLmlzVHJnUHJpY2UgPSB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHN0YXRlLmN1cnJlbnRFeGNoYW5nZSA9PSAnTkZPJyB8fCBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgPT0gJ0JGTycpIHsKICAgICAgICB0aGlzLmNvbW1pdCgnb3JkZXJXaW5kb3cvc2V0SXNEaXNjbG9zZWRRdHknLCBmYWxzZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jb21taXQoJ29yZGVyV2luZG93L3NldElzRGlzY2xvc2VkUXR5JywgdHJ1ZSk7CiAgICAgIH0KICAgIH0sCiAgICBzZXRPcmRlckRhdGE6IGZ1bmN0aW9uIHNldE9yZGVyRGF0YShzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5vcmRlckRhdGEgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldElzRGlzY2xvc2VkUXR5OiBmdW5jdGlvbiBzZXRJc0Rpc2Nsb3NlZFF0eShzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5pc0Rpc2Nsb3NlZFF0eSA9IHBheWxvYWQ7CiAgICB9LAogICAgc2V0VGlja1ByaWNlOiBmdW5jdGlvbiBzZXRUaWNrUHJpY2Uoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgLy8gdGlja3ByaWNlIGNhbGN1bGF0aW9uIAogICAgICBpZiAocGF5bG9hZC5uc2VPckJzZVRpY2tTaXplKSB7CiAgICAgICAgdmFyIHRpY2tTaXplID0gcGFyc2VGbG9hdChwYXlsb2FkLm5zZU9yQnNlVGlja1NpemUpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciB0aWNrU2l6ZSA9IHBhcnNlRmxvYXQocGF5bG9hZC5UaWNrU2l6ZSk7CiAgICAgIH0KCiAgICAgIHZhciBtdWx0aXBsaWVyID0gcGF5bG9hZC5NdWx0aXBsaWVyOwogICAgICB2YXIgZGVjaW1hbFByZXZpc2lvbiA9IHBheWxvYWQuRGVjaW1hbFByZWNpc2lvbjsKICAgICAgdmFyIHRlbXBUaWNrU2l6ZSA9IHRpY2tTaXplIC8gKG11bHRpcGxpZXIgKiBNYXRoLnBvdygxMCwgZGVjaW1hbFByZXZpc2lvbikpOwogICAgICBjaGVja051bGxOYW4odGVtcFRpY2tTaXplKSAmJiB0ZW1wVGlja1NpemUgIT0gMCA/IHN0YXRlLnRpY2tQcmljZSA9IHRlbXBUaWNrU2l6ZSA6IDE7CiAgICB9LAogICAgc2V0TnNlU3dpdGNoUHJpY2U6IGZ1bmN0aW9uIHNldE5zZVN3aXRjaFByaWNlKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLm5zZVN3aXRjaFByaWNlID0gcGF5bG9hZDsKICAgIH0sCiAgICBzZXRCc2VTd2l0Y2hQcmljZTogZnVuY3Rpb24gc2V0QnNlU3dpdGNoUHJpY2Uoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUuYnNlU3dpdGNoUHJpY2UgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldFZhbGlkaXR5SXRlbXM6IGZ1bmN0aW9uIHNldFZhbGlkaXR5SXRlbXMoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUudmFsaWRpdHlJdGVtcyA9IHBheWxvYWQ7CiAgICB9LAogICAgc2V0RGlzY2xvc2VkUXR5OiBmdW5jdGlvbiBzZXREaXNjbG9zZWRRdHkoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUuZGlzY2xvc2VkUXVhbnRpdHkgPSBwYXlsb2FkOwogICAgfSwKICAgIHN0ZU9yZGVyVHlwZTogZnVuY3Rpb24gc3RlT3JkZXJUeXBlKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLm9yZGVyVHlwZUxpc3QgPSBwYXlsb2FkOwogICAgfSwKICAgIC8vIHNldCBBdmFpbGFibGUgbWFyZ2luCiAgICBzZXRBdmFpbGFibGVNYXJnaW46IGZ1bmN0aW9uIHNldEF2YWlsYWJsZU1hcmdpbihzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5hdmFpbGFibGVNYXJnaW4gPSBwYXlsb2FkOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgLy8gcGxhY2Ugb3JkZXIgc2VydmljZQogICAgcGxhY2VPcmRlcjogZnVuY3Rpb24gcGxhY2VPcmRlcihfcmVmLCBwYXlsb2FkKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHZhciBzdGF0ZSwgY29tbWl0LCByb290R2V0dGVycywgc3ltYm9sTmFtZSwgcGxhY2VPcmRlcjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmLnN0YXRlLCBjb21taXQgPSBfcmVmLmNvbW1pdCwgcm9vdEdldHRlcnMgPSBfcmVmLnJvb3RHZXR0ZXJzOwogICAgICAgICAgICAgICAgc3RhdGUubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICBzeW1ib2xOYW1lID0gc3RhdGUuY3VycmVudFBhZ2UgPT0gJ21rV2F0Y2gnID8gc3RhdGUuY3VycmVudE9yZGVyLnN5bWJvbCA6IHN0YXRlLmN1cnJlbnRQYWdlID09ICdvcmRlcnMnID8gc3RhdGUuY3VycmVudEV4Y2hhbmdlID09ICdOU0UnID8gc3RhdGUubnNlUHJpY2VSYW5nZURhdGFbMF0uVHJhZGluZ1N5bWJvbCA6IHN0YXRlLmN1cnJlbnRFeGNoYW5nZSA9PSAnQlNFJyA/IHN0YXRlLmJzZVByaWNlUmFuZ2VEYXRhWzBdLlRyYWRpbmdTeW1ib2wgOiBzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMuVFN5bWJsIDogc3RhdGUuY3VycmVudFBhZ2UgPT0gJ3Bvc2l0aW9ucycgPyBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgPT0gJ05TRScgPyBzdGF0ZS5uc2VQcmljZVJhbmdlRGF0YVswXS5UcmFkaW5nU3ltYm9sIDogc3RhdGUuY3VycmVudEV4Y2hhbmdlID09ICdCU0UnID8gc3RhdGUuYnNlUHJpY2VSYW5nZURhdGFbMF0uVHJhZGluZ1N5bWJvbCA6IHN0YXRlLmN1cnJlbnRPcmRlci5Uc3ltIDogc3RhdGUuY3VycmVudFBhZ2UgPT0gJ2hvbGRpbmdzJyAmJiBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgPT0gJ05TRScgPyBzdGF0ZS5jdXJyZW50T3JkZXIuTnNldHN5bSA6IHN0YXRlLmN1cnJlbnRQYWdlID09ICdob2xkaW5ncycgJiYgc3RhdGUuY3VycmVudEV4Y2hhbmdlID09ICdCU0UnID8gc3RhdGUuY3VycmVudE9yZGVyLkJzZXRzeW0gOiAnJzsKICAgICAgICAgICAgICAgIHBsYWNlT3JkZXIgPSBbewogICAgICAgICAgICAgICAgICBhY3RpdmVfc3RhdHVzOiBudWxsLAogICAgICAgICAgICAgICAgICBjb21wbGV4dHk6IHBheWxvYWQuY29tcGxleGl0eSA9PSAnYnJhY2tldCcgPyAnYm8nIDogcGF5bG9hZC5jb21wbGV4aXR5ID09ICdjb3ZlcicgPyAnY28nIDogcGF5bG9hZC5jb21wbGV4aXR5LAogICAgICAgICAgICAgICAgICBjcmVhdGVkX2J5OiBudWxsLAogICAgICAgICAgICAgICAgICBjcmVhdGVkX29uOiBudWxsLAogICAgICAgICAgICAgICAgICBkaXNjcXR5OiBwYXlsb2FkLm9yZGVyVGFiID09ICJicmFja2V0IiA/IHBheWxvYWQuZGlzY1F0eS50b1N0cmluZygpIDogcGF5bG9hZC5kaXNjUXR5LAogICAgICAgICAgICAgICAgICBlbXNnOiBudWxsLAogICAgICAgICAgICAgICAgICBleGNoOiBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UsCiAgICAgICAgICAgICAgICAgIGlkOiBudWxsLAogICAgICAgICAgICAgICAgICBpbnN0cnVtZW50OiBzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMuVW5pcXVlS2V5LAogICAgICAgICAgICAgICAgICBsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICBtYXN0ZXJfaWQ6IDAsCiAgICAgICAgICAgICAgICAgIHBDb2RlOiBwYXlsb2FkLmNvbXBsZXhpdHkgPT0gJ2NvdmVyJyA/ICJDTyIgOiBwYXlsb2FkLnBjb2RlLAogICAgICAgICAgICAgICAgICBwcmN0eXA6IHBheWxvYWQucHJpY2VUeXBlLAogICAgICAgICAgICAgICAgICBwcmljZTogcGF5bG9hZC5wcmljZS50b1N0cmluZygpLAogICAgICAgICAgICAgICAgICBxdHk6IHBheWxvYWQucXR5LAogICAgICAgICAgICAgICAgICByZXBvbnNlOiBudWxsLAogICAgICAgICAgICAgICAgICByZXQ6IHBheWxvYWQudmFsaWRpdHkgPyBwYXlsb2FkLnZhbGlkaXR5LnRvVXBwZXJDYXNlKCkgOiAiREFZIiwKICAgICAgICAgICAgICAgICAgc2FsdDogbnVsbCwKICAgICAgICAgICAgICAgICAgc3RhdDogbnVsbCwKICAgICAgICAgICAgICAgICAgc3RvcExvc3M6IHBhcnNlSW50KHBheWxvYWQuc3RvcExvc3MpLAogICAgICAgICAgICAgICAgICBzeW1ib2xfaWQ6IHN0YXRlLmN1cnJlbnRUb2tlbiwKICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBwYXlsb2FkLnN0b3BMb3NzLAogICAgICAgICAgICAgICAgICB0cmFkaW5nX3N5bWJvbDogc3ltYm9sTmFtZSwKICAgICAgICAgICAgICAgICAgdHJhaWxpbmdfc3RvcF9sb3NzOiBwYXJzZUludChwYXlsb2FkLnRyYWlsU3RvcExvc3MpLAogICAgICAgICAgICAgICAgICB0cmFuc3R5cGU6IHN0YXRlLm9yZGVyVHlwZSwKICAgICAgICAgICAgICAgICAgdHJpZ1ByaWNlOiBwYXlsb2FkLnRyZ1ByaWNlLAogICAgICAgICAgICAgICAgICB1cGRhdGVkX2J5OiBudWxsLAogICAgICAgICAgICAgICAgICB1cGRhdGVkX29uOiBudWxsLAogICAgICAgICAgICAgICAgICB1c2VySWQ6IHJvb3RHZXR0ZXJzWydhdXRodGljYXRpb24vZ2V0VXNlcklkJ10sCiAgICAgICAgICAgICAgICAgIHVzZXJTZXNzaW9uSUQ6IHJvb3RHZXR0ZXJzWydhdXRodGljYXRpb24vZ2V0VXNlclNlc3Npb24nXSwKICAgICAgICAgICAgICAgICAgdXNlclNldHRpbmdEdG86IHJvb3RHZXR0ZXJzWydhdXRodGljYXRpb24vZ2V0VXNlclNlc3Npb25EdG8nXQogICAgICAgICAgICAgICAgfV07CiAgICAgICAgICAgICAgICBzdGF0ZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldE9yZGVyV2luZG93JywgZmFsc2UpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZXhlY3V0ZU9yZGVyKHBsYWNlT3JkZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhWzBdWyJlbXNnIl0gPT0gJ0lucHV0IHBhcmFtZXRlcnMgYXJlIHdyb25nJykgewogICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxpbmcudG9hc3RlcignT3JkZXIgbm90IHBsYWNlZCcsICdkYW5nZXInLCByZXNwb25zZS5kYXRhWzBdWyJlbXNnIl0sIDMwMDApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGFbMF0uc3RhdCA9PSAnTm90X09rJykgewogICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxpbmcudG9hc3RlcignT3JkZXIgbm90IHBsYWNlZCcsICdkYW5nZXInLCByZXNwb25zZS5kYXRhWzBdWydFbXNnJ10sIDMwMDApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxpbmcudG9hc3RlcihyZXNwb25zZS5kYXRhWzBdWyJOT3JkTm8iXSA/IHJlc3BvbnNlLmRhdGFbMF1bIk5PcmRObyJdIDogcmVzcG9uc2UuZGF0YVswXVsibmVzdE9yZGVyTnVtYmVyIl0sICdzdWNjZXNzJywgJ09yZGVyIFBsYWNlZCBTdWNjZXNzZnVsbHknLCAzMDAwKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgY29tbWl0KCdzZXRPcmRlcldpbmRvdycsIGZhbHNlKTsKICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGluZy5lcnJMb2coZXJyKTsKICAgICAgICAgICAgICAgIH0pWyJmaW5hbGx5Il0oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBzdGF0ZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8gcGxhY2VCYXNrZXRPcmRlciBzZXJ2aWNlCiAgICBwbGFjZUJhc2tldE9yZGVyOiBmdW5jdGlvbiBwbGFjZUJhc2tldE9yZGVyKF9yZWYyLCBwYXlsb2FkKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciBzdGF0ZSwgY29tbWl0LCByb290R2V0dGVycywgcGxhY2VPcmRlcjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZSwgY29tbWl0ID0gX3JlZjIuY29tbWl0LCByb290R2V0dGVycyA9IF9yZWYyLnJvb3RHZXR0ZXJzOwogICAgICAgICAgICAgICAgc3RhdGUubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICBwbGFjZU9yZGVyID0gW107CiAgICAgICAgICAgICAgICBwYXlsb2FkLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICBwbGFjZU9yZGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgIGFjdGl2ZV9zdGF0dXM6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgY29tcGxleHR5OiBlbGVtZW50LmNvbXBsZXhpdHksCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZF9ieTogbnVsbCwKICAgICAgICAgICAgICAgICAgICBjcmVhdGVkX29uOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGRpc2NxdHk6IGVsZW1lbnQuZGlzY2xvc2VkUXVhbnRpdHkgPyBlbGVtZW50LmRpc2Nsb3NlZFF1YW50aXR5IDogMCwKICAgICAgICAgICAgICAgICAgICBlbXNnOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGV4Y2g6IGVsZW1lbnQuZXhjaGFuZ2UsCiAgICAgICAgICAgICAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgaW5zdHJ1bWVudDogZWxlbWVudC5pbnN0cnVtZW50LAogICAgICAgICAgICAgICAgICAgIGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgbWFzdGVyX2lkOiAwLAogICAgICAgICAgICAgICAgICAgIHBDb2RlOiBlbGVtZW50LnByb2R1Y3QgPyBlbGVtZW50LnByb2R1Y3QudG9Mb3dlckNhc2UoKSA6IGVsZW1lbnQucHJvZHVjdCwKICAgICAgICAgICAgICAgICAgICBwcmN0eXA6IGVsZW1lbnQub3JkZXJUeXBlLAogICAgICAgICAgICAgICAgICAgIHByaWNlOiBlbGVtZW50LnByaWNlID8gZWxlbWVudC5wcmljZSA6IDAsCiAgICAgICAgICAgICAgICAgICAgcXR5OiBlbGVtZW50LnF1YW50aXR5LAogICAgICAgICAgICAgICAgICAgIHJlcG9uc2U6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgcmV0OiBlbGVtZW50LnZhbGlkaXR5ID8gZWxlbWVudC52YWxpZGl0eS50b1VwcGVyQ2FzZSgpIDogIkRBWSIsCiAgICAgICAgICAgICAgICAgICAgc2FsdDogbnVsbCwKICAgICAgICAgICAgICAgICAgICBzdGF0OiBudWxsLAogICAgICAgICAgICAgICAgICAgIHN0b3BMb3NzOiBlbGVtZW50LnN0b3Bsb3NzID8gcGFyc2VJbnQoZWxlbWVudC5zdG9wbG9zcykgOiAwLAogICAgICAgICAgICAgICAgICAgIHN5bWJvbF9pZDogZWxlbWVudC50b2tlbiwKICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGVsZW1lbnQuc3RvcGxvc3MgPyBwYXJzZUludChlbGVtZW50LnN0b3Bsb3NzKSA6IDAsCiAgICAgICAgICAgICAgICAgICAgdHJhZGluZ19zeW1ib2w6IGVsZW1lbnQudHJhZGluZ1N5bWJvbCwKICAgICAgICAgICAgICAgICAgICB0cmFpbGluZ19zdG9wX2xvc3M6IGVsZW1lbnQudHJhaWxpbmdTdG9wbG9zcyA/IHBhcnNlSW50KGVsZW1lbnQudHJhaWxpbmdTdG9wbG9zcykgOiAwLAogICAgICAgICAgICAgICAgICAgIHRyYW5zdHlwZTogZWxlbWVudC50cmFuc2FjdGlvblR5cGUgPyBlbGVtZW50LnRyYW5zYWN0aW9uVHlwZS50b0xvd2VyQ2FzZSgpIDogZWxlbWVudC50cmFuc2FjdGlvblR5cGUsCiAgICAgICAgICAgICAgICAgICAgdHJpZ1ByaWNlOiBlbGVtZW50LnRyaWdnZXJQcmljZSA/IGVsZW1lbnQudHJpZ2dlclByaWNlIDogMCwKICAgICAgICAgICAgICAgICAgICB1cGRhdGVkX2J5OiBudWxsLAogICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRfb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiByb290R2V0dGVyc1snYXV0aHRpY2F0aW9uL2dldFVzZXJJZCddLAogICAgICAgICAgICAgICAgICAgIHVzZXJTZXNzaW9uSUQ6IHJvb3RHZXR0ZXJzWydhdXRodGljYXRpb24vZ2V0VXNlclNlc3Npb24nXSwKICAgICAgICAgICAgICAgICAgICB1c2VyU2V0dGluZ0R0bzogcm9vdEdldHRlcnNbJ2F1dGh0aWNhdGlvbi9nZXRVc2VyU2Vzc2lvbkR0byddCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwbGFjZU9yZGVyKTsKICAgICAgICAgICAgICAgIHN0YXRlLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0T3JkZXJXaW5kb3cnLCBmYWxzZSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gc2VydmljZS5leGVjdXRlT3JkZXIocGxhY2VPcmRlcikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGFbMF1bImVtc2ciXSA9PSAnSW5wdXQgcGFyYW1ldGVycyBhcmUgd3JvbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nLnRvYXN0ZXIoJ09yZGVyIG5vdCBwbGFjZWQnLCAnZGFuZ2VyJywgZWxlbWVudFsiZW1zZyJdLCAzMDAwKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhWzBdLnN0YXQgPT0gJ05vdF9PaycpIHsKICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxpbmcudG9hc3RlcignT3JkZXIgbm90IHBsYWNlZCcsICdkYW5nZXInLCBlbGVtZW50WydFbXNnJ10sIDMwMDApOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGluZy50b2FzdGVyKGVsZW1lbnRbIk5PcmRObyJdID8gZWxlbWVudFsiTk9yZE5vIl0gOiBlbGVtZW50WyJuZXN0T3JkZXJOdW1iZXIiXSwgJ3N1Y2Nlc3MnLCAnT3JkZXIgUGxhY2VkIFN1Y2Nlc3NmdWxseScsIDMwMDApOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKCcvb3JkZXJzJyk7CiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Jhc2tldE9yZGVyJywgZmFsc2UpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBjb21taXQoJ3NldE9yZGVyV2luZG93JywgZmFsc2UpOwogICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nLmVyckxvZyhlcnIpOwogICAgICAgICAgICAgICAgfSlbImZpbmFsbHkiXShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHN0YXRlLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyBNb2RpZnkgb3JkZXIKICAgIG1vZGlmeU9yZGVyOiBmdW5jdGlvbiBtb2RpZnlPcmRlcihfcmVmMywgcGF5bG9hZCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgcm9vdEdldHRlcnMsIHBsYWNlT3JkZXI7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGUsIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwgcm9vdEdldHRlcnMgPSBfcmVmMy5yb290R2V0dGVyczsKICAgICAgICAgICAgICAgIHBsYWNlT3JkZXIgPSB7CiAgICAgICAgICAgICAgICAgIGFjY291bnRfaWQ6IHN0YXRlLmN1cnJlbnRPcmRlclsiYWNjb3VudElkIl0sCiAgICAgICAgICAgICAgICAgIGRpc2NxdHk6IHBheWxvYWQub3JkZXJUYWIgPT0gImJyYWNrZXQiID8gcGF5bG9hZC5kaXNjUXR5LnRvU3RyaW5nKCkgOiBwYXlsb2FkLmRpc2NRdHksCiAgICAgICAgICAgICAgICAgIGV4Y2g6IHN0YXRlLmN1cnJlbnRPcmRlclsiRXhjaGFuZ2UiXSwKICAgICAgICAgICAgICAgICAgZXhjaFNlZzogc3RhdGUuY3VycmVudE9yZGVyWyJFeHNlZyJdLAogICAgICAgICAgICAgICAgICBmaWxsZWRRdWFudGl0eTogc3RhdGUuY3VycmVudE9yZGVyWyJGaWxsc2hhcmVzIl0sCiAgICAgICAgICAgICAgICAgIG1rdFBybzogc3RhdGUuY3VycmVudE9yZGVyWyJNa3Rwcm8iXSwKICAgICAgICAgICAgICAgICAgbmVzdE9yZGVyTnVtYmVyOiBzdGF0ZS5jdXJyZW50T3JkZXJbIk5zdG9yZG5vIl0sCiAgICAgICAgICAgICAgICAgIHBDb2RlOiBzdGF0ZS5jdXJyZW50T3JkZXJbIlBjb2RlIl0gPT0gIk1JUyIgPyAibWlzIiA6IHN0YXRlLmN1cnJlbnRPcmRlclsiUGNvZGUiXSwKICAgICAgICAgICAgICAgICAgcHJjdHlwOiBwYXlsb2FkLnByaWNlVHlwZSwKICAgICAgICAgICAgICAgICAgc19wcmR0X2FsaTogcm9vdEdldHRlcnNbJ2F1dGh0aWNhdGlvbi9nZXRVc2VyU2Vzc2lvbkR0byddLnNfcHJkdF9hbGksCiAgICAgICAgICAgICAgICAgIHByaWNlOiBwYXlsb2FkLnByaWNlLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIHF0eTogcGF5bG9hZC5xdHksCiAgICAgICAgICAgICAgICAgIHNjcmlwVG9rZW46IHN0YXRlLmN1cnJlbnRPcmRlclsidG9rZW4iXSwKICAgICAgICAgICAgICAgICAgc3ltYm9sX2lkOiBzdGF0ZS5jdXJyZW50T3JkZXJbInRva2VuIl0sCiAgICAgICAgICAgICAgICAgIHRyYWRpbmdfc3ltYm9sOiBzdGF0ZS5jdXJyZW50T3JkZXJbIlRyc3ltIl0sCiAgICAgICAgICAgICAgICAgIHRyYW5zdHlwZTogc3RhdGUub3JkZXJUeXBlLAogICAgICAgICAgICAgICAgICB0cmlnUHJpY2U6IHBheWxvYWQudHJnUHJpY2UsCiAgICAgICAgICAgICAgICAgIHVzZXJJZDogcm9vdEdldHRlcnNbJ2F1dGh0aWNhdGlvbi9nZXRVc2VySWQnXSwKICAgICAgICAgICAgICAgICAgdmFsaWRpdHk6IHBheWxvYWQudmFsaWRpdHkgPyBwYXlsb2FkLnZhbGlkaXR5LnRvVXBwZXJDYXNlKCkgOiAiREFZIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHN0YXRlLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UubW9kaWZ5T3JkZXIocGxhY2VPcmRlcikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDAgJiYgcmVzcG9uc2UuZGF0YS5zdGF0ID09ICJPayIpIHsKICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nLnRvYXN0ZXIoJ01vZGlmaWVkIFN1Y2Nlc3NmdWxseScsICdzdWNjZXNzJywgJ2NoZWNrIG9yZGVyIGJvb2sgZm9yIGZ1cnRoZXIgZGV0YWlscy4nLCAzMDAwKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nLnRvYXN0ZXIoJ09yZGVyIG5vdCBtb2RpZmllZCcsICdkYW5nZXInLCByZXNwb25zZS5kYXRhLkVtc2csIDMwMDApOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBjb21taXQoJ3NldE9yZGVyV2luZG93JywgZmFsc2UpOwogICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nLmVyckxvZyhlcnIpOwogICAgICAgICAgICAgICAgfSlbImZpbmFsbHkiXShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHN0YXRlLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyBnZXQgTmV3IFByaWNlIHJhbmdlIFNlcnZpY2UKICAgIGdldE5ld1ByaWNlUmFuZ2U6IGZ1bmN0aW9uIGdldE5ld1ByaWNlUmFuZ2UoX3JlZjQsIHBheWxvYWQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgdmFyIHN0YXRlLCBjb21taXQsIHJvb3RHZXR0ZXJzLCBleGNoLCB0b2tlbiwganNvbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmNC5zdGF0ZSwgY29tbWl0ID0gX3JlZjQuY29tbWl0LCByb290R2V0dGVycyA9IF9yZWY0LnJvb3RHZXR0ZXJzOwoKICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5jdXJyZW50UGFnZSA9PSAnaG9sZGluZ3MnKSB7CiAgICAgICAgICAgICAgICAgIGV4Y2ggPSBzdGF0ZS5jdXJyZW50T3JkZXIuRXhjaFNlZzEgJiYgc3RhdGUuY3VycmVudE9yZGVyLk5zZXRzeW0gIT0gIjAiID8gc3RhdGUuY3VycmVudE9yZGVyLkV4Y2hTZWcxIDogc3RhdGUuY3VycmVudE9yZGVyLkV4Y2hTZWcyOwogICAgICAgICAgICAgICAgICB0b2tlbiA9IGV4Y2ggPT0gIk5TRSIgPyBzdGF0ZS5jdXJyZW50T3JkZXIuVG9rZW4xIDogc3RhdGUuY3VycmVudE9yZGVyLlRva2VuMjsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuY3VycmVudFBhZ2UgPT0gImFuYWx5dGljcyIpIHsKICAgICAgICAgICAgICAgICAgZXhjaCA9IHBheWxvYWQuZXhjaDsKICAgICAgICAgICAgICAgICAgdG9rZW4gPSBwYXlsb2FkLmV4Y2ggPT0gJ05TRScgPyBzdGF0ZS5jdXJyZW50T3JkZXIubnNlVG9rZW4gOiBzdGF0ZS5jdXJyZW50T3JkZXIudG9rZW47CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmN1cnJlbnRQYWdlID09ICJiYXNrZXQiKSB7CiAgICAgICAgICAgICAgICAgIGV4Y2ggPSBzdGF0ZS5jdXJyZW50T3JkZXIuZXhjaGFuZ2U7CiAgICAgICAgICAgICAgICAgIHRva2VuID0gc3RhdGUuY3VycmVudE9yZGVyLnRva2VuOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZXhjaCA9IHN0YXRlLmN1cnJlbnRQYWdlID09ICdta1dhdGNoJyA/IHN0YXRlLmN1cnJlbnRPcmRlci5leCA6IHN0YXRlLmN1cnJlbnRPcmRlci5FeGNoYW5nZTsKICAgICAgICAgICAgICAgICAgdG9rZW4gPSBzdGF0ZS5jdXJyZW50UGFnZSA9PSAncG9zaXRpb25zJyA/IHN0YXRlLmN1cnJlbnRPcmRlci5Ub2tlbiA6IHN0YXRlLmN1cnJlbnRPcmRlci50b2tlbjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBqc29uID0gewogICAgICAgICAgICAgICAgICAiZXhjaCI6IGV4Y2gsCiAgICAgICAgICAgICAgICAgICJzeW1ib2wiOiB0b2tlbiA/IHRva2VuIDogc3RhdGUuY3VycmVudE9yZGVyLlN5bWJvbCwKICAgICAgICAgICAgICAgICAgJ3VzZXJJZCc6IHJvb3RHZXR0ZXJzWydhdXRodGljYXRpb24vZ2V0VXNlcklkJ10sCiAgICAgICAgICAgICAgICAgICd1c2VyU2Vzc2lvbklEJzogcm9vdEdldHRlcnNbJ2F1dGh0aWNhdGlvbi9nZXRVc2VyU2Vzc2lvbiddCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZ2V0TmV3UHJpY2VSYW5nZShqc29uKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBzdGF0ZS5yZW1vdmVDc3MgPT0gZmFsc2UgPyBjb21taXQoJ3NldFJlbW92ZUNzcycsIGZhbHNlKSA6ICcnOwoKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZW1zZyA9PSAiU2Vzc2lvbiBFeHBpcmVkIiB8fCByZXNwb25zZS5kYXRhID09IFtdKSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGluZy5zZXNzaW9uRXhwaXJlKCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0UHJpY2VSYW5nZURldGFpbHMnLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nLmVyckxvZyhlcnIpOwogICAgICAgICAgICAgICAgfSlbImZpbmFsbHkiXShmdW5jdGlvbiAoKSB7fSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIHNjcmlwIHF1b3RlIGRldGFpbHMKICAgIGdldFNjcmlwUXVvdGVEZXRhaWxzOiBmdW5jdGlvbiBnZXRTY3JpcFF1b3RlRGV0YWlscyhfcmVmNSwgcGF5bG9hZCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgZGlzcGF0Y2gsIHJvb3RHZXR0ZXJzLCBleGNoLCB0b2tlbiwganNvbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmNS5zdGF0ZSwgY29tbWl0ID0gX3JlZjUuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWY1LmRpc3BhdGNoLCByb290R2V0dGVycyA9IF9yZWY1LnJvb3RHZXR0ZXJzOwoKICAgICAgICAgICAgICAgIGlmIChwYXlsb2FkLnBhZ2UpIHsKICAgICAgICAgICAgICAgICAgZXhjaCA9IHBheWxvYWQudmFsdWUuZXg7CiAgICAgICAgICAgICAgICAgIHRva2VuID0gcGF5bG9hZC52YWx1ZS50b2tlbjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5jdXJyZW50UGFnZSA9PSAnaG9sZGluZ3MnKSB7CiAgICAgICAgICAgICAgICAgICAgZXhjaCA9IHN0YXRlLmN1cnJlbnRPcmRlci5FeGNoU2VnMSAmJiBzdGF0ZS5jdXJyZW50T3JkZXIuTnNldHN5bSAhPSAiMCIgPyBzdGF0ZS5jdXJyZW50T3JkZXIuRXhjaFNlZzEgOiBzdGF0ZS5jdXJyZW50T3JkZXIuRXhjaFNlZzI7CiAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSBleGNoID09ICJOU0UiID8gc3RhdGUuY3VycmVudE9yZGVyLlRva2VuMSA6IHN0YXRlLmN1cnJlbnRPcmRlci5Ub2tlbjI7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuY3VycmVudFBhZ2UgPT0gImFuYWx5dGljcyIpIHsKICAgICAgICAgICAgICAgICAgICBleGNoID0gcGF5bG9hZC5leGNoOwogICAgICAgICAgICAgICAgICAgIHRva2VuID0gcGF5bG9hZC5leGNoID09ICdOU0UnID8gc3RhdGUuY3VycmVudE9yZGVyLm5zZVRva2VuIDogc3RhdGUuY3VycmVudE9yZGVyLnRva2VuOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmN1cnJlbnRQYWdlID09ICJiYXNrZXQiKSB7CiAgICAgICAgICAgICAgICAgICAgZXhjaCA9IHN0YXRlLmN1cnJlbnRPcmRlci5leGNoYW5nZTsKICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IHN0YXRlLmN1cnJlbnRPcmRlci50b2tlbjsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBleGNoID0gc3RhdGUuY3VycmVudFBhZ2UgPT0gJ21rV2F0Y2gnID8gc3RhdGUuY3VycmVudE9yZGVyLmV4IDogc3RhdGUuY3VycmVudE9yZGVyLkV4Y2hhbmdlOwogICAgICAgICAgICAgICAgICAgIHRva2VuID0gc3RhdGUuY3VycmVudFBhZ2UgPT0gJ3Bvc2l0aW9ucycgPyBzdGF0ZS5jdXJyZW50T3JkZXIuVG9rZW4gOiBzdGF0ZS5jdXJyZW50T3JkZXIudG9rZW47CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBqc29uID0gewogICAgICAgICAgICAgICAgICAiZXhjaCI6IGV4Y2gsCiAgICAgICAgICAgICAgICAgICJzeW1ib2wiOiB0b2tlbiA/IHRva2VuIDogc3RhdGUuY3VycmVudE9yZGVyLlN5bWJvbCwKICAgICAgICAgICAgICAgICAgJ3VzZXJJZCc6IHJvb3RHZXR0ZXJzWydhdXRodGljYXRpb24vZ2V0VXNlcklkJ10sCiAgICAgICAgICAgICAgICAgICd1c2VyU2Vzc2lvbklEJzogcm9vdEdldHRlcnNbJ2F1dGh0aWNhdGlvbi9nZXRVc2VyU2Vzc2lvbiddCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZ2V0U2NyaXBRdW90ZURldGFpbHMoanNvbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZW1zZyA9PSAiU2Vzc2lvbiBFeHBpcmVkIikgewogICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxpbmcuc2Vzc2lvbkV4cGlyZSgpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICBpZiAocGF5bG9hZC5wYWdlID09ICdjaGFydCcpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0Q2hhcnRTY3JpcERhdGEnLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgY29tbWl0KCdzZXRTY3JpcHRRdW90ZURldGFpbHMnLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wRGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogW10sCiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiAnb3JkZXJ3aW5kb3cnLAogICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmU6IGpzb24uZXhjaCArICd8JyArIGpzb24uc3ltYm9sICsgJyMnCiAgICAgICAgICAgICAgICAgICAgICB9OyAvLyBkaXNwYXRjaCgnd3NDb25uZWN0aW9uL3dlYnNvY2tldFN1YnNjcmlwdGlvbicsIHRlbXBEYXRhLCB7IHJvb3Q6IHRydWUgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5lbXNnID09ICJTZXNzaW9uIEV4cGlyZWQiKSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGluZy5zZXNzaW9uRXhwaXJlKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGluZy5lcnJMb2coZXJyKTsKICAgICAgICAgICAgICAgIH0pWyJmaW5hbGx5Il0oZnVuY3Rpb24gKCkge30pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTkpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZXREZWZhdWx0VmFsdWVzOiBmdW5jdGlvbiBzZXREZWZhdWx0VmFsdWVzKF9yZWY2LCBzY3JpcERhdGEpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICAgIHZhciBzdGF0ZSwgY29tbWl0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmNi5zdGF0ZSwgY29tbWl0ID0gX3JlZjYuY29tbWl0OwoKICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5jdXJyZW50UGFnZSA9PSAnaG9sZGluZ3MnKSB7CiAgICAgICAgICAgICAgICAgIHN0YXRlLm9yZGVyVHlwZS50b0xvd2VyQ2FzZSgpID09ICdzZWxsJyA/IHN0YXRlLm1pbmxvdCA9IHN0YXRlLmN1cnJlbnRPcmRlci5TZWxsYWJsZVF0eSA6ICcnOwogICAgICAgICAgICAgICAgfSAvLyBtaW5sb3QgZm9yIHF1YW50aXR5CgoKICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5jdXJyZW50T3JkZXJbIkluc3RuYW1lIl0gPT0gIkZVVENPTSIgfHwgc3RhdGUuY3VycmVudE9yZGVyWyJJbnN0TmFtZSJdID09ICJGVVRDT00iIHx8IHN0YXRlLmN1cnJlbnRPcmRlclsiSW5zdE5hbWUiXSA9PSAiT1BURlVUIiB8fCBzdGF0ZS5jdXJyZW50T3JkZXJbIkluc3RydW1lbnQiXSA9PSAiRlVUQ09NIiB8fCBzdGF0ZS5jdXJyZW50T3JkZXJbIkluc3RuYW1lIl0gPT0gIk9QVEZVVCIgfHwgc3RhdGUuY3VycmVudE9yZGVyWyJJbnN0cnVtZW50Il0gPT0gIk9QVEZVVCIpIHsKICAgICAgICAgICAgICAgICAgc2NyaXBEYXRhLkJvZExvdFF0eSA/IHN0YXRlLm1pbmxvdCA9IHBhcnNlRmxvYXQoc2NyaXBEYXRhLkJvZExvdFF0eSkgLyBwYXJzZUZsb2F0KHNjcmlwRGF0YS5Cb2RMb3RRdHkpIDogc3RhdGUubWlubG90ID0gMDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHNjcmlwRGF0YS5Cb2RMb3RRdHkgPyBzdGF0ZS5taW5sb3QgPSBwYXJzZUZsb2F0KHNjcmlwRGF0YS5Cb2RMb3RRdHkpIDogc3RhdGUubWlubG90ID0gMDsKICAgICAgICAgICAgICAgIH0gLy8gbHRwIGZvciBQcmljZQoKCiAgICAgICAgICAgICAgICBjaGVja051bGxOYW4oc2NyaXBEYXRhLkxUUCkgPyBzdGF0ZS5sdHAgPSBzY3JpcERhdGEuTFRQIDogc3RhdGUubHRwID0gJzAuMDAnOwogICAgICAgICAgICAgICAgc3RhdGUuY3VycmVudEV4Y2hhbmdlID09ICJDRFMiID8gcGFyc2VGbG9hdChzdGF0ZS5sdHApLnRvRml4ZWQoNCkgOiBwYXJzZUZsb2F0KHN0YXRlLmx0cCkudG9GaXhlZCgyKTsKICAgICAgICAgICAgICAgIHNjcmlwRGF0YSA/IGNvbW1pdCgnc2V0VGlja1ByaWNlJywgc2NyaXBEYXRhKSA6ICcnOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRDdXJyZW50UXR5Jywgc3RhdGUub3JkZXJEYXRhLnBhZ2UgPT0gJ29yZGVycycgJiYgc3RhdGUubW9kaWZ5T3JkZXIgJiYgc3RhdGUub3JkZXJEYXRhLnR5cGUgPyBzdGF0ZS5vcmRlckRhdGEuZGF0YS5RdHkgOiBzdGF0ZS5taW5sb3QpOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRDdXJyZW50UHJpY2UnLCBzdGF0ZS5sdHApOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRDdXJyZW50VHJnUHJpY2UnLCBzdGF0ZS5sdHApOwogICAgICAgICAgICAgICAgY29tbWl0KCJzZXRXaW5kb3dMb2FkaW5nIiwgZmFsc2UpOwoKICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5tb2RpZnlPcmRlcikgewogICAgICAgICAgICAgICAgICBjb21taXQoJ3NldEN1cnJlbnRQcmljZScsIHN0YXRlLmN1cnJlbnRPcmRlci5QcmMgPT0gMCA/IHN0YXRlLmx0cCA6IGNoZWNrTnVsbE5hbihzdGF0ZS5jdXJyZW50T3JkZXIuUHJjKSA/IHN0YXRlLmN1cnJlbnRPcmRlci5QcmMgOiAnMC4wMCcpOwogICAgICAgICAgICAgICAgICBjb21taXQoJ3NldEN1cnJlbnRUcmdQcmljZScsIGNoZWNrTnVsbE5hbihzdGF0ZS5jdXJyZW50T3JkZXIuVHJncHJjKSA/IHBhcnNlRmxvYXQoc3RhdGUuY3VycmVudE9yZGVyLlRyZ3ByYykgIT0gMCA/IHN0YXRlLmN1cnJlbnRPcmRlci5UcmdwcmMgOiBzdGF0ZS5sdHAgOiAnMC4wMCcpOwogICAgICAgICAgICAgICAgICBjb21taXQoJ3NldERpc2Nsb3NlZFF0eScsIGNoZWNrTnVsbE5hbihzdGF0ZS5jdXJyZW50T3JkZXIuRHNjcXR5KSA/IHN0YXRlLmN1cnJlbnRPcmRlci5Ec2NxdHkgOiAwKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzZXRRdHlGb2N1cygpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTApOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZXRJbml0aWFsVmFsdWVzOiBmdW5jdGlvbiBzZXRJbml0aWFsVmFsdWVzKF9yZWY3LCBwYXlsb2FkKSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWY3LnN0YXRlLAogICAgICAgICAgY29tbWl0ID0gX3JlZjcuY29tbWl0LAogICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmNy5kaXNwYXRjaDsKICAgICAgdmFyIEluc3ROYW1lID0gcGF5bG9hZC5wYWdlID09ICJta1dhdGNoIiA/ICJJbnN0cnVtZW50IiA6IHBheWxvYWQucGFnZSA9PSAicG9zaXRpb25zIiA/ICJJbnN0bmFtZSIgOiBwYXlsb2FkLnBhZ2UgPT0gIm9yZGVycyIgPyAiSW5zdE5hbWUiIDogJyc7CiAgICAgIHZhciBFeGNoYW5nZSA9IHBheWxvYWQucGFnZSA9PSAibWtXYXRjaCIgfHwgcGF5bG9hZC5wYWdlID09ICJwb3NpdGlvbnMiIHx8IHBheWxvYWQucGFnZSA9PSAib3JkZXJzIiA/ICJFeGNoYW5nZSIgOiAnJzsKCiAgICAgIGlmIChwYXlsb2FkLnBhZ2UgPT0gImhvbGRpbmdzIikgewogICAgICAgIGNvbW1pdCgic2V0UHJvZHVjdEl0ZW1zIiwgc3RhdGUuZXFQcm9kdWN0SXRlbXMpOwogICAgICAgIGNvbW1pdCgic2V0UHJpY2VJdGVtcyIsIHN0YXRlLmFsbFByaWNlSXRlbXMpOwogICAgICAgIGNvbW1pdCgic2V0SXNOZm8iLCB0cnVlKTsKICAgICAgICAhIXN0YXRlLnByaWNlVHlwZSA/ICcnIDogY29tbWl0KCdzZXRQcmljZVR5cGUnLCAnTUtUJyk7CiAgICAgICAgISFzdGF0ZS5wcm9kVHlwZSA/ICcnIDogY29tbWl0KCdzZXRQcm9kVHlwZScsICdDTkMnKTsKICAgICAgICAhIXN0YXRlLm9yZGVyVGFiID8gJycgOiBjb21taXQoInNldE9yZGVyVGFiIiwgMCk7CiAgICAgIH0gLy8gZWxzZSBpZiAocGF5bG9hZC5wYWdlID09ICJiYXNrZXQiKXsKICAgICAgLy8gfQogICAgICBlbHNlIHsKICAgICAgICBwYXlsb2FkLmRhdGFbSW5zdE5hbWVdID09ICJPUFRJRFgiIHx8IHBheWxvYWQuZGF0YVtJbnN0TmFtZV0gPT0gJ09QVFNUSycgPyBjb21taXQoInNldFByaWNlSXRlbXMiLCBzdGF0ZS5wb3N0aW9uUHJpY2VJdGVtcykgOiBjb21taXQoInNldFByaWNlSXRlbXMiLCBzdGF0ZS5hbGxQcmljZUl0ZW1zKTsKICAgICAgICBwYXlsb2FkLmRhdGFbSW5zdE5hbWVdID09ICJPUFRJRFgiIHx8IHBheWxvYWQuZGF0YVtJbnN0TmFtZV0gPT0gJ09QVFNUSycgPyBjb21taXQoInNldElzTmZvIiwgZmFsc2UpIDogY29tbWl0KCJzZXRJc05mbyIsIHRydWUpOwogICAgICAgIHBheWxvYWQuZGF0YVtFeGNoYW5nZV0gPT0gIk5TRSIgfHwgcGF5bG9hZC5kYXRhW0V4Y2hhbmdlXSA9PSAnQlNFJyA/IGNvbW1pdCgic2V0UHJvZHVjdEl0ZW1zIiwgc3RhdGUuZXFQcm9kdWN0SXRlbXMpIDogY29tbWl0KCJzZXRQcm9kdWN0SXRlbXMiLCBzdGF0ZS5hbGxQcm9kdWN0SXRlbXMpOwogICAgICAgIHBheWxvYWQucGFnZSA9PSAibWtXYXRjaCIgJiYgISFzdGF0ZS5wcmljZVR5cGUgPyAnJyA6IHBheWxvYWQucGFnZSA9PSAibWtXYXRjaCIgPyBjb21taXQoJ3NldFByaWNlVHlwZScsICdMJykgOiAnJzsKICAgICAgICBwYXlsb2FkLnBhZ2UgPT0gIm1rV2F0Y2giICYmICEhc3RhdGUucHJvZFR5cGUgPyAnJyA6IHBheWxvYWQucGFnZSA9PSAibWtXYXRjaCIgPyBjb21taXQoJ3NldFByb2RUeXBlJywgJ01JUycpIDogJyc7CiAgICAgICAgcGF5bG9hZC5wYWdlID09ICJwb3NpdGlvbnMiICYmICEhc3RhdGUucHJpY2VUeXBlID8gJycgOiBwYXlsb2FkLnBhZ2UgPT0gInBvc2l0aW9ucyIgPyBjb21taXQoJ3NldFByaWNlVHlwZScsICdNS1QnKSA6ICcnOwogICAgICAgIHBheWxvYWQucGFnZSA9PSAicG9zaXRpb25zIiAmJiAhIXN0YXRlLnByb2RUeXBlID8gJycgOiBwYXlsb2FkLnBhZ2UgPT0gInBvc2l0aW9ucyIgPyBjb21taXQoJ3NldFByb2RUeXBlJywgcGF5bG9hZC5kYXRhLlBjb2RlKSA6ICcnOwogICAgICAgIHBheWxvYWQucGFnZSA9PSAib3JkZXJzIiAmJiAhIXN0YXRlLnByaWNlVHlwZSA/ICcnIDogcGF5bG9hZC5wYWdlID09ICJvcmRlcnMiICYmIHBheWxvYWQudHlwZSA/IGNvbW1pdCgnc2V0UHJpY2VUeXBlJywgcGF5bG9hZC5kYXRhLlByY3R5cGUpIDogcGF5bG9hZC5wYWdlID09ICJvcmRlcnMiICYmICFwYXlsb2FkLnR5cGUgPyBjb21taXQoJ3NldFByaWNlVHlwZScsICdMJykgOiAnJzsKICAgICAgICBwYXlsb2FkLnBhZ2UgPT0gIm9yZGVycyIgJiYgISFzdGF0ZS5wcm9kVHlwZSA/ICcnIDogcGF5bG9hZC5wYWdlID09ICJvcmRlcnMiICYmIHBheWxvYWQudHlwZSA/IGNvbW1pdCgnc2V0UHJvZFR5cGUnLCBwYXlsb2FkLmRhdGEuUGNvZGUpIDogcGF5bG9hZC5wYWdlID09ICJvcmRlcnMiICYmICFwYXlsb2FkLnR5cGUgPyBjb21taXQoJ3NldFByb2RUeXBlJywgJ01JUycpIDogJyc7CgogICAgICAgIGlmIChwYXlsb2FkLnBhZ2UgPT0gIm9yZGVycyIgJiYgcGF5bG9hZC50eXBlKSB7CiAgICAgICAgICBjb21taXQoInNldE9yZGVyVGFiIiwgcGF5bG9hZC5kYXRhLm9yZGVyZ2VuZXJhdGlvbnR5cGUudG9Mb3dlckNhc2UoKSA9PSAnYW1vJyA/IDMgOiBwYXlsb2FkLmRhdGEub3JkZXJnZW5lcmF0aW9udHlwZS50b1N0cmluZygpID09ICctLScgJiYgcGF5bG9hZC5kYXRhLlBjb2RlID09ICdDTycgPyAxIDogcGF5bG9hZC5kYXRhLm9yZGVyZ2VuZXJhdGlvbnR5cGUudG9TdHJpbmcoKSA9PSAnLS0nICYmIHBheWxvYWQuZGF0YS5QY29kZSA9PSAnQk8nID8gMiA6IDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAhIXN0YXRlLm9yZGVyVGFiID8gJycgOiBjb21taXQoInNldE9yZGVyVGFiIiwgMCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoc3RhdGUubW9kaWZ5T3JkZXIpIHsKICAgICAgICAgIGNvbW1pdCgnc2V0VmFsaWRpdHlUeXBlJywgcGF5bG9hZC5kYXRhLlZhbGlkaXR5KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGRpc3BhdGNoKCdjb21tb24vc2V0T3JkZXJUeXBlQ29tbW9uJywgcGF5bG9hZCwgewogICAgICAgIHJvb3Q6IHRydWUKICAgICAgfSk7CiAgICB9LAogICAgc2V0T3JkZXJQcmVmZXJlbmNlOiBmdW5jdGlvbiBzZXRPcmRlclByZWZlcmVuY2UoX3JlZjgsIHBheWxvYWQpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZjguc3RhdGUsCiAgICAgICAgICBjb21taXQgPSBfcmVmOC5jb21taXQ7CiAgICAgIGNvbW1pdCgnc2V0T3JkZXJEYXRhJywgcGF5bG9hZCk7IC8vIG1hcmtldCB3YXRjaCBvcmRlcldpbmRvdyBwcmVmZXJlbmNlIHNldCB2aWEgbG9jYWxTdG9yYWdlZAoKICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvcmRlclByZWZlcmVuY2UiKSAmJiAocGF5bG9hZC5wYWdlID09ICJta1dhdGNoIiB8fCBwYXlsb2FkLnBhZ2UgPT0gIm9yZGVycyIgJiYgIXN0YXRlLm1vZGlmeU9yZGVyKSkgewogICAgICAgIHZhciBwcmVmZXJlbmNlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgib3JkZXJQcmVmZXJlbmNlIikpOwogICAgICAgIHZhciBwcm9kVHlwZSA9IChzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgIT0gIkJTRSIgfHwgc3RhdGUuY3VycmVudEV4Y2hhbmdlICE9ICJOU0UiKSAmJiBwcmVmZXJlbmNlWyJwcm9kdWN0Il0gPT0gJ05STUwnID8gJ05STUwnIDogcHJlZmVyZW5jZVsicHJvZHVjdCJdOyAvLyB2YXIgb3JkZXJUYWIgPSBwcmVmZXJlbmNlWyJ2YXJpZXR5Il0gPT0gJ3JlZ3VsYXInID8gMCA6IHByZWZlcmVuY2VbInZhcmlldHkiXSA9PSAnY292ZXInID8gMSA6IHByZWZlcmVuY2VbInZhcmlldHkiXSA9PSAnYnJhY2tldCcgPyAyIDogcHJlZmVyZW5jZVsidmFyaWV0eSJdID09ICdhbW8nID8gMyA6ICcnCgogICAgICAgIHByZWZlcmVuY2VbInZhcmlldHkiXSA9PSAncmVndWxhcicgPyBwcmVmZXJlbmNlWyJ2YXJpZXR5Il0gPSAnUmVndWxhcicgOiBwcmVmZXJlbmNlWyJ2YXJpZXR5Il0gPT0gJ2NvdmVyJyA/IHByZWZlcmVuY2VbJ3ZhcmlldHknXSA9ICdDb3ZlcicgOiBwcmVmZXJlbmNlWyJ2YXJpZXR5Il0gPT0gJ2JyYWNrZXQnID8gcHJlZmVyZW5jZVsidmFyaWV0eSJdID0gJ0JyYWNrZXQnIDogcHJlZmVyZW5jZVsidmFyaWV0eSJdID09ICdhbW8nID8gcHJlZmVyZW5jZVsidmFyaWV0eSJdID0gJ0FNTycgOiAnJzsKICAgICAgICB2YXIgb3JkZXJUYWIgPSBzdGF0ZS5vcmRlclR5cGVMaXN0LmluZGV4T2YocHJlZmVyZW5jZVsidmFyaWV0eSJdKTsKICAgICAgICB2YXIgcHJpY2VUeXBlID0gcHJlZmVyZW5jZVsib3JkZXJUeXBlIl07CiAgICAgICAgdmFyIHZhbGlkaXR5ID0gcHJlZmVyZW5jZVsidmFsaWRpdHkiXTsKICAgICAgICBjb21taXQoInNldE9yZGVyVGFiIiwgb3JkZXJUYWIpOwogICAgICAgIGNvbW1pdCgnc2V0UHJvZFR5cGUnLCBwcm9kVHlwZSk7CiAgICAgICAgY29tbWl0KCdzZXRQcmljZVR5cGUnLCBwcmljZVR5cGUpOwogICAgICAgIGNvbW1pdCgnc2V0VmFsaWRpdHlUeXBlJywgdmFsaWRpdHkpOwogICAgICB9IGVsc2UgaWYgKHBheWxvYWQucGFnZSA9PSAiaG9sZGluZ3MiKSB7CiAgICAgICAgY29tbWl0KCJzZXRPcmRlclRhYiIsIDApOwogICAgICAgIGNvbW1pdCgnc2V0UHJvZFR5cGUnLCAnQ05DJyk7CiAgICAgICAgY29tbWl0KCdzZXRQcmljZVR5cGUnLCAnTUtUJyk7CiAgICAgICAgY29tbWl0KCdzZXRWYWxpZGl0eVR5cGUnLCAnREFZJyk7CiAgICAgIH0gZWxzZSBpZiAocGF5bG9hZC5wYWdlID09ICJwb3NpdGlvbnMiKSB7CiAgICAgICAgY29tbWl0KCJzZXRPcmRlclRhYiIsIDApOwogICAgICAgIGNvbW1pdCgnc2V0UHJvZFR5cGUnLCBwYXlsb2FkLmRhdGEuUGNvZGUpOwogICAgICAgIGNvbW1pdCgnc2V0UHJpY2VUeXBlJywgJ01LVCcpOwogICAgICAgIGNvbW1pdCgnc2V0VmFsaWRpdHlUeXBlJywgJ0RBWScpOwogICAgICB9CiAgICB9LAogICAgc2V0Q3VycmVudEx0cDogZnVuY3Rpb24gc2V0Q3VycmVudEx0cChfcmVmOSwgcGF5bG9hZCkgewogICAgICB2YXIgc3RhdGUgPSBfcmVmOS5zdGF0ZTsKICAgICAgc3RhdGUuY3VycmVudEx0cCA9IHN0YXRlLmN1cnJlbnRFeGNoYW5nZSA9PSAnQ0RTJyB8fCBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgPT0gJ0JDRCcgPyBwYXJzZUZsb2F0KHBheWxvYWQpLnRvRml4ZWQoNCkgOiBwYXJzZUZsb2F0KHBheWxvYWQpLnRvRml4ZWQoMik7CiAgICB9LAogICAgLy8gY2hlY2sgbWFyZ2luIGF2YWlsYmxlIAogICAgZ2V0TWFyZ2luQXZhaWxhYmxlOiBmdW5jdGlvbiBnZXRNYXJnaW5BdmFpbGFibGUoX3JlZjEwLCBwYXlsb2FkKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMSgpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlID0gX3JlZjEwLnN0YXRlLCBjb21taXQgPSBfcmVmMTAuY29tbWl0OwogICAgICAgICAgICAgICAgY29tbWl0KCJzZXRBdmFpbGFibGVNYXJnaW4iLCAnMC4wMCcpOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlLmNoZWNrTWFyZ2luKHBheWxvYWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gIjIwMCIpIHsKICAgICAgICAgICAgICAgICAgICBjb21taXQoInNldEF2YWlsYWJsZU1hcmdpbiIsIHJlc3BvbnNlLmRhdGFbJ09yZGVyIE1hcmdpbiddKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGVycm9yKSB7fSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTExKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICBnZXRQcmljZVR5cGU6IGZ1bmN0aW9uIGdldFByaWNlVHlwZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUucHJpY2VUeXBlOwogICAgfSwKICAgIGdldFByb2RUeXBlOiBmdW5jdGlvbiBnZXRQcm9kVHlwZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUucHJvZFR5cGU7CiAgICB9LAogICAgZ2V0T3JkZXJUYWI6IGZ1bmN0aW9uIGdldE9yZGVyVGFiKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5vcmRlclRhYjsKICAgIH0sCiAgICBnZXRWYWxpZGl0eVR5cGU6IGZ1bmN0aW9uIGdldFZhbGlkaXR5VHlwZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudmFsaWRpdHlUeXBlOwogICAgfSwKICAgIGdldFRyaWdnZXJQcmljZTogZnVuY3Rpb24gZ2V0VHJpZ2dlclByaWNlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50cmlnZ2VyUHJpY2U7CiAgICB9LAogICAgZ2V0Q3VycmVudEx0cDogZnVuY3Rpb24gZ2V0Q3VycmVudEx0cChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY3VycmVudEx0cDsKICAgIH0sCiAgICBnZXRDdXJyZW50VG9rZW46IGZ1bmN0aW9uIGdldEN1cnJlbnRUb2tlbihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY3VycmVudFRva2VuOwogICAgfSwKICAgIGdldEF2YWlsYWJsZU1hcmdpbjogZnVuY3Rpb24gZ2V0QXZhaWxhYmxlTWFyZ2luKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5hdmFpbGFibGVNYXJnaW47CiAgICB9CiAgfQp9OwpleHBvcnQgZGVmYXVsdCBvcmRlcldpbmRvdzs="},{"version":3,"sources":["/home/stoneage/vueJs projects/aliceblueTradevuex/src/store/modules/orderWindow.js"],"names":["Vue","service","errorHandling","router","checkNullNan","value","toString","isNaN","setQtyFocus","qtyInputBox","document","querySelector","focus","orderWindow","namespaced","state","orderTypeList","validityItems","bracketPriceItems","coverPriceItems","orderTab","priceType","prodType","validityType","showOrderWindow","removeCss","orderType","toggleOrder","currentOrder","priceRangeDetails","scriptQuoteDetails","currentExchange","currentInstrument","currentToken","minlot","ltp","currentLtp","triggerPrice","tickPrice","disclosedQuantity","quantity","price","isPrice","Boolean","isTrgPrice","isDisclosedQty","nsePriceRangeData","bsePriceRangeData","lowerRange","upperRange","nseBseType","modifyOrder","currentPage","mutations","setRemoveCss","payload","setOrderWindow","setOrderWindowModify","setOrderType","setToggleOrder","setCurrentOrder","data","page","ExchSeg1","Nsetsym","ExchSeg2","Token1","Token2","exch","nseToken","token","ex","Exchange","Token","Instrument","Instname","isNfo","Bsetsym","formatScripName","setPriceRangeDetails","length","undefined","forEach","el","Exchg","push","lowercircuitlimit","replace","parseFloat","highercircuitlimit","dispatch","Ltp","LTP","commit","setScriptQuoteDetails","setChartScripData","chartScripData","localStorage","setItem","JSON","stringify","setCurrentQty","qty","setCurrentPrice","setCurrentTrgPrice","trgPrice","makeActive","exchange","lotSize","tickSize","toLowerCase","SellableQty","orderData","type","Qty","setPriceType","setProdType","setOrderTab","setValidityType","setWindowLoading","windowLoading","setPriceItems","showPriceItems","setProductItems","showproductItems","setIsNfo","changeOrderType","setOrderData","setIsDisclosedQty","setTickPrice","nseOrBseTickSize","TickSize","multiplier","Multiplier","decimalPrevision","DecimalPrecision","tempTickSize","Math","pow","setNseSwitchPrice","nseSwitchPrice","setBseSwitchPrice","bseSwitchPrice","setValidityItems","setDisclosedQty","steOrderType","setAvailableMargin","availableMargin","actions","placeOrder","rootGetters","loading","symbolName","symbol","TradingSymbol","TSymbl","Tsym","active_status","complexty","complexity","created_by","created_on","discqty","discQty","emsg","id","instrument","UniqueKey","link","master_id","pCode","pcode","prctyp","reponse","ret","validity","toUpperCase","salt","stat","stopLoss","parseInt","symbol_id","target","trading_symbol","trailing_stop_loss","trailStopLoss","transtype","trigPrice","updated_by","updated_on","userId","userSessionID","userSettingDto","executeOrder","then","response","toaster","err","errLog","placeBasketOrder","element","product","stoploss","tradingSymbol","trailingStoploss","transactionType","console","log","account_id","exchSeg","filledQuantity","mktPro","nestOrderNumber","s_prdt_ali","scripToken","status","Emsg","getNewPriceRange","json","Symbol","sessionExpire","getScripQuoteDetails","tempData","where","subscribe","setDefaultValues","scripData","BodLotQty","toFixed","Prc","Trgprc","Dscqty","setInitialValues","InstName","eqProductItems","allPriceItems","postionPriceItems","allProductItems","Pcode","Prctype","ordergenerationtype","Validity","root","setOrderPreference","getItem","preference","parse","indexOf","setCurrentLtp","getMarginAvailable","checkMargin","error","getters","getPriceType","getProdType","getOrderTab","getValidityType","getTriggerPrice","getCurrentLtp","getCurrentToken","getAvailableMargin"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport service from '../Services/httpservice'\nimport errorHandling from '../Services/errorHandling'\nimport router from '@/router'\n\nfunction checkNullNan (value) {\n    return value && !!value && value.toString() != \"NA\" && value.toString() != \"-\" && !isNaN(value) ? true : false\n}\n\nfunction setQtyFocus () {\n    let qtyInputBox = document.querySelector(\"#qty\");\n    qtyInputBox != null ? qtyInputBox.focus() : ''\n}\n\nconst orderWindow = {\n    namespaced: true,\n    state: {\n        // window btns state variables\n        orderTypeList: [\"Regular\", \"Cover\", \"Bracket\", \"AMO\"],\n        validityItems: [\"DAY\", \"IOC\"],\n        bracketPriceItems: [\"L\", \"SL\"],\n        coverPriceItems: [\"L\", \"MKT\"],\n        orderTab: null,\n        priceType: null,\n        prodType: null,\n        validityType: 'DAY',\n\n        showOrderWindow: false,\n        removeCss: true,\n        orderType: 'Buy',\n        // orderSwitch\n        toggleOrder: false,\n        currentOrder: [],\n        priceRangeDetails: [],\n        scriptQuoteDetails: [],\n        currentExchange: '',\n        currentInstrument: '',\n        currentToken: '',\n\n        // qty & price Values\n        minlot: '',\n        ltp: '',\n        currentLtp: null,\n        triggerPrice: '',\n        tickPrice: '',\n        disclosedQuantity: 0,\n        quantity: '',\n        price: '',\n\n        // disable inputs boolean\n        isPrice: Boolean,\n        isTrgPrice: Boolean,\n        isDisclosedQty: Boolean,\n\n        // price range data\n        nsePriceRangeData: [],\n        bsePriceRangeData: [],\n        lowerRange: '',\n        upperRange: '',\n        nseBseType: false,\n        modifyOrder: false,\n\n        // currentPage Identify\n        currentPage: '',\n        currentInstrument: '',\n        isNfo: true,\n\n        // loading states\n        loading: false,\n        windowLoading: false,\n\n        // by Bharath \n        allPriceItems: [\"L\", \"MKT\", \"SL\", \"SL-M\"],\n        postionPriceItems: [\"L\", \"MKT\", \"SL\"],\n        showPriceItems: [],\n        eqProductItems: [\"MIS\", \"CNC\"],\n        allProductItems: [\"MIS\", \"NRML\"],\n        showproductItems: [],\n\n        // for Modify Order Data \n        orderData: [],\n        chartScripData: [],\n\n        // nse switch state\n        nseSwitchPrice: '0.00',\n        bseSwitchPrice: '0.00',\n        availableMargin: '0.00',\n    },\n    mutations: {\n        setRemoveCss (state, payload) {\n            state.removeCss = payload\n        },\n        async setOrderWindow (state, payload) {\n            state.showOrderWindow = payload\n            state.modifyOrder = false\n        },\n\n        async setOrderWindowModify (state, payload) {\n            state.showOrderWindow = payload\n            state.modifyOrder = true\n        },\n\n        setOrderType (state, payload) {\n            state.orderType = payload\n        },\n\n        setToggleOrder (state, payload) {\n            state.toggleOrder = payload\n        },\n\n        setCurrentOrder (state, payload) {\n            state.currentOrder = payload.data\n            if (payload.page == \"holdings\") {\n                state.currentExchange = payload.data.ExchSeg1 && payload.data.Nsetsym != \"0\" ? payload.data.ExchSeg1 : payload.data.ExchSeg2\n                state.currentToken = state.currentExchange == \"NSE\" ? payload.data.Token1 : payload.data.Token2\n            } else if (payload.page == \"analytics\") {\n                state.currentExchange = payload.exch\n                state.currentToken = payload.data.nseToken ? payload.data.nseToken : payload.data.token\n            } else {\n                // This block is for POSITIONS and ORDERS\n                state.currentExchange = payload.page == 'mkWatch' ? payload.data.ex : payload.data.Exchange\n                state.currentToken = payload.data.token ? payload.data.token : payload.data.Token\n            }\n            if (payload.page == \"mkWatch\") {\n                state.currentInstrument = state.currentOrder.Instrument\n            } else if (payload.page == \"orders\" || payload.page == \"positions\") {\n                state.currentInstrument = state.currentOrder.Instname\n            }\n            state.currentInstrument == 'OPTIDX' || state.currentInstrument == 'OPTSTK' ? state.isNfo = false : state.isNfo = true\n\n            state.currentPage = payload.page\n            if (payload.page == \"holdings\") {\n                state.currentInstrument = state.currentExchange == \"NSE\" ? state.currentOrder.Nsetsym : state.currentOrder.Bsetsym\n            } else {\n                state.currentInstrument = payload.data.formatScripName\n            }\n\n        },\n\n        async setPriceRangeDetails (state, payload) {\n            state.nsePriceRangeData = []\n            state.bsePriceRangeData = []\n            payload.length == 1 || payload.length == undefined ? state.nseBseType = false : state.nseBseType = true\n            // Check undefined, null , empty for both lower and upperRange\n            if (payload.length >= 1) {\n                payload.forEach(el => {\n                    el.Exchg == state.currentExchange ? state.priceRangeDetails = el : ''\n                    if (el.Exchg == \"NSE\") {\n                        state.nsePriceRangeData.push(el)\n                    } else if (el.Exchg == \"BSE\") {\n                        state.bsePriceRangeData.push(el)\n                    }\n                })\n                state.lowerRange = state.priceRangeDetails.lowercircuitlimit ? checkNullNan(state.priceRangeDetails.lowercircuitlimit.toString().replace(/,/g, \"\")) ? parseFloat(state.priceRangeDetails.lowercircuitlimit.toString().replace(/,/g, \"\")) : '0.00' : '0.00'\n                state.upperRange = state.priceRangeDetails.highercircuitlimit ? checkNullNan(state.priceRangeDetails.highercircuitlimit.toString().replace(/,/g, \"\")) ? parseFloat(state.priceRangeDetails.highercircuitlimit.toString().replace(/,/g, \"\")) : '0.00' : '0.00'\n            } else {\n                state.priceRangeDetails = payload\n                state.lowerRange = checkNullNan(state.priceRangeDetails.lowercircuitlimit.toString().replace(/,/g, \"\")) ? parseFloat(state.priceRangeDetails.lowercircuitlimit.toString().replace(/,/g, \"\")) : '0.00'\n                state.upperRange = checkNullNan(state.priceRangeDetails.highercircuitlimit.toString().replace(/,/g, \"\")) ? parseFloat(state.priceRangeDetails.highercircuitlimit.toString().replace(/,/g, \"\")) : '0.00'\n                this.dispatch('orderWindow/setCurrentLtp', checkNullNan(state.priceRangeDetails.Ltp) ? state.priceRangeDetails.Ltp : checkNullNan(state.scriptQuoteDetails.LTP) ? state.scriptQuoteDetails.LTP : '0.00')\n            }\n            // nse bse radio button call function\n\n            if (state.currentExchange == \"NSE\" && payload.length > 1) {\n                await this.commit('orderWindow/makeActive', 'NSE')\n            } else if (state.currentExchange == \"BSE\" && payload.length > 1) {\n                await this.commit('orderWindow/makeActive', 'BSE')\n            }\n        },\n\n        async setScriptQuoteDetails (state, payload) {\n            state.scriptQuoteDetails = payload\n            this.dispatch('orderWindow/setDefaultValues', state.scriptQuoteDetails)\n            this.dispatch('orderWindow/setCurrentLtp', checkNullNan(state.scriptQuoteDetails.LTP) ? state.scriptQuoteDetails.LTP : '0.00')\n        },\n\n        setChartScripData (state, payload) {\n            state.chartScripData = payload,\n                localStorage.setItem('chartscrip', JSON.stringify(payload))\n        },\n\n        setCurrentQty (state, qty) {\n            state.quantity = qty\n        },\n\n        setCurrentPrice (state, price) {\n            state.price = price\n        },\n\n        setCurrentTrgPrice (state, trgPrice) {\n            state.triggerPrice = trgPrice\n        },\n\n        // make active method for nse bse radio switch\n        makeActive (state, exchange) {\n            if (exchange == \"NSE\" && !state.modifyOrder) {\n                checkNullNan(state.scriptQuoteDetails.LTP)\n                state.triggerPrice = state.ltp = state.price = checkNullNan(state.nsePriceRangeData[0].Ltp) ? state.nsePriceRangeData[0].Ltp : checkNullNan(state.scriptQuoteDetails.LTP) ? state.scriptQuoteDetails.LTP : '0.00';\n                checkNullNan(state.nsePriceRangeData[0].lowercircuitlimit.toString().replace(/,/g, \"\")) ? state.lowerRange = parseFloat(state.nsePriceRangeData[0].lowercircuitlimit.toString().replace(/,/g, \"\")) : '0.00'\n                checkNullNan(state.nsePriceRangeData[0].highercircuitlimit.toString().replace(/,/g, \"\")) ? state.upperRange = parseFloat(state.nsePriceRangeData[0].highercircuitlimit.toString().replace(/,/g, \"\")) : '0.00'\n                state.nsePriceRangeData[0].lotSize ? state.minlot = state.nsePriceRangeData[0].lotSize : state.minlot = 0\n                state.scriptQuoteDetails['nseOrBseTickSize'] = state.nsePriceRangeData[0].tickSize\n                this.commit('orderWindow/setTickPrice', state.scriptQuoteDetails)\n                this.dispatch('orderWindow/setCurrentLtp', checkNullNan(state.nsePriceRangeData[0].Ltp) ? state.nsePriceRangeData[0].Ltp : checkNullNan(state.scriptQuoteDetails.LTP) ? state.scriptQuoteDetails.LTP : '0.00')\n\n            } else if (!state.modifyOrder) {\n                state.triggerPrice = state.ltp = state.price = checkNullNan(state.bsePriceRangeData[0].Ltp) ? state.bsePriceRangeData[0].Ltp : checkNullNan(state.scriptQuoteDetails.LTP) ? state.scriptQuoteDetails.LTP : '0.00'\n                checkNullNan(state.bsePriceRangeData[0].lowercircuitlimit.toString().replace(/,/g, \"\")) ? state.lowerRange = parseFloat(state.bsePriceRangeData[0].lowercircuitlimit.toString().replace(/,/g, \"\")) : '0.00'\n                checkNullNan(state.bsePriceRangeData[0].highercircuitlimit.toString().replace(/,/g, \"\")) ? state.upperRange = parseFloat(state.bsePriceRangeData[0].highercircuitlimit.toString().replace(/,/g, \"\")) : '0.00'\n                state.bsePriceRangeData[0].lotSize ? state.minlot = state.bsePriceRangeData[0].lotSize : state.minlot = 0\n                state.scriptQuoteDetails['nseOrBseTickSize'] = state.bsePriceRangeData[0].tickSize\n                this.commit('orderWindow/setTickPrice', state.scriptQuoteDetails)\n                this.dispatch('orderWindow/setCurrentLtp', checkNullNan(state.bsePriceRangeData[0].Ltp) ? state.bsePriceRangeData[0].Ltp : checkNullNan(state.scriptQuoteDetails.LTP) ? state.scriptQuoteDetails.LTP : '0.00')\n            }\n            if (state.currentPage == 'holdings') {\n                state.orderType.toLowerCase() == 'buy' ? this.commit('orderWindow/setCurrentQty', state.minlot) : this.commit('orderWindow/setCurrentQty', state.currentOrder.SellableQty)\n            } else {\n                this.commit('orderWindow/setCurrentQty', state.orderData.page == 'orders' && state.orderData.type ? state.orderData.data.Qty : state.minlot)\n            }\n            this.commit('orderWindow/setNseSwitchPrice', checkNullNan(state.nsePriceRangeData[0].Ltp) ? state.nsePriceRangeData[0].Ltp : checkNullNan(state.scriptQuoteDetails.LTP) ? state.scriptQuoteDetails.LTP : '0.00')\n            this.commit('orderWindow/setBseSwitchPrice', checkNullNan(state.bsePriceRangeData[0].Ltp) ? state.bsePriceRangeData[0].Ltp : checkNullNan(state.scriptQuoteDetails.LTP) ? state.scriptQuoteDetails.LTP : '0.00')\n            state.currentExchange = exchange\n        },\n\n        setPriceType (state, payload) {\n            state.priceType = payload\n        },\n\n        setProdType (state, payload) {\n            state.prodType = payload\n        },\n\n        setOrderTab (state, payload) {\n            state.orderTab = payload\n        },\n\n        setValidityType (state, payload) {\n            state.validityType = payload\n        },\n\n        setWindowLoading (state, payload) {\n            state.windowLoading = payload;\n        },\n\n        // by Bharath \n        setPriceItems (state, payload) {\n            state.showPriceItems = payload\n        },\n\n        setProductItems (state, payload) {\n            state.showproductItems = payload\n        },\n\n        setIsNfo (state, payload) {\n            state.isNfo = payload\n        },\n\n        changeOrderType (state, payload) {\n            switch (payload) {\n                case \"regular\": //Regular Order // We have taken (regular = amo) except for validity\n                case \"amo\": {\n                    if (state.priceType == \"L\") {\n                        state.isPrice = true;\n                        state.isTrgPrice = false;\n                    } else if (state.priceType == \"MKT\") {\n                        state.isPrice = false;\n                        state.isTrgPrice = false;\n                    } else if (state.priceType == \"SL\") {\n                        state.isPrice = true;\n                        state.isTrgPrice = true;\n                    } else if (state.priceType == \"SL-M\") {\n                        state.isPrice = false;\n                        state.isTrgPrice = true;\n                    }\n                    break;\n                }\n                case \"cover\": {\n                    // Cover Order validation\n                    if (state.priceType == \"L\") {\n                        state.isPrice = true;\n                        state.isTrgPrice = true;\n                    } else if (state.priceType == \"MKT\") {\n                        state.isPrice = false;\n                        state.isTrgPrice = true;\n                    }\n                    break;\n                }\n                case \"bracket\": {\n                    // bracket Order validation\n                    if (state.priceType == \"L\") {\n                        state.isPrice = true;\n                        state.isTrgPrice = false;\n                    } else if (state.priceType == \"SL\") {\n                        state.isPrice = true;\n                        state.isTrgPrice = true;\n                    }\n                    break;\n                }\n            }\n            if (state.currentExchange == 'NFO' || state.currentExchange == 'BFO') {\n                this.commit('orderWindow/setIsDisclosedQty', false);\n            } else {\n                this.commit('orderWindow/setIsDisclosedQty', true);\n            }\n        },\n\n        setOrderData (state, payload) {\n            state.orderData = payload\n        },\n\n        setIsDisclosedQty (state, payload) {\n            state.isDisclosedQty = payload\n        },\n\n        setTickPrice (state, payload) {\n            // tickprice calculation \n            if (payload.nseOrBseTickSize) {\n                var tickSize = parseFloat(payload.nseOrBseTickSize)\n            } else {\n                var tickSize = parseFloat(payload.TickSize)\n            }\n            var multiplier = payload.Multiplier\n            var decimalPrevision = payload.DecimalPrecision\n            var tempTickSize = tickSize / (multiplier * Math.pow(10, decimalPrevision));\n            checkNullNan(tempTickSize) && tempTickSize != 0 ? state.tickPrice = tempTickSize : 1\n        },\n\n        setNseSwitchPrice (state, payload) {\n            state.nseSwitchPrice = payload\n        },\n\n        setBseSwitchPrice (state, payload) {\n            state.bseSwitchPrice = payload\n        },\n\n        setValidityItems (state, payload) {\n            state.validityItems = payload\n        },\n\n        setDisclosedQty (state, payload) {\n            state.disclosedQuantity = payload\n        },\n        steOrderType (state, payload) {\n            state.orderTypeList = payload\n        },\n\n        // set Available margin\n        setAvailableMargin (state, payload) {\n            state.availableMargin = payload\n        }\n    },\n    actions: {\n        // place order service\n        async placeOrder ({ state, commit, rootGetters }, payload) {\n            state.loading = true;\n            var symbolName = state.currentPage == 'mkWatch' ? state.currentOrder.symbol\n                : state.currentPage == 'orders' ? state.currentExchange == 'NSE' ? state.nsePriceRangeData[0].TradingSymbol : state.currentExchange == 'BSE' ? state.bsePriceRangeData[0].TradingSymbol : state.scriptQuoteDetails.TSymbl\n                    : state.currentPage == 'positions' ? state.currentExchange == 'NSE' ? state.nsePriceRangeData[0].TradingSymbol : state.currentExchange == 'BSE' ? state.bsePriceRangeData[0].TradingSymbol : state.currentOrder.Tsym\n                        : (state.currentPage == 'holdings' && state.currentExchange == 'NSE') ? state.currentOrder.Nsetsym\n                            : (state.currentPage == 'holdings' && state.currentExchange == 'BSE') ? state.currentOrder.Bsetsym : ''\n            let placeOrder = [{\n                active_status: null,\n                complexty: payload.complexity == 'bracket' ? 'bo' : payload.complexity == 'cover' ? 'co' : payload.complexity,\n                created_by: null,\n                created_on: null,\n                discqty: payload.orderTab == \"bracket\" ? payload.discQty.toString() : payload.discQty,\n                emsg: null,\n                exch: state.currentExchange,\n                id: null,\n                instrument: state.scriptQuoteDetails.UniqueKey,\n                link: null,\n                master_id: 0,\n                pCode: payload.complexity == 'cover' ? \"CO\" : payload.pcode,\n                prctyp: payload.priceType,\n                price: payload.price.toString(),\n                qty: payload.qty,\n                reponse: null,\n                ret: payload.validity ? payload.validity.toUpperCase() : \"DAY\",\n                salt: null,\n                stat: null,\n                stopLoss: parseInt(payload.stopLoss),\n                symbol_id: state.currentToken,\n                target: payload.stopLoss,\n                trading_symbol: symbolName,\n                trailing_stop_loss: parseInt(payload.trailStopLoss),\n                transtype: state.orderType,\n                trigPrice: payload.trgPrice,\n                updated_by: null,\n                updated_on: null,\n                userId: rootGetters['authtication/getUserId'],\n                userSessionID: rootGetters['authtication/getUserSession'],\n                userSettingDto: rootGetters['authtication/getUserSessionDto'],\n            }]\n            state.loading = false;\n            commit('setOrderWindow', false)\n            await service.executeOrder(placeOrder).then(response => {\n                if (response.data[0][\"emsg\"] == 'Input parameters are wrong') {\n                    errorHandling.toaster('Order not placed', 'danger', response.data[0][\"emsg\"], 3000)\n                } else if (response.data[0].stat == 'Not_Ok') {\n                    errorHandling.toaster('Order not placed', 'danger', response.data[0]['Emsg'], 3000)\n                } else {\n                    errorHandling.toaster(response.data[0][\"NOrdNo\"] ? response.data[0][\"NOrdNo\"] : response.data[0][\"nestOrderNumber\"], 'success', 'Order Placed Successfully', 3000)\n                }\n                commit('setOrderWindow', false)\n            }, (err) => {\n                errorHandling.errLog(err)\n            }).finally(() => { state.loading = false })\n        },\n\n        // placeBasketOrder service\n        async placeBasketOrder ({ state, commit, rootGetters }, payload) {\n            state.loading = true;\n            let placeOrder = []\n            payload.data.forEach(element => {\n                placeOrder.push({\n                    active_status: null,\n                    complexty: element.complexity,\n                    created_by: null,\n                    created_on: null,\n                    discqty: element.disclosedQuantity ? element.disclosedQuantity : 0,\n                    emsg: null,\n                    exch: element.exchange,\n                    id: null,\n                    instrument: element.instrument,\n                    link: null,\n                    master_id: 0,\n                    pCode: element.product ? element.product.toLowerCase() : element.product,\n                    prctyp: element.orderType,\n                    price: element.price ? element.price : 0,\n                    qty: element.quantity,\n                    reponse: null,\n                    ret: element.validity ? element.validity.toUpperCase() : \"DAY\",\n                    salt: null,\n                    stat: null,\n                    stopLoss: element.stoploss ? parseInt(element.stoploss) : 0,\n                    symbol_id: element.token,\n                    target: element.stoploss ? parseInt(element.stoploss) : 0,\n                    trading_symbol: element.tradingSymbol,\n                    trailing_stop_loss: element.trailingStoploss ? parseInt(element.trailingStoploss) : 0,\n                    transtype: element.transactionType ? element.transactionType.toLowerCase() : element.transactionType,\n                    trigPrice: element.triggerPrice ? element.triggerPrice : 0,\n                    updated_by: null,\n                    updated_on: null,\n                    userId: rootGetters['authtication/getUserId'],\n                    userSessionID: rootGetters['authtication/getUserSession'],\n                    userSettingDto: rootGetters['authtication/getUserSessionDto'],\n                })\n            })\n            console.log(placeOrder);\n            state.loading = false;\n            commit('setOrderWindow', false)\n            await service.executeOrder(placeOrder).then(response => {\n                if (response.data[0][\"emsg\"] == 'Input parameters are wrong') {\n                    response.data.forEach(element => {\n                        errorHandling.toaster('Order not placed', 'danger', element[\"emsg\"], 3000)\n                    })\n                } else if (response.data[0].stat == 'Not_Ok') {\n                    response.data.forEach(element => {\n                        errorHandling.toaster('Order not placed', 'danger', element['Emsg'], 3000)\n                    })\n                } else {\n                    response.data.forEach(element => {\n                        errorHandling.toaster(element[\"NOrdNo\"] ? element[\"NOrdNo\"] : element[\"nestOrderNumber\"], 'success', 'Order Placed Successfully', 3000)\n                    })\n                    router.push('/orders')\n                    localStorage.setItem('basketOrder', false)\n                }\n                commit('setOrderWindow', false)\n            }, (err) => {\n                errorHandling.errLog(err)\n            }).finally(() => { state.loading = false })\n        },\n\n        // Modify order\n        async modifyOrder ({ state, commit, rootGetters }, payload) {\n            let placeOrder = {\n                account_id: state.currentOrder[\"accountId\"],\n                discqty: payload.orderTab == \"bracket\" ? payload.discQty.toString() : payload.discQty,\n                exch: state.currentOrder[\"Exchange\"],\n                exchSeg: state.currentOrder[\"Exseg\"],\n                filledQuantity: state.currentOrder[\"Fillshares\"],\n                mktPro: state.currentOrder[\"Mktpro\"],\n                nestOrderNumber: state.currentOrder[\"Nstordno\"],\n                pCode: state.currentOrder[\"Pcode\"] == \"MIS\" ? \"mis\" : state.currentOrder[\"Pcode\"],\n                prctyp: payload.priceType,\n                s_prdt_ali: rootGetters['authtication/getUserSessionDto'].s_prdt_ali,\n                price: payload.price.toString(),\n                qty: payload.qty,\n                scripToken: state.currentOrder[\"token\"],\n                symbol_id: state.currentOrder[\"token\"],\n                trading_symbol: state.currentOrder[\"Trsym\"],\n                transtype: state.orderType,\n                trigPrice: payload.trgPrice,\n                userId: rootGetters['authtication/getUserId'],\n                validity: payload.validity ? payload.validity.toUpperCase() : \"DAY\",\n            }\n            state.loading = true;\n            await service.modifyOrder(placeOrder).then(response => {\n                if (response.status == 200 && response.data.stat == \"Ok\") {\n                    errorHandling.toaster('Modified Successfully', 'success', 'check order book for further details.', 3000)\n                } else {\n                    errorHandling.toaster('Order not modified', 'danger', response.data.Emsg, 3000)\n                }\n                commit('setOrderWindow', false)\n            }, (err) => {\n                errorHandling.errLog(err)\n            }).finally(() => { state.loading = false; })\n        },\n\n        // get New Price range Service\n        async getNewPriceRange ({ state, commit, rootGetters }, payload) {\n            if (state.currentPage == 'holdings') {\n                var exch = state.currentOrder.ExchSeg1 && state.currentOrder.Nsetsym != \"0\" ? state.currentOrder.ExchSeg1 : state.currentOrder.ExchSeg2\n                var token = exch == \"NSE\" ? state.currentOrder.Token1 : state.currentOrder.Token2\n            } else if (state.currentPage == \"analytics\") {\n                var exch = payload.exch\n                var token = payload.exch == 'NSE' ? state.currentOrder.nseToken : state.currentOrder.token\n            } else if (state.currentPage == \"basket\") {\n                var exch = state.currentOrder.exchange\n                var token = state.currentOrder.token\n            } else {\n                var exch = state.currentPage == 'mkWatch' ? state.currentOrder.ex : state.currentOrder.Exchange\n                var token = state.currentPage == 'positions' ? state.currentOrder.Token : state.currentOrder.token\n            }\n            let json = {\n                \"exch\": exch,\n                \"symbol\": token ? token : state.currentOrder.Symbol,\n                'userId': rootGetters['authtication/getUserId'],\n                'userSessionID': rootGetters['authtication/getUserSession']\n            }\n            await service.getNewPriceRange(json).then(response => {\n                state.removeCss == false ? commit('setRemoveCss', false) : ''\n                if (response.data.emsg == \"Session Expired\" || response.data == []) {\n                    errorHandling.sessionExpire();\n                } else if (response.status == 200) {\n                    commit('setPriceRangeDetails', response.data)\n                }\n            }, (err) => {\n                errorHandling.errLog(err)\n            }).finally(() => { })\n        },\n\n        // scrip quote details\n        async getScripQuoteDetails ({ state, commit, dispatch, rootGetters }, payload) {\n            if (payload.page) {\n                var exch = payload.value.ex\n                var token = payload.value.token\n            } else {\n                if (state.currentPage == 'holdings') {\n                    var exch = state.currentOrder.ExchSeg1 && state.currentOrder.Nsetsym != \"0\" ? state.currentOrder.ExchSeg1 : state.currentOrder.ExchSeg2\n                    var token = exch == \"NSE\" ? state.currentOrder.Token1 : state.currentOrder.Token2\n                } else if (state.currentPage == \"analytics\") {\n                    var exch = payload.exch\n                    var token = payload.exch == 'NSE' ? state.currentOrder.nseToken : state.currentOrder.token\n                } else if (state.currentPage == \"basket\") {\n                    var exch = state.currentOrder.exchange\n                    var token = state.currentOrder.token\n                } else {\n                    var exch = state.currentPage == 'mkWatch' ? state.currentOrder.ex : state.currentOrder.Exchange\n                    var token = state.currentPage == 'positions' ? state.currentOrder.Token : state.currentOrder.token\n                }\n            }\n            let json = {\n                \"exch\": exch,\n                \"symbol\": token ? token : state.currentOrder.Symbol,\n                'userId': rootGetters['authtication/getUserId'],\n                'userSessionID': rootGetters['authtication/getUserSession']\n            }\n            await service.getScripQuoteDetails(json).then(response => {\n                if (response.data.emsg == \"Session Expired\") {\n                    errorHandling.sessionExpire();\n                } else if (response.status == 200) {\n\n                    if (payload.page == 'chart') {\n                        commit('setChartScripData', response.data)\n                    } else {\n                        commit('setScriptQuoteDetails', response.data)\n                        var tempData = {\n                            data: [],\n                            where: 'orderwindow',\n                            subscribe: json.exch + '|' + json.symbol + '#'\n                        }\n                        // dispatch('wsConnection/websocketSubscription', tempData, { root: true })\n                    }\n                } else if (response.data.emsg == \"Session Expired\") {\n                    errorHandling.sessionExpire();\n                }\n            }, (err) => {\n                errorHandling.errLog(err)\n            }).finally(() => { })\n        },\n\n        async setDefaultValues ({ state, commit }, scripData) {\n            if (state.currentPage == 'holdings') {\n                state.orderType.toLowerCase() == 'sell' ? state.minlot = state.currentOrder.SellableQty : ''\n            }\n            // minlot for quantity\n            if (state.currentOrder[\"Instname\"] == \"FUTCOM\" || state.currentOrder[\"InstName\"] == \"FUTCOM\" || state.currentOrder[\"InstName\"] == \"OPTFUT\" || state.currentOrder[\"Instrument\"] == \"FUTCOM\" || state.currentOrder[\"Instname\"] == \"OPTFUT\" || state.currentOrder[\"Instrument\"] == \"OPTFUT\") {\n                scripData.BodLotQty ? state.minlot = parseFloat(scripData.BodLotQty) / parseFloat(scripData.BodLotQty) : state.minlot = 0\n            } else {\n                scripData.BodLotQty ? state.minlot = parseFloat(scripData.BodLotQty) : state.minlot = 0\n            }\n\n            // ltp for Price\n            checkNullNan(scripData.LTP) ? state.ltp = scripData.LTP : state.ltp = '0.00'\n            state.currentExchange == \"CDS\" ? parseFloat(state.ltp).toFixed(4) : parseFloat(state.ltp).toFixed(2)\n\n            scripData ? commit('setTickPrice', scripData) : ''\n            commit('setCurrentQty', state.orderData.page == 'orders' && state.modifyOrder && state.orderData.type ? state.orderData.data.Qty : state.minlot)\n            commit('setCurrentPrice', state.ltp)\n            commit('setCurrentTrgPrice', state.ltp)\n            commit(\"setWindowLoading\", false)\n            if (state.modifyOrder) {\n                commit('setCurrentPrice', state.currentOrder.Prc == 0 ? state.ltp : checkNullNan(state.currentOrder.Prc) ? state.currentOrder.Prc : '0.00')\n                commit('setCurrentTrgPrice', checkNullNan(state.currentOrder.Trgprc) ? parseFloat(state.currentOrder.Trgprc) != 0 ? state.currentOrder.Trgprc : state.ltp : '0.00')\n                commit('setDisclosedQty', checkNullNan(state.currentOrder.Dscqty) ? state.currentOrder.Dscqty : 0)\n            }\n            setQtyFocus()\n        },\n\n        setInitialValues ({ state, commit, dispatch }, payload) {\n\n            var InstName = payload.page == \"mkWatch\" ? \"Instrument\" : payload.page == \"positions\" ? \"Instname\" : payload.page == \"orders\" ? \"InstName\" : ''\n            var Exchange = payload.page == \"mkWatch\" || payload.page == \"positions\" || payload.page == \"orders\" ? \"Exchange\" : ''\n            if (payload.page == \"holdings\") {\n                commit(\"setProductItems\", state.eqProductItems)\n                commit(\"setPriceItems\", state.allPriceItems)\n                commit(\"setIsNfo\", true)\n                !!state.priceType ? '' : commit('setPriceType', 'MKT')\n                !!state.prodType ? '' : commit('setProdType', 'CNC')\n                !!state.orderTab ? '' : commit(\"setOrderTab\", 0)\n            }\n            // else if (payload.page == \"basket\"){\n\n            // }\n            else {\n                payload.data[InstName] == \"OPTIDX\" || payload.data[InstName] == 'OPTSTK' ? commit(\"setPriceItems\", state.postionPriceItems) : commit(\"setPriceItems\", state.allPriceItems);\n                payload.data[InstName] == \"OPTIDX\" || payload.data[InstName] == 'OPTSTK' ? commit(\"setIsNfo\", false) : commit(\"setIsNfo\", true);\n                payload.data[Exchange] == \"NSE\" || payload.data[Exchange] == 'BSE' ? commit(\"setProductItems\", state.eqProductItems) : commit(\"setProductItems\", state.allProductItems);\n\n                payload.page == \"mkWatch\" && !!state.priceType ? '' : payload.page == \"mkWatch\" ? commit('setPriceType', 'L') : ''\n                payload.page == \"mkWatch\" && !!state.prodType ? '' : payload.page == \"mkWatch\" ? commit('setProdType', 'MIS') : ''\n\n                payload.page == \"positions\" && !!state.priceType ? '' : payload.page == \"positions\" ? commit('setPriceType', 'MKT') : ''\n                payload.page == \"positions\" && !!state.prodType ? '' : payload.page == \"positions\" ? commit('setProdType', payload.data.Pcode) : ''\n\n                payload.page == \"orders\" && !!state.priceType ? '' : payload.page == \"orders\" && payload.type ? commit('setPriceType', payload.data.Prctype) : payload.page == \"orders\" && !payload.type ? commit('setPriceType', 'L') : ''\n                payload.page == \"orders\" && !!state.prodType ? '' : payload.page == \"orders\" && payload.type ? commit('setProdType', payload.data.Pcode) : payload.page == \"orders\" && !payload.type ? commit('setProdType', 'MIS') : ''\n\n                if (payload.page == \"orders\" && payload.type) {\n                    commit(\"setOrderTab\", payload.data.ordergenerationtype.toLowerCase() == 'amo' ? 3 : payload.data.ordergenerationtype.toString() == '--' && payload.data.Pcode == 'CO' ? 1 : payload.data.ordergenerationtype.toString() == '--' && payload.data.Pcode == 'BO' ? 2 : 0)\n                } else {\n                    !!state.orderTab ? '' : commit(\"setOrderTab\", 0)\n                }\n                if (state.modifyOrder) {\n                    commit('setValidityType', payload.data.Validity)\n                }\n            }\n            dispatch('common/setOrderTypeCommon', payload, { root: true })\n        },\n\n        setOrderPreference ({ state, commit }, payload) {\n            commit('setOrderData', payload)\n            // market watch orderWindow preference set via localStoraged\n            if (localStorage.getItem(\"orderPreference\") && (payload.page == \"mkWatch\" || payload.page == \"orders\" && !state.modifyOrder)) {\n                var preference = JSON.parse(localStorage.getItem(\"orderPreference\"));\n                var prodType = (state.currentExchange != \"BSE\" || state.currentExchange != \"NSE\") && preference[\"product\"] == 'NRML' ? 'NRML' : preference[\"product\"];\n\n                // var orderTab = preference[\"variety\"] == 'regular' ? 0 : preference[\"variety\"] == 'cover' ? 1 : preference[\"variety\"] == 'bracket' ? 2 : preference[\"variety\"] == 'amo' ? 3 : ''\n                preference[\"variety\"] == 'regular' ? preference[\"variety\"] = 'Regular' : preference[\"variety\"] == 'cover' ? preference['variety'] = 'Cover' : preference[\"variety\"] == 'bracket' ? preference[\"variety\"] = 'Bracket' : preference[\"variety\"] == 'amo' ? preference[\"variety\"] = 'AMO' : ''\n                var orderTab = state.orderTypeList.indexOf(preference[\"variety\"])\n                var priceType = preference[\"orderType\"];\n                var validity = preference[\"validity\"];\n                commit(\"setOrderTab\", orderTab)\n                commit('setProdType', prodType)\n                commit('setPriceType', priceType)\n                commit('setValidityType', validity)\n            } else if (payload.page == \"holdings\") {\n                commit(\"setOrderTab\", 0)\n                commit('setProdType', 'CNC')\n                commit('setPriceType', 'MKT')\n                commit('setValidityType', 'DAY')\n            } else if (payload.page == \"positions\") {\n                commit(\"setOrderTab\", 0)\n                commit('setProdType', payload.data.Pcode)\n                commit('setPriceType', 'MKT')\n                commit('setValidityType', 'DAY')\n            }\n        },\n\n        setCurrentLtp ({ state }, payload) {\n            state.currentLtp = state.currentExchange == 'CDS' || state.currentExchange == 'BCD' ? parseFloat(payload).toFixed(4) : parseFloat(payload).toFixed(2)\n        },\n\n        // check margin availble \n        async getMarginAvailable ({ state, commit }, payload) {\n            commit(\"setAvailableMargin\", '0.00')\n            await service.checkMargin(payload).then(response => {\n                if (response.status == \"200\") {\n                    commit(\"setAvailableMargin\", response.data['Order Margin'])\n                }\n            }).catch(error => { })\n        }\n    },\n\n    getters: {\n        getPriceType (state) {\n            return state.priceType\n        },\n        getProdType (state) {\n            return state.prodType\n        },\n        getOrderTab (state) {\n            return state.orderTab\n        },\n        getValidityType (state) {\n            return state.validityType\n        },\n        getTriggerPrice (state) {\n            return state.triggerPrice\n        },\n        getCurrentLtp: state => {\n            return state.currentLtp\n        },\n        getCurrentToken: state => {\n            return state.currentToken\n        },\n        getAvailableMargin: state => {\n            return state.availableMargin\n        }\n    }\n}\n\nexport default orderWindow"]}]}