{"remainingRequest":"/home/stoneage/vueJs projects/trustLineTradeVuex/node_modules/babel-loader/lib/index.js!/home/stoneage/vueJs projects/trustLineTradeVuex/src/store/modules/WebsocketTr.js","dependencies":[{"path":"/home/stoneage/vueJs projects/trustLineTradeVuex/src/store/modules/WebsocketTr.js","mtime":1655307156181},{"path":"/home/stoneage/vueJs projects/trustLineTradeVuex/babel.config.js","mtime":1649344700943},{"path":"/home/stoneage/vueJs projects/trustLineTradeVuex/node_modules/cache-loader/dist/cjs.js","mtime":1655272566310},{"path":"/home/stoneage/vueJs projects/trustLineTradeVuex/node_modules/babel-loader/lib/index.js","mtime":1655272566942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3N0b25lYWdlL3Z1ZUpzIHByb2plY3RzL3RydXN0TGluZVRyYWRlVnVleC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfdG9BcnJheSBmcm9tICIvaG9tZS9zdG9uZWFnZS92dWVKcyBwcm9qZWN0cy90cnVzdExpbmVUcmFkZVZ1ZXgvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQXJyYXkuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMuanMiOwppbXBvcnQgKiBhcyBwYWtvIGZyb20gJy4uLy4uL2Fzc2V0cy9wYWtvJzsKaW1wb3J0IHJvdXRlciBmcm9tICIuLi8uLi9yb3V0ZXIiOwp2YXIgdXJsID0gJ3dzczovL3Jlc3QuYWxpY2VibHVlb25saW5lLmNvbS9OZXN0SHRtbDVNb2JpbGVUZWNoL3NvY2tldC9zdHJlYW0nOwp2YXIgc29ja2V0VHI7CnZhciB3c0Nvbm5lY3Rpb25UciA9IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICB3c0RhdGE6IFtdLAogICAgY29ubmVjdGlvblN0YXR1czogZmFsc2UsCiAgICBwcmV2aW91c1N1YnNyaXB0aW9uOiAnJywKICAgIHByZURlcHRoU3Vic3JpcHRpb246ICcnLAogICAgcHJlU2NyaXBQYXlsb2FkOiAnJywKICAgIHByZURlcHRoUGF5bG9hZDogJycsCiAgICBpc1JlY29ubmVjdDogZmFsc2UsCiAgICBpc0xvZ291dDogZmFsc2UsCiAgICBjb3VudGVyOiAwCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldFByZXZpb3VzU3Vic3JpcHRpb246IGZ1bmN0aW9uIHNldFByZXZpb3VzU3Vic3JpcHRpb24oc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUucHJldmlvdXNTdWJzcmlwdGlvbiA9IHBheWxvYWQ7CiAgICB9LAogICAgc2V0Q29ubmVjdGlvblN0YXR1czogZnVuY3Rpb24gc2V0Q29ubmVjdGlvblN0YXR1cyhzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5jb25uZWN0aW9uU3RhdHVzID0gcGF5bG9hZDsKICAgIH0sCiAgICBzZXRQcmVEZXB0aFN1YnNyaXB0aW9uOiBmdW5jdGlvbiBzZXRQcmVEZXB0aFN1YnNyaXB0aW9uKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLnByZURlcHRoU3Vic3JpcHRpb24gPSBwYXlsb2FkOwogICAgfSwKICAgIHNldFByZVBheWxvYWQ6IGZ1bmN0aW9uIHNldFByZVBheWxvYWQoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUucHJlU2NyaXBQYXlsb2FkID0gcGF5bG9hZDsKICAgIH0sCiAgICBzZXRQcmVEZXB0aFBheWxvYWQ6IGZ1bmN0aW9uIHNldFByZURlcHRoUGF5bG9hZChzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5wcmVEZXB0aFBheWxvYWQgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldFJlY29ubmVjdDogZnVuY3Rpb24gc2V0UmVjb25uZWN0KHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLmlzUmVjb25uZWN0ID0gcGF5bG9hZDsKICAgIH0sCiAgICBTZXRJc0xvZ291dDogZnVuY3Rpb24gU2V0SXNMb2dvdXQoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUuaXNMb2dvdXQgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldENvdW50ZXI6IGZ1bmN0aW9uIHNldENvdW50ZXIoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUuY291bnRlciA9IHBheWxvYWQ7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBjb25uZWN0OiBmdW5jdGlvbiBjb25uZWN0KF9yZWYpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSwKICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0LAogICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoLAogICAgICAgICAgcm9vdEdldHRlcnMgPSBfcmVmLnJvb3RHZXR0ZXJzLAogICAgICAgICAgcm9vdFN0YXRlID0gX3JlZi5yb290U3RhdGU7CiAgICAgIHNvY2tldFRyID0gbmV3IFdlYlNvY2tldCh1cmwpOwoKICAgICAgc29ja2V0VHIub25vcGVuID0gZnVuY3Rpb24gKCkgewogICAgICAgIGRpc3BhdGNoKCJjb25uZWN0aW9uUmVxdWVzdCIpOwogICAgICB9OwoKICAgICAgc29ja2V0VHIub25tZXNzYWdlID0gZnVuY3Rpb24gKG1zZykgewogICAgICAgIHZhciBfU3RyaW5nJGZyb21DaGFyQ29kZSQsIF9TdHJpbmckZnJvbUNoYXJDb2RlJDI7CgogICAgICAgIHZhciBkZWNvZGVkID0gd2luZG93LmF0b2IobXNnLmRhdGEpOwogICAgICAgIHZhciBkYXRhID0gcGFrbyA/IHBha28uaW5mbGF0ZShkZWNvZGVkKSA6IFtdOwogICAgICAgIHZhciBuZXdhcnJheSA9IChfU3RyaW5nJGZyb21DaGFyQ29kZSQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgZGF0YSksIF9TdHJpbmckZnJvbUNoYXJDb2RlJDIgPSBfdG9BcnJheShfU3RyaW5nJGZyb21DaGFyQ29kZSQpLCBfU3RyaW5nJGZyb21DaGFyQ29kZSQpOwogICAgICAgIHZhciB3c0NoYW5nZSA9IEpTT04ucGFyc2UobmV3YXJyYXkpOwogICAgICAgIHZhciBpc0hhdmVDbmMgPSBmYWxzZTsKCiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPD0gd3NDaGFuZ2UubGVuZ3RoIC0gMTsgaisrKSB7CiAgICAgICAgICB2YXIganNvblJlc3BvbnNlID0gd3NDaGFuZ2Vbal07CiAgICAgICAgICB2YXIgbmV4dFJlc3BvbnNlID0gd3NDaGFuZ2UubGVuZ3RoIC0gMSA9PSBqID8gd3NDaGFuZ2Vbal0gOiB3c0NoYW5nZVtqICsgMV07CgogICAgICAgICAgaWYgKGpzb25SZXNwb25zZVsibXNnIl0gPT0gImNvbm5lY3RlZCIpIHsKICAgICAgICAgICAgY29tbWl0KCdzZXRDb25uZWN0aW9uU3RhdHVzJywgdHJ1ZSk7CiAgICAgICAgICAgIGRpc3BhdGNoKCdzZW5kSGVhcnRCZWF0JywgIm9zIik7CiAgICAgICAgICB9IC8vIGlmKHJvb3RTdGF0ZS5vcmRlci5jYW5jZWxNdWx0aXBsZSA+IDApewogICAgICAgICAgLy8gaWYoKGpzb25SZXNwb25zZVsibmFtZSJdID09ICJvc2YiICYmICFqc29uUmVzcG9uc2VbJ29zJ10gJiYgIWpzb25SZXNwb25zZVsnbm9uJ10pIHx8IChqc29uUmVzcG9uc2VbIm5hbWUiXSA9PSAib3NmIiAmJiBqc29uUmVzcG9uc2VbJ29zJ10gJiYgbmV4dFJlc3BvbnNlWydub24nXSAhPSBqc29uUmVzcG9uc2VbJ25vbiddKSl7CiAgICAgICAgICAvLyAgICAgY29tbWl0KCdzZXRDb3VudGVyJyAsIHN0YXRlLmNvdW50ZXIgKyAxKQogICAgICAgICAgLy8gfQogICAgICAgICAgLy8gfQoKCiAgICAgICAgICBpZiAocm91dGVyLmN1cnJlbnRSb3V0ZS5wYXRoID09ICcvaG9sZGluZ3MnKSB7CiAgICAgICAgICAgIGpzb25SZXNwb25zZVsibmFtZSJdID09ICJvc2YiICYmIGpzb25SZXNwb25zZVsidHQiXS50b1VwcGVyQ2FzZSgpID09ICdTJyAmJiBqc29uUmVzcG9uc2VbInByb2QiXS50b1VwcGVyQ2FzZSgpID09ICdDTkMnICYmICFpc0hhdmVDbmMgPyBpc0hhdmVDbmMgPSB0cnVlIDogJyc7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgb3JkZXJTdGF0dXMgPSB3c0NoYW5nZVt3c0NoYW5nZS5sZW5ndGggLSAxXTsKCiAgICAgICAgaWYgKG9yZGVyU3RhdHVzWyJuYW1lIl0gPT0gIm9zZiIpIHsKICAgICAgICAgIGlmIChyb3V0ZXIuY3VycmVudFJvdXRlLnBhdGggPT0gJy9vcmRlcnMnKSB7CiAgICAgICAgICAgIGRpc3BhdGNoKCdvcmRlci9nZXRPcmRlckxpc3QnLCAnJywgewogICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IC8vIGlmKHJvdXRlci5jdXJyZW50Um91dGUucGF0aCA9PSAnL29yZGVycycgJiYgKHN0YXRlLmNvdW50ZXIgPT0gcm9vdFN0YXRlLm9yZGVyLmNhbmNlbE11bHRpcGxlIHx8IHJvb3RTdGF0ZS5vcmRlci5jYW5jZWxNdWx0aXBsZSA9PSAwICkpewogICAgICAgICAgLy8gY29tbWl0KCdzZXRDb3VudGVyJyAsIDApCiAgICAgICAgICAvLyAgICAgZGlzcGF0Y2goJ29yZGVyL2dldE9yZGVyTGlzdCcgLCAnJyAsIHsgcm9vdDogdHJ1ZSB9KQogICAgICAgICAgLy8gfQoKCiAgICAgICAgICBpZiAocm91dGVyLmN1cnJlbnRSb3V0ZS5wYXRoID09ICcvcG9zaXRpb25zJykgewogICAgICAgICAgICBkaXNwYXRjaCgncG9zaXRpb24vZ2V0UG9zaXRpb25zJywgJycsIHsKICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChyb3V0ZXIuY3VycmVudFJvdXRlLnBhdGggPT0gJy9ob2xkaW5ncycgJiYgaXNIYXZlQ25jKSB7CiAgICAgICAgICAgIGRpc3BhdGNoKCdob2xkaW5ncy9nZXRIb2xkaW5ncycsICcnLCB7CiAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICBzb2NrZXRUci5vbmVycm9yID0gZnVuY3Rpb24gKGVycikgewogICAgICAgIHNvY2tldFRyLm9uY2xvc2UoKTsKICAgICAgfTsKCiAgICAgIHNvY2tldFRyLm9uY2xvc2UgPSBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgc29ja2V0VHIuY2xvc2UoKTsKCiAgICAgICAgaWYgKCFzdGF0ZS5pc0xvZ291dCAmJiBzdGF0ZS5jb25uZWN0aW9uU3RhdHVzKSB7CiAgICAgICAgICBjb21taXQoJ3NldENvbm5lY3Rpb25TdGF0dXMnLCBmYWxzZSk7CiAgICAgICAgICBkaXNwYXRjaCgnY29ubmVjdCcpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0sCiAgICBjb25uZWN0aW9uUmVxdWVzdDogZnVuY3Rpb24gY29ubmVjdGlvblJlcXVlc3QoX3JlZjIpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZGlzcGF0Y2gsIHJvb3RHZXR0ZXJzLCB0b2tlbiwgdXNlcklkLCBpbml0Q29uOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjIuZGlzcGF0Y2gsIHJvb3RHZXR0ZXJzID0gX3JlZjIucm9vdEdldHRlcnM7CiAgICAgICAgICAgICAgICB0b2tlbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oIndlYnNvY2tldElkIikpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gcm9vdEdldHRlcnNbJ2F1dGh0aWNhdGlvbi9nZXRVc2VySWQnXTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgdXNlcklkID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGluaXRDb24gPSB7CiAgICAgICAgICAgICAgICAgIGNoYW5uZWw6ICIiLAogICAgICAgICAgICAgICAgICB0YXNrOiAiY24iLAogICAgICAgICAgICAgICAgICBhY2N0aWQ6IHVzZXJJZCwKICAgICAgICAgICAgICAgICAgdXNlcjogdXNlcklkLAogICAgICAgICAgICAgICAgICB0b2tlbjogdG9rZW4KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgic2VuZCIsIEpTT04uc3RyaW5naWZ5KGluaXRDb24pKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNlbmQ6IGZ1bmN0aW9uIHNlbmQoX3JlZjMsIG1zZykgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgc3RhdGUsIGRpc3BhdGNoOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWYzLnN0YXRlLCBkaXNwYXRjaCA9IF9yZWYzLmRpc3BhdGNoOwoKICAgICAgICAgICAgICAgIGlmICghIXNvY2tldFRyLnJlYWR5U3RhdGUgJiYgc29ja2V0VHIucmVhZHlTdGF0ZSA9PSAxKSB7CiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgc29ja2V0VHIuc2VuZChtc2cpOwogICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoISFzb2NrZXRUci5yZWFkeVN0YXRlICYmIHNvY2tldFRyLnJlYWR5U3RhdGUgPT0gMCkgewogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBzb2NrZXRUci5zZW5kKG1zZyk7CiAgICAgICAgICAgICAgICAgIH0sIDkwMCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNlbmRIZWFydEJlYXQ6IGZ1bmN0aW9uIHNlbmRIZWFydEJlYXQoX3JlZjQsIHBheWxvYWQpIHsKICAgICAgdmFyIGRpc3BhdGNoID0gX3JlZjQuZGlzcGF0Y2gsCiAgICAgICAgICByb290R2V0dGVycyA9IF9yZWY0LnJvb3RHZXR0ZXJzOwogICAgICB2YXIgdG9rZW4gPSByb290R2V0dGVyc1snYXV0aHRpY2F0aW9uL2dldFdlYnNvY2tldElkJ107CiAgICAgIHZhciB1c2VySWQgPSByb290R2V0dGVyc1snYXV0aHRpY2F0aW9uL2dldFVzZXJJZCddOyAvLyB2YXIgd3NTdGF0ZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oIndzQ29ubmVjdGlvblN0YXRlIikpOwoKICAgICAgaWYgKCEhdXNlcklkKSB7CiAgICAgICAgLy8gaWYgKCEhd3NTdGF0ZSkgewogICAgICAgIHZhciBoZWFydEJlYXQ7CiAgICAgICAgdmFyIGhiID0gewogICAgICAgICAgY2hhbm5lbDogIiIsCiAgICAgICAgICB0YXNrOiBwYXlsb2FkLAogICAgICAgICAgYWNjdGlkOiB1c2VySWQsCiAgICAgICAgICB1c2VyOiB1c2VySWQsCiAgICAgICAgICB0b2tlbjogdG9rZW4KICAgICAgICB9OwogICAgICAgIGhlYXJ0QmVhdCA9IEpTT04uc3RyaW5naWZ5KGhiKTsKICAgICAgICBkaXNwYXRjaCgnc2VuZCcsIGhlYXJ0QmVhdCk7IC8vIH0KICAgICAgfQogICAgfSwKICAgIHdlYnNvY2tldENsb3NlOiBmdW5jdGlvbiB3ZWJzb2NrZXRDbG9zZShfcmVmNSwgcGF5bG9hZCkgewogICAgICB2YXIgc3RhdGUgPSBfcmVmNS5zdGF0ZSwKICAgICAgICAgIGNvbW1pdCA9IF9yZWY1LmNvbW1pdCwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjUuZGlzcGF0Y2gsCiAgICAgICAgICByb290R2V0dGVycyA9IF9yZWY1LnJvb3RHZXR0ZXJzOwogICAgICBzb2NrZXRUciA/IHNvY2tldFRyLmNsb3NlKCkgOiAnJzsKICAgIH0KICB9Cn07CmV4cG9ydCBkZWZhdWx0IHdzQ29ubmVjdGlvblRyOw=="},{"version":3,"sources":["/home/stoneage/vueJs projects/trustLineTradeVuex/src/store/modules/WebsocketTr.js"],"names":["pako","router","url","socketTr","wsConnectionTr","namespaced","state","wsData","connectionStatus","previousSubsription","preDepthSubsription","preScripPayload","preDepthPayload","isReconnect","isLogout","counter","mutations","setPreviousSubsription","payload","setConnectionStatus","setPreDepthSubsription","setPrePayload","setPreDepthPayload","setReconnect","SetIsLogout","setCounter","actions","connect","commit","dispatch","rootGetters","rootState","WebSocket","onopen","onmessage","msg","decoded","window","atob","data","inflate","newarray","String","fromCharCode","apply","wsChange","JSON","parse","isHaveCnc","j","length","jsonResponse","nextResponse","currentRoute","path","toUpperCase","orderStatus","root","onerror","err","onclose","close","connectionRequest","token","localStorage","getItem","userId","initCon","channel","task","acctid","user","stringify","send","readyState","console","error","setTimeout","sendHeartBeat","heartBeat","hb","websocketClose"],"mappings":"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","sourcesContent":["import * as pako from '../../assets/pako'\nimport router from \"../../router\";\n\nconst url =  'wss://rest.aliceblueonline.com/NestHtml5MobileTech/socket/stream'\n\n\nlet socketTr;\n\nconst wsConnectionTr = {\n    namespaced: true,\n\n    state: {\n        wsData: [],\n        connectionStatus: false,\n        previousSubsription: '',\n        preDepthSubsription: '',\n        preScripPayload: '',\n        preDepthPayload: '',\n        isReconnect: false,\n        isLogout: false,\n        counter: 0\n    },\n\n    mutations: {\n        setPreviousSubsription (state, payload) {\n            state.previousSubsription = payload;\n        },\n        setConnectionStatus (state, payload) {\n            state.connectionStatus = payload\n        },\n        setPreDepthSubsription (state, payload) {\n            state.preDepthSubsription = payload\n        },\n        setPrePayload (state, payload) {\n            state.preScripPayload = payload\n        },\n        setPreDepthPayload (state, payload) {\n            state.preDepthPayload = payload\n        },\n        setReconnect (state, payload) {\n            state.isReconnect = payload\n        },\n        SetIsLogout (state, payload) {\n            state.isLogout = payload\n        },\n        setCounter(state, payload){\n            state.counter = payload\n        }\n    },\n\n    actions: {\n        connect ({ state, commit, dispatch, rootGetters, rootState }) {\n            socketTr = new WebSocket(url)\n            socketTr.onopen = function () {\n                dispatch(\"connectionRequest\");\n            }\n            socketTr.onmessage = function (msg) {\n                var decoded = window.atob(msg.data);\n                var data = pako ? pako.inflate(decoded) : [];\n                var newarray = ([] = String.fromCharCode.apply(String, data));\n                var wsChange = JSON.parse(newarray);\n                var isHaveCnc = false\n                for (var j = 0; j <= wsChange.length - 1; j++) {\n                    var jsonResponse = wsChange[j];\n                    var nextResponse = wsChange.length - 1 == j ? wsChange[j] : wsChange[j+1];\n                    if (jsonResponse[\"msg\"] == \"connected\") { \n                        commit('setConnectionStatus', true)\n                        dispatch('sendHeartBeat', \"os\")\n                    }\n                    \n                    // if(rootState.order.cancelMultiple > 0){\n                    // if((jsonResponse[\"name\"] == \"osf\" && !jsonResponse['os'] && !jsonResponse['non']) || (jsonResponse[\"name\"] == \"osf\" && jsonResponse['os'] && nextResponse['non'] != jsonResponse['non'])){\n                    //     commit('setCounter' , state.counter + 1)\n                    // }\n                // }\n                if(router.currentRoute.path == '/holdings'){\n                jsonResponse[\"name\"] == \"osf\" && jsonResponse[\"tt\"].toUpperCase() == 'S' && jsonResponse[\"prod\"].toUpperCase() == 'CNC' && !isHaveCnc ? isHaveCnc = true : ''\n                }\n                    \n                }\n                var orderStatus = wsChange[wsChange.length - 1]\n                if (orderStatus[\"name\"] == \"osf\") {\n                    if(router.currentRoute.path == '/orders'){\n                        dispatch('order/getOrderList' , '' , { root: true })\n                    }\n                    // if(router.currentRoute.path == '/orders' && (state.counter == rootState.order.cancelMultiple || rootState.order.cancelMultiple == 0 )){\n                        // commit('setCounter' , 0)\n                    //     dispatch('order/getOrderList' , '' , { root: true })\n                    // }\n                    if(router.currentRoute.path == '/positions'){\n                        dispatch('position/getPositions' , '' , { root: true })\n                    }\n                    \n                    if(router.currentRoute.path == '/holdings' && isHaveCnc){\n                        dispatch('holdings/getHoldings' , '' , { root: true })\n                    }\n                }\n            }\n\n            socketTr.onerror = function (err) {\n                socketTr.onclose()\n            }\n\n            socketTr.onclose = function (err) {\n                socketTr.close()\n                if (!state.isLogout && state.connectionStatus) {\n                    commit('setConnectionStatus', false)\n                    dispatch('connect')\n                }\n            }\n\n        },\n\n        async connectionRequest ({ dispatch, rootGetters }) {\n            \n            var token = JSON.parse(localStorage.getItem(\"websocketId\"));\n            var userId = await rootGetters['authtication/getUserId'];\n            var initCon = {\n                channel: \"\",\n                task: \"cn\",\n                acctid: userId,\n                user: userId,\n                token: token,\n            };\n            dispatch(\"send\", JSON.stringify(initCon));\n        },\n\n        async send ({ state, dispatch}, msg) {\n            if (!!socketTr.readyState && socketTr.readyState == 1) {\n                try {\n                    socketTr.send(msg);\n                } catch (err) {\n                    console.error(err);\n                }\n            } else if (!!socketTr.readyState && socketTr.readyState == 0) {\n                setTimeout(() => { socketTr.send(msg); }, 900);\n            }\n        },\n\n        sendHeartBeat ({ dispatch, rootGetters}, payload) {\n            var token = rootGetters['authtication/getWebsocketId']\n            var userId = rootGetters['authtication/getUserId'];\n            // var wsState = JSON.parse(localStorage.getItem(\"wsConnectionState\"));\n            if (!!userId) {\n                // if (!!wsState) {\n                    var heartBeat;\n                    var hb = {\n                        channel: \"\",\n                        task: payload,\n                        acctid: userId,\n                        user: userId,\n                        token: token,\n                    };\n                heartBeat = JSON.stringify(hb);\n                dispatch('send', heartBeat);\n                // }\n            }\n        },\n        \n\n        websocketClose ({ state, commit, dispatch, rootGetters }, payload) {\n            socketTr ?  socketTr.close() : ''\n        }\n\n    }\n\n};\n\nexport default wsConnectionTr;\n"]}]}