{"remainingRequest":"/home/stoneage/vueJs projects/aliceblueTradevuex/node_modules/babel-loader/lib/index.js!/home/stoneage/vueJs projects/aliceblueTradevuex/src/store/modules/WebsocketTr.js","dependencies":[{"path":"/home/stoneage/vueJs projects/aliceblueTradevuex/src/store/modules/WebsocketTr.js","mtime":1649833629679},{"path":"/home/stoneage/vueJs projects/aliceblueTradevuex/babel.config.js","mtime":1649344700943},{"path":"/home/stoneage/vueJs projects/aliceblueTradevuex/node_modules/cache-loader/dist/cjs.js","mtime":1655272566310},{"path":"/home/stoneage/vueJs projects/aliceblueTradevuex/node_modules/babel-loader/lib/index.js","mtime":1655272566942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3N0b25lYWdlL3Z1ZUpzIHByb2plY3RzL2FsaWNlYmx1ZVRyYWRldnVleC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfdG9BcnJheSBmcm9tICIvaG9tZS9zdG9uZWFnZS92dWVKcyBwcm9qZWN0cy9hbGljZWJsdWVUcmFkZXZ1ZXgvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQXJyYXkuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMuanMiOwppbXBvcnQgKiBhcyBwYWtvIGZyb20gJy4uLy4uL2Fzc2V0cy9wYWtvJzsKaW1wb3J0IHJvdXRlciBmcm9tICIuLi8uLi9yb3V0ZXIiOwppbXBvcnQgeyBuYW1lIH0gZnJvbSAnLi4vLi4vLi4vcGFja2FnZS5qc29uJzsKdmFyIHVybCA9ICd3c3M6Ly90cmFkZS56ZXJvYnJva2VyYWdlb25saW5lLmNvbS9OZXN0SHRtbDVNb2JpbGVUZWNoL3NvY2tldC9zdHJlYW0nOwp2YXIgc29ja2V0VHI7CnZhciB3c0Nvbm5lY3Rpb25UciA9IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICB3c0RhdGE6IFtdLAogICAgY29ubmVjdGlvblN0YXR1czogZmFsc2UsCiAgICBwcmV2aW91c1N1YnNyaXB0aW9uOiAnJywKICAgIHByZURlcHRoU3Vic3JpcHRpb246ICcnLAogICAgcHJlU2NyaXBQYXlsb2FkOiAnJywKICAgIHByZURlcHRoUGF5bG9hZDogJycsCiAgICBpc1JlY29ubmVjdDogZmFsc2UsCiAgICBpc0xvZ291dDogZmFsc2UKICB9LAogIG11dGF0aW9uczogewogICAgc2V0TXdEYXRhOiBmdW5jdGlvbiBzZXRNd0RhdGEoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUud3NEYXRhID0gW107CiAgICAgIHN0YXRlLndzRGF0YSA9IHBheWxvYWQ7CiAgICB9LAogICAgc2V0UHJldmlvdXNTdWJzcmlwdGlvbjogZnVuY3Rpb24gc2V0UHJldmlvdXNTdWJzcmlwdGlvbihzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5wcmV2aW91c1N1YnNyaXB0aW9uID0gcGF5bG9hZDsKICAgIH0sCiAgICBzZXRDb25uZWN0aW9uU3RhdHVzOiBmdW5jdGlvbiBzZXRDb25uZWN0aW9uU3RhdHVzKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLmNvbm5lY3Rpb25TdGF0dXMgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldFByZURlcHRoU3Vic3JpcHRpb246IGZ1bmN0aW9uIHNldFByZURlcHRoU3Vic3JpcHRpb24oc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUucHJlRGVwdGhTdWJzcmlwdGlvbiA9IHBheWxvYWQ7CiAgICB9LAogICAgc2V0UHJlUGF5bG9hZDogZnVuY3Rpb24gc2V0UHJlUGF5bG9hZChzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5wcmVTY3JpcFBheWxvYWQgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldFByZURlcHRoUGF5bG9hZDogZnVuY3Rpb24gc2V0UHJlRGVwdGhQYXlsb2FkKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLnByZURlcHRoUGF5bG9hZCA9IHBheWxvYWQ7CiAgICB9LAogICAgc2V0UmVjb25uZWN0OiBmdW5jdGlvbiBzZXRSZWNvbm5lY3Qoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUuaXNSZWNvbm5lY3QgPSBwYXlsb2FkOwogICAgfSwKICAgIFNldElzTG9nb3V0OiBmdW5jdGlvbiBTZXRJc0xvZ291dChzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5pc0xvZ291dCA9IHBheWxvYWQ7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBjb25uZWN0OiBmdW5jdGlvbiBjb25uZWN0KF9yZWYpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSwKICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0LAogICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoLAogICAgICAgICAgcm9vdEdldHRlcnMgPSBfcmVmLnJvb3RHZXR0ZXJzOwogICAgICBzb2NrZXRUciA9IG5ldyBXZWJTb2NrZXQodXJsKTsKCiAgICAgIHNvY2tldFRyLm9ub3BlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBkaXNwYXRjaCgiY29ubmVjdGlvblJlcXVlc3QiKTsKICAgICAgfTsKCiAgICAgIHNvY2tldFRyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICB2YXIgX1N0cmluZyRmcm9tQ2hhckNvZGUkLCBfU3RyaW5nJGZyb21DaGFyQ29kZSQyOwoKICAgICAgICB2YXIgZGVjb2RlZCA9IHdpbmRvdy5hdG9iKG1zZy5kYXRhKTsKICAgICAgICB2YXIgZGF0YSA9IHBha28gPyBwYWtvLmluZmxhdGUoZGVjb2RlZCkgOiBbXTsKICAgICAgICB2YXIgbmV3YXJyYXkgPSAoX1N0cmluZyRmcm9tQ2hhckNvZGUkID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGRhdGEpLCBfU3RyaW5nJGZyb21DaGFyQ29kZSQyID0gX3RvQXJyYXkoX1N0cmluZyRmcm9tQ2hhckNvZGUkKSwgX1N0cmluZyRmcm9tQ2hhckNvZGUkKTsKICAgICAgICB2YXIgd3NDaGFuZ2UgPSBKU09OLnBhcnNlKG5ld2FycmF5KTsKCiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPD0gd3NDaGFuZ2UubGVuZ3RoIC0gMTsgaisrKSB7CiAgICAgICAgICB2YXIganNvblJlc3BvbnNlID0gd3NDaGFuZ2Vbal07CgogICAgICAgICAgaWYgKGpzb25SZXNwb25zZVsibXNnIl0gPT0gImNvbm5lY3RlZCIpIHsKICAgICAgICAgICAgY29tbWl0KCdzZXRDb25uZWN0aW9uU3RhdHVzJywgdHJ1ZSk7CiAgICAgICAgICAgIGRpc3BhdGNoKCdzZW5kSGVhcnRCZWF0JywgIm9zIik7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGpzb25SZXNwb25zZVsibmFtZSJdID09ICJvc2YiKSB7CiAgICAgICAgICAgIGNvbW1pdCgnb3JkZXIvc2V0T3JkZXJTdGF0dXMnLCBqc29uUmVzcG9uc2UsIHsKICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgaXNCb29sZWFuID0gcm9vdEdldHRlcnNbJ29yZGVyL2dldENhbmNlbE9yZGVyTGVuZ3RoJ10gPT0gMCA/IHRydWUgOiByb290R2V0dGVyc1snb3JkZXIvZ2V0Q2FuY2VsT3JkZXJMZW5ndGgnXSA9PSByb290R2V0dGVyc1snb3JkZXIvZ2V0T3JkZXJTdGF0dXMnXS5sZW5ndGggPyB0cnVlIDogZmFsc2U7CgogICAgICAgICAgICBpZiAoanNvblJlc3BvbnNlICYmIHJvdXRlci5jdXJyZW50Um91dGUucGF0aCA9PSAnL29yZGVycycgJiYgaXNCb29sZWFuKSB7CiAgICAgICAgICAgICAgZGlzcGF0Y2goJ29yZGVyL2dldE9yZGVyTGlzdCcsICcnLCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChqc29uUmVzcG9uc2UgJiYgcm91dGVyLmN1cnJlbnRSb3V0ZS5wYXRoID09ICcvcG9zaXRpb25zJyAmJiBqc29uUmVzcG9uc2Uub3MgPT0gImNvbXBsZXRlIikgewogICAgICAgICAgICAgIGRpc3BhdGNoKCdwb3NpdGlvbi9nZXRQb3NpdGlvbnMnLCAnJywgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwoKICAgICAgc29ja2V0VHIub25lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBzb2NrZXRUci5vbmNsb3NlKCk7CiAgICAgIH07CgogICAgICBzb2NrZXRUci5vbmNsb3NlID0gZnVuY3Rpb24gKGVycikgewogICAgICAgIHNvY2tldFRyLmNsb3NlKCk7CgogICAgICAgIGlmICghc3RhdGUuaXNMb2dvdXQgJiYgc3RhdGUuY29ubmVjdGlvblN0YXR1cykgewogICAgICAgICAgY29tbWl0KCdzZXRDb25uZWN0aW9uU3RhdHVzJywgZmFsc2UpOwogICAgICAgICAgZGlzcGF0Y2goJ2Nvbm5lY3QnKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9LAogICAgY29ubmVjdGlvblJlcXVlc3Q6IGZ1bmN0aW9uIGNvbm5lY3Rpb25SZXF1ZXN0KF9yZWYyKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGRpc3BhdGNoLCByb290R2V0dGVycywgdG9rZW4sIHVzZXJJZCwgaW5pdENvbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYyLmRpc3BhdGNoLCByb290R2V0dGVycyA9IF9yZWYyLnJvb3RHZXR0ZXJzOwogICAgICAgICAgICAgICAgdG9rZW4gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ3ZWJzb2NrZXRJZCIpKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHJvb3RHZXR0ZXJzWydhdXRodGljYXRpb24vZ2V0VXNlcklkJ107CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHVzZXJJZCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBpbml0Q29uID0gewogICAgICAgICAgICAgICAgICBjaGFubmVsOiAiIiwKICAgICAgICAgICAgICAgICAgdGFzazogImNuIiwKICAgICAgICAgICAgICAgICAgYWNjdGlkOiB1c2VySWQsCiAgICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJJZCwKICAgICAgICAgICAgICAgICAgdG9rZW46IHRva2VuCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZGlzcGF0Y2goInNlbmQiLCBKU09OLnN0cmluZ2lmeShpbml0Q29uKSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZW5kOiBmdW5jdGlvbiBzZW5kKF9yZWYzLCBtc2cpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHN0YXRlLCBkaXNwYXRjaDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmMy5zdGF0ZSwgZGlzcGF0Y2ggPSBfcmVmMy5kaXNwYXRjaDsKCiAgICAgICAgICAgICAgICBpZiAoISFzb2NrZXRUci5yZWFkeVN0YXRlICYmIHNvY2tldFRyLnJlYWR5U3RhdGUgPT0gMSkgewogICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHNvY2tldFRyLnNlbmQobXNnKTsKICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEhc29ja2V0VHIucmVhZHlTdGF0ZSAmJiBzb2NrZXRUci5yZWFkeVN0YXRlID09IDApIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgc29ja2V0VHIuc2VuZChtc2cpOwogICAgICAgICAgICAgICAgICB9LCA5MDApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZW5kSGVhcnRCZWF0OiBmdW5jdGlvbiBzZW5kSGVhcnRCZWF0KF9yZWY0LCBwYXlsb2FkKSB7CiAgICAgIHZhciBkaXNwYXRjaCA9IF9yZWY0LmRpc3BhdGNoLAogICAgICAgICAgcm9vdEdldHRlcnMgPSBfcmVmNC5yb290R2V0dGVyczsKICAgICAgdmFyIHRva2VuID0gcm9vdEdldHRlcnNbJ2F1dGh0aWNhdGlvbi9nZXRXZWJzb2NrZXRJZCddOwogICAgICB2YXIgdXNlcklkID0gcm9vdEdldHRlcnNbJ2F1dGh0aWNhdGlvbi9nZXRVc2VySWQnXTsgLy8gdmFyIHdzU3RhdGUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ3c0Nvbm5lY3Rpb25TdGF0ZSIpKTsKCiAgICAgIGlmICghIXVzZXJJZCkgewogICAgICAgIC8vIGlmICghIXdzU3RhdGUpIHsKICAgICAgICB2YXIgaGVhcnRCZWF0OwogICAgICAgIHZhciBoYiA9IHsKICAgICAgICAgIGNoYW5uZWw6ICIiLAogICAgICAgICAgdGFzazogcGF5bG9hZCwKICAgICAgICAgIGFjY3RpZDogdXNlcklkLAogICAgICAgICAgdXNlcjogdXNlcklkLAogICAgICAgICAgdG9rZW46IHRva2VuCiAgICAgICAgfTsKICAgICAgICBoZWFydEJlYXQgPSBKU09OLnN0cmluZ2lmeShoYik7CiAgICAgICAgZGlzcGF0Y2goJ3NlbmQnLCBoZWFydEJlYXQpOyAvLyB9CiAgICAgIH0KICAgIH0sCiAgICB3ZWJzb2NrZXRDbG9zZTogZnVuY3Rpb24gd2Vic29ja2V0Q2xvc2UoX3JlZjUsIHBheWxvYWQpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZjUuc3RhdGUsCiAgICAgICAgICBjb21taXQgPSBfcmVmNS5jb21taXQsCiAgICAgICAgICBkaXNwYXRjaCA9IF9yZWY1LmRpc3BhdGNoLAogICAgICAgICAgcm9vdEdldHRlcnMgPSBfcmVmNS5yb290R2V0dGVyczsKICAgICAgc29ja2V0VHIgPyBzb2NrZXRUci5jbG9zZSgpIDogJyc7CiAgICB9CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB3c0Nvbm5lY3Rpb25Ucjs="},{"version":3,"sources":["/home/stoneage/vueJs projects/aliceblueTradevuex/src/store/modules/WebsocketTr.js"],"names":["pako","router","name","url","socketTr","wsConnectionTr","namespaced","state","wsData","connectionStatus","previousSubsription","preDepthSubsription","preScripPayload","preDepthPayload","isReconnect","isLogout","mutations","setMwData","payload","setPreviousSubsription","setConnectionStatus","setPreDepthSubsription","setPrePayload","setPreDepthPayload","setReconnect","SetIsLogout","actions","connect","commit","dispatch","rootGetters","WebSocket","onopen","onmessage","msg","decoded","window","atob","data","inflate","newarray","String","fromCharCode","apply","wsChange","JSON","parse","j","length","jsonResponse","root","isBoolean","currentRoute","path","os","onerror","err","onclose","close","connectionRequest","token","localStorage","getItem","userId","initCon","channel","task","acctid","user","stringify","send","readyState","console","error","setTimeout","sendHeartBeat","heartBeat","hb","websocketClose"],"mappings":";;;;;;AAAA,OAAO,KAAKA,IAAZ,MAAsB,mBAAtB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,SAASC,IAAT,QAAqB,uBAArB;AAEA,IAAMC,GAAG,GAAI,uEAAb;AAGA,IAAIC,QAAJ;AAEA,IAAMC,cAAc,GAAG;AACnBC,EAAAA,UAAU,EAAE,IADO;AAGnBC,EAAAA,KAAK,EAAE;AACHC,IAAAA,MAAM,EAAE,EADL;AAEHC,IAAAA,gBAAgB,EAAE,KAFf;AAGHC,IAAAA,mBAAmB,EAAE,EAHlB;AAIHC,IAAAA,mBAAmB,EAAE,EAJlB;AAKHC,IAAAA,eAAe,EAAE,EALd;AAMHC,IAAAA,eAAe,EAAE,EANd;AAOHC,IAAAA,WAAW,EAAE,KAPV;AAQHC,IAAAA,QAAQ,EAAE;AARP,GAHY;AAcnBC,EAAAA,SAAS,EAAE;AACPC,IAAAA,SADO,qBACIV,KADJ,EACWW,OADX,EACoB;AACvBX,MAAAA,KAAK,CAACC,MAAN,GAAe,EAAf;AACAD,MAAAA,KAAK,CAACC,MAAN,GAAeU,OAAf;AACH,KAJM;AAKPC,IAAAA,sBALO,kCAKiBZ,KALjB,EAKwBW,OALxB,EAKiC;AACpCX,MAAAA,KAAK,CAACG,mBAAN,GAA4BQ,OAA5B;AACH,KAPM;AAQPE,IAAAA,mBARO,+BAQcb,KARd,EAQqBW,OARrB,EAQ8B;AACjCX,MAAAA,KAAK,CAACE,gBAAN,GAAyBS,OAAzB;AACH,KAVM;AAWPG,IAAAA,sBAXO,kCAWiBd,KAXjB,EAWwBW,OAXxB,EAWiC;AACpCX,MAAAA,KAAK,CAACI,mBAAN,GAA4BO,OAA5B;AACH,KAbM;AAcPI,IAAAA,aAdO,yBAcQf,KAdR,EAceW,OAdf,EAcwB;AAC3BX,MAAAA,KAAK,CAACK,eAAN,GAAwBM,OAAxB;AACH,KAhBM;AAiBPK,IAAAA,kBAjBO,8BAiBahB,KAjBb,EAiBoBW,OAjBpB,EAiB6B;AAChCX,MAAAA,KAAK,CAACM,eAAN,GAAwBK,OAAxB;AACH,KAnBM;AAoBPM,IAAAA,YApBO,wBAoBOjB,KApBP,EAoBcW,OApBd,EAoBuB;AAC1BX,MAAAA,KAAK,CAACO,WAAN,GAAoBI,OAApB;AACH,KAtBM;AAuBPO,IAAAA,WAvBO,uBAuBMlB,KAvBN,EAuBaW,OAvBb,EAuBsB;AACzBX,MAAAA,KAAK,CAACQ,QAAN,GAAiBG,OAAjB;AACH;AAzBM,GAdQ;AA0CnBQ,EAAAA,OAAO,EAAE;AACLC,IAAAA,OADK,yBAC8C;AAAA,UAAxCpB,KAAwC,QAAxCA,KAAwC;AAAA,UAAjCqB,MAAiC,QAAjCA,MAAiC;AAAA,UAAzBC,QAAyB,QAAzBA,QAAyB;AAAA,UAAfC,WAAe,QAAfA,WAAe;AAC/C1B,MAAAA,QAAQ,GAAG,IAAI2B,SAAJ,CAAc5B,GAAd,CAAX;;AACAC,MAAAA,QAAQ,CAAC4B,MAAT,GAAkB,YAAY;AAC1BH,QAAAA,QAAQ,CAAC,mBAAD,CAAR;AACH,OAFD;;AAGAzB,MAAAA,QAAQ,CAAC6B,SAAT,GAAqB,UAAUC,GAAV,EAAe;AAAA;;AAChC,YAAIC,OAAO,GAAGC,MAAM,CAACC,IAAP,CAAYH,GAAG,CAACI,IAAhB,CAAd;AACA,YAAIA,IAAI,GAAGtC,IAAI,GAAGA,IAAI,CAACuC,OAAL,CAAaJ,OAAb,CAAH,GAA2B,EAA1C;AACA,YAAIK,QAAQ,4BAASC,MAAM,CAACC,YAAP,CAAoBC,KAApB,CAA0BF,MAA1B,EAAkCH,IAAlC,CAAT,kFAAZ;AACA,YAAIM,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWN,QAAX,CAAf;;AAEA,aAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIH,QAAQ,CAACI,MAAT,GAAkB,CAAvC,EAA0CD,CAAC,EAA3C,EAA+C;AAC3C,cAAIE,YAAY,GAAGL,QAAQ,CAACG,CAAD,CAA3B;;AACA,cAAIE,YAAY,CAAC,KAAD,CAAZ,IAAuB,WAA3B,EAAwC;AACpCrB,YAAAA,MAAM,CAAC,qBAAD,EAAwB,IAAxB,CAAN;AACAC,YAAAA,QAAQ,CAAC,eAAD,EAAkB,IAAlB,CAAR;AACH;;AAGD,cAAIoB,YAAY,CAAC,MAAD,CAAZ,IAAwB,KAA5B,EAAmC;AAC/BrB,YAAAA,MAAM,CAAC,sBAAD,EAAyBqB,YAAzB,EAAwC;AAAEC,cAAAA,IAAI,EAAE;AAAR,aAAxC,CAAN;AACA,gBAAIC,SAAS,GAAGrB,WAAW,CAAC,4BAAD,CAAX,IAA6C,CAA7C,GAAiD,IAAjD,GAAwDA,WAAW,CAAC,4BAAD,CAAX,IAA6CA,WAAW,CAAC,sBAAD,CAAX,CAAoCkB,MAAjF,GAA0F,IAA1F,GAAiG,KAAzK;;AACA,gBAAIC,YAAY,IAAIhD,MAAM,CAACmD,YAAP,CAAoBC,IAApB,IAA4B,SAA5C,IAAyDF,SAA7D,EAAuE;AACnEtB,cAAAA,QAAQ,CAAC,oBAAD,EAAwB,EAAxB,EAA6B;AAAEqB,gBAAAA,IAAI,EAAE;AAAR,eAA7B,CAAR;AACH;;AACD,gBAAID,YAAY,IAAIhD,MAAM,CAACmD,YAAP,CAAoBC,IAApB,IAA4B,YAA5C,IAA4DJ,YAAY,CAACK,EAAb,IAAmB,UAAnF,EAA8F;AAC1FzB,cAAAA,QAAQ,CAAC,uBAAD,EAA2B,EAA3B,EAAgC;AAAEqB,gBAAAA,IAAI,EAAE;AAAR,eAAhC,CAAR;AACH;AAEJ;AAEJ;AACJ,OA3BD;;AA6BA9C,MAAAA,QAAQ,CAACmD,OAAT,GAAmB,UAAUC,GAAV,EAAe;AAC9BpD,QAAAA,QAAQ,CAACqD,OAAT;AACH,OAFD;;AAIArD,MAAAA,QAAQ,CAACqD,OAAT,GAAmB,UAAUD,GAAV,EAAe;AAC9BpD,QAAAA,QAAQ,CAACsD,KAAT;;AACA,YAAI,CAACnD,KAAK,CAACQ,QAAP,IAAmBR,KAAK,CAACE,gBAA7B,EAA+C;AAC3CmB,UAAAA,MAAM,CAAC,qBAAD,EAAwB,KAAxB,CAAN;AACAC,UAAAA,QAAQ,CAAC,SAAD,CAAR;AACH;AACJ,OAND;AAQH,KA/CI;AAiDC8B,IAAAA,iBAjDD,oCAiD+C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAzB9B,gBAAAA,QAAyB,SAAzBA,QAAyB,EAAfC,WAAe,SAAfA,WAAe;AAE5C8B,gBAAAA,KAF4C,GAEpCf,IAAI,CAACC,KAAL,CAAWe,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAX,CAFoC;AAAA;AAAA,uBAG7BhC,WAAW,CAAC,wBAAD,CAHkB;;AAAA;AAG5CiC,gBAAAA,MAH4C;AAI5CC,gBAAAA,OAJ4C,GAIlC;AACVC,kBAAAA,OAAO,EAAE,EADC;AAEVC,kBAAAA,IAAI,EAAE,IAFI;AAGVC,kBAAAA,MAAM,EAAEJ,MAHE;AAIVK,kBAAAA,IAAI,EAAEL,MAJI;AAKVH,kBAAAA,KAAK,EAAEA;AALG,iBAJkC;AAWhD/B,gBAAAA,QAAQ,CAAC,MAAD,EAASgB,IAAI,CAACwB,SAAL,CAAeL,OAAf,CAAT,CAAR;;AAXgD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYnD,KA7DI;AA+DCM,IAAAA,IA/DD,uBA+D2BpC,GA/D3B,EA+DgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAvB3B,gBAAAA,KAAuB,SAAvBA,KAAuB,EAAhBsB,QAAgB,SAAhBA,QAAgB;;AACjC,oBAAI,CAAC,CAACzB,QAAQ,CAACmE,UAAX,IAAyBnE,QAAQ,CAACmE,UAAT,IAAuB,CAApD,EAAuD;AACnD,sBAAI;AACAnE,oBAAAA,QAAQ,CAACkE,IAAT,CAAcpC,GAAd;AACH,mBAFD,CAEE,OAAOsB,GAAP,EAAY;AACVgB,oBAAAA,OAAO,CAACC,KAAR,CAAcjB,GAAd;AACH;AACJ,iBAND,MAMO,IAAI,CAAC,CAACpD,QAAQ,CAACmE,UAAX,IAAyBnE,QAAQ,CAACmE,UAAT,IAAuB,CAApD,EAAuD;AAC1DG,kBAAAA,UAAU,CAAC,YAAM;AAAEtE,oBAAAA,QAAQ,CAACkE,IAAT,CAAcpC,GAAd;AAAqB,mBAA9B,EAAgC,GAAhC,CAAV;AACH;;AATgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUpC,KAzEI;AA2ELyC,IAAAA,aA3EK,gCA2EoCzD,OA3EpC,EA2E6C;AAAA,UAAjCW,QAAiC,SAAjCA,QAAiC;AAAA,UAAvBC,WAAuB,SAAvBA,WAAuB;AAC9C,UAAI8B,KAAK,GAAG9B,WAAW,CAAC,6BAAD,CAAvB;AACA,UAAIiC,MAAM,GAAGjC,WAAW,CAAC,wBAAD,CAAxB,CAF8C,CAG9C;;AACA,UAAI,CAAC,CAACiC,MAAN,EAAc;AACV;AACI,YAAIa,SAAJ;AACA,YAAIC,EAAE,GAAG;AACLZ,UAAAA,OAAO,EAAE,EADJ;AAELC,UAAAA,IAAI,EAAEhD,OAFD;AAGLiD,UAAAA,MAAM,EAAEJ,MAHH;AAILK,UAAAA,IAAI,EAAEL,MAJD;AAKLH,UAAAA,KAAK,EAAEA;AALF,SAAT;AAOJgB,QAAAA,SAAS,GAAG/B,IAAI,CAACwB,SAAL,CAAeQ,EAAf,CAAZ;AACAhD,QAAAA,QAAQ,CAAC,MAAD,EAAS+C,SAAT,CAAR,CAXU,CAYV;AACH;AACJ,KA7FI;AAgGLE,IAAAA,cAhGK,iCAgGqD5D,OAhGrD,EAgG8D;AAAA,UAAjDX,KAAiD,SAAjDA,KAAiD;AAAA,UAA1CqB,MAA0C,SAA1CA,MAA0C;AAAA,UAAlCC,QAAkC,SAAlCA,QAAkC;AAAA,UAAxBC,WAAwB,SAAxBA,WAAwB;AAC/D1B,MAAAA,QAAQ,GAAIA,QAAQ,CAACsD,KAAT,EAAJ,GAAuB,EAA/B;AACH;AAlGI;AA1CU,CAAvB;AAkJA,eAAerD,cAAf","sourcesContent":["import * as pako from '../../assets/pako'\nimport router from \"../../router\";\nimport { name } from '../../../package.json'\n\nconst url =  'wss://trade.zerobrokerageonline.com/NestHtml5MobileTech/socket/stream'\n\n\nlet socketTr;\n\nconst wsConnectionTr = {\n    namespaced: true,\n\n    state: {\n        wsData: [],\n        connectionStatus: false,\n        previousSubsription: '',\n        preDepthSubsription: '',\n        preScripPayload: '',\n        preDepthPayload: '',\n        isReconnect: false,\n        isLogout: false\n    },\n\n    mutations: {\n        setMwData (state, payload) {\n            state.wsData = [];\n            state.wsData = payload\n        },\n        setPreviousSubsription (state, payload) {\n            state.previousSubsription = payload;\n        },\n        setConnectionStatus (state, payload) {\n            state.connectionStatus = payload\n        },\n        setPreDepthSubsription (state, payload) {\n            state.preDepthSubsription = payload\n        },\n        setPrePayload (state, payload) {\n            state.preScripPayload = payload\n        },\n        setPreDepthPayload (state, payload) {\n            state.preDepthPayload = payload\n        },\n        setReconnect (state, payload) {\n            state.isReconnect = payload\n        },\n        SetIsLogout (state, payload) {\n            state.isLogout = payload\n        }\n    },\n\n    actions: {\n        connect ({ state, commit, dispatch, rootGetters }) {\n            socketTr = new WebSocket(url)\n            socketTr.onopen = function () {\n                dispatch(\"connectionRequest\");\n            }\n            socketTr.onmessage = function (msg) {\n                var decoded = window.atob(msg.data);\n                var data = pako ? pako.inflate(decoded) : [];\n                var newarray = ([] = String.fromCharCode.apply(String, data));\n                var wsChange = JSON.parse(newarray);\n\n                for (var j = 0; j <= wsChange.length - 1; j++) {\n                    var jsonResponse = wsChange[j];\n                    if (jsonResponse[\"msg\"] == \"connected\") { \n                        commit('setConnectionStatus', true)\n                        dispatch('sendHeartBeat', \"os\")\n                    }\n\n              \n                    if (jsonResponse[\"name\"] == \"osf\") {\n                        commit('order/setOrderStatus', jsonResponse , { root: true })\n                        var isBoolean = rootGetters['order/getCancelOrderLength'] == 0 ? true : rootGetters['order/getCancelOrderLength'] == rootGetters['order/getOrderStatus'].length ? true : false\n                        if (jsonResponse && router.currentRoute.path == '/orders' && isBoolean){\n                            dispatch('order/getOrderList' , '' , { root: true })\n                        }\n                        if (jsonResponse && router.currentRoute.path == '/positions' && jsonResponse.os == \"complete\"){\n                            dispatch('position/getPositions' , '' , { root: true })\n                        }\n                        \n                    }\n\n                }\n            }\n\n            socketTr.onerror = function (err) {\n                socketTr.onclose()\n            }\n\n            socketTr.onclose = function (err) {\n                socketTr.close()\n                if (!state.isLogout && state.connectionStatus) {\n                    commit('setConnectionStatus', false)\n                    dispatch('connect')\n                }\n            }\n\n        },\n\n        async connectionRequest ({ dispatch, rootGetters }) {\n            \n            var token = JSON.parse(localStorage.getItem(\"websocketId\"));\n            var userId = await rootGetters['authtication/getUserId'];\n            var initCon = {\n                channel: \"\",\n                task: \"cn\",\n                acctid: userId,\n                user: userId,\n                token: token,\n            };\n            dispatch(\"send\", JSON.stringify(initCon));\n        },\n\n        async send ({ state, dispatch}, msg) {\n            if (!!socketTr.readyState && socketTr.readyState == 1) {\n                try {\n                    socketTr.send(msg);\n                } catch (err) {\n                    console.error(err);\n                }\n            } else if (!!socketTr.readyState && socketTr.readyState == 0) {\n                setTimeout(() => { socketTr.send(msg); }, 900);\n            }\n        },\n\n        sendHeartBeat ({ dispatch, rootGetters}, payload) {\n            var token = rootGetters['authtication/getWebsocketId']\n            var userId = rootGetters['authtication/getUserId'];\n            // var wsState = JSON.parse(localStorage.getItem(\"wsConnectionState\"));\n            if (!!userId) {\n                // if (!!wsState) {\n                    var heartBeat;\n                    var hb = {\n                        channel: \"\",\n                        task: payload,\n                        acctid: userId,\n                        user: userId,\n                        token: token,\n                    };\n                heartBeat = JSON.stringify(hb);\n                dispatch('send', heartBeat);\n                // }\n            }\n        },\n        \n\n        websocketClose ({ state, commit, dispatch, rootGetters }, payload) {\n            socketTr ?  socketTr.close() : ''\n        }\n\n    }\n\n};\n\nexport default wsConnectionTr;\n"]}]}