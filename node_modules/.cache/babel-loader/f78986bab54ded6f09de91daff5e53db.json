{"remainingRequest":"/home/stoneage/vueJs projects/trustLineTradeVuex/node_modules/babel-loader/lib/index.js!/home/stoneage/vueJs projects/trustLineTradeVuex/src/store/modules/orderWindow.js","dependencies":[{"path":"/home/stoneage/vueJs projects/trustLineTradeVuex/src/store/modules/orderWindow.js","mtime":1655307156181},{"path":"/home/stoneage/vueJs projects/trustLineTradeVuex/babel.config.js","mtime":1649344700943},{"path":"/home/stoneage/vueJs projects/trustLineTradeVuex/node_modules/cache-loader/dist/cjs.js","mtime":1655272566310},{"path":"/home/stoneage/vueJs projects/trustLineTradeVuex/node_modules/babel-loader/lib/index.js","mtime":1655272566942}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3N0b25lYWdlL3Z1ZUpzIHByb2plY3RzL3RydXN0TGluZVRyYWRlVnVleC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvc3RvbmVhZ2UvdnVlSnMgcHJvamVjdHMvdHJ1c3RMaW5lVHJhZGVWdWV4L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyI7Cgp2YXIgX3N0YXRlOwoKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnBhcnNlLWZsb2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wYXJzZS1pbnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZi5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHNlcnZpY2UgZnJvbSAnLi4vU2VydmljZXMvaHR0cHNlcnZpY2UnOwppbXBvcnQgZXJyb3JIYW5kbGluZyBmcm9tICcuLi9TZXJ2aWNlcy9lcnJvckhhbmRsaW5nJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CgpmdW5jdGlvbiBjaGVja051bGxOYW4odmFsdWUpIHsKICByZXR1cm4gdmFsdWUgJiYgISF2YWx1ZSAmJiB2YWx1ZS50b1N0cmluZygpICE9ICJOQSIgJiYgdmFsdWUudG9TdHJpbmcoKSAhPSAiLSIgJiYgIWlzTmFOKHZhbHVlKSA/IHRydWUgOiBmYWxzZTsKfQoKZnVuY3Rpb24gc2V0UXR5Rm9jdXMoKSB7CiAgdmFyIHF0eUlucHV0Qm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3F0eSIpOwogIHF0eUlucHV0Qm94ICE9IG51bGwgPyBxdHlJbnB1dEJveC5mb2N1cygpIDogJyc7Cn0KCnZhciBvcmRlcldpbmRvdyA9IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiAoX3N0YXRlID0gewogICAgLy8gd2luZG93IGJ0bnMgc3RhdGUgdmFyaWFibGVzCiAgICBvcmRlclR5cGVMaXN0OiBbIlJlZ3VsYXIiLCAiQ292ZXIiLCAiQnJhY2tldCIsICJBTU8iXSwKICAgIHZhbGlkaXR5SXRlbXM6IFsiREFZIiwgIklPQyJdLAogICAgYnJhY2tldFByaWNlSXRlbXM6IFsiTCIsICJTTCJdLAogICAgY292ZXJQcmljZUl0ZW1zOiBbIkwiLCAiTUtUIl0sCiAgICBvcmRlclRhYjogbnVsbCwKICAgIHByaWNlVHlwZTogbnVsbCwKICAgIHByb2RUeXBlOiBudWxsLAogICAgdmFsaWRpdHlUeXBlOiAnREFZJywKICAgIHNob3dPcmRlcldpbmRvdzogZmFsc2UsCiAgICByZW1vdmVDc3M6IHRydWUsCiAgICBvcmRlclR5cGU6ICdCdXknLAogICAgLy8gb3JkZXJTd2l0Y2gKICAgIHRvZ2dsZU9yZGVyOiBmYWxzZSwKICAgIGN1cnJlbnRPcmRlcjogW10sCiAgICBwcmljZVJhbmdlRGV0YWlsczogW10sCiAgICBzY3JpcHRRdW90ZURldGFpbHM6IFtdLAogICAgY3VycmVudEV4Y2hhbmdlOiAnJywKICAgIGN1cnJlbnRJbnN0cnVtZW50OiAnJywKICAgIGN1cnJlbnRUb2tlbjogJycsCiAgICAvLyBxdHkgJiBwcmljZSBWYWx1ZXMKICAgIG1pbmxvdDogJycsCiAgICBsdHA6ICcnLAogICAgY3VycmVudEx0cDogbnVsbCwKICAgIHRyaWdnZXJQcmljZTogJycsCiAgICB0aWNrUHJpY2U6ICcnLAogICAgZGlzY2xvc2VkUXVhbnRpdHk6IDAsCiAgICBxdWFudGl0eTogJycsCiAgICBwcmljZTogJycsCiAgICAvLyBkaXNhYmxlIGlucHV0cyBib29sZWFuCiAgICBpc1ByaWNlOiBCb29sZWFuLAogICAgaXNUcmdQcmljZTogQm9vbGVhbiwKICAgIGlzRGlzY2xvc2VkUXR5OiBCb29sZWFuLAogICAgLy8gcHJpY2UgcmFuZ2UgZGF0YQogICAgbnNlUHJpY2VSYW5nZURhdGE6IFtdLAogICAgYnNlUHJpY2VSYW5nZURhdGE6IFtdLAogICAgbG93ZXJSYW5nZTogJycsCiAgICB1cHBlclJhbmdlOiAnJywKICAgIG5zZUJzZVR5cGU6IGZhbHNlLAogICAgbW9kaWZ5T3JkZXI6IGZhbHNlLAogICAgLy8gY3VycmVudFBhZ2UgSWRlbnRpZnkKICAgIGN1cnJlbnRQYWdlOiAnJwogIH0sIF9kZWZpbmVQcm9wZXJ0eShfc3RhdGUsICJjdXJyZW50SW5zdHJ1bWVudCIsICcnKSwgX2RlZmluZVByb3BlcnR5KF9zdGF0ZSwgImlzTmZvIiwgdHJ1ZSksIF9kZWZpbmVQcm9wZXJ0eShfc3RhdGUsICJsb2FkaW5nIiwgZmFsc2UpLCBfZGVmaW5lUHJvcGVydHkoX3N0YXRlLCAid2luZG93TG9hZGluZyIsIGZhbHNlKSwgX2RlZmluZVByb3BlcnR5KF9zdGF0ZSwgImFsbFByaWNlSXRlbXMiLCBbIkwiLCAiTUtUIiwgIlNMIiwgIlNMLU0iXSksIF9kZWZpbmVQcm9wZXJ0eShfc3RhdGUsICJwb3N0aW9uUHJpY2VJdGVtcyIsIFsiTCIsICJNS1QiLCAiU0wiXSksIF9kZWZpbmVQcm9wZXJ0eShfc3RhdGUsICJzaG93UHJpY2VJdGVtcyIsIFtdKSwgX2RlZmluZVByb3BlcnR5KF9zdGF0ZSwgImVxUHJvZHVjdEl0ZW1zIiwgWyJNSVMiLCAiQ05DIl0pLCBfZGVmaW5lUHJvcGVydHkoX3N0YXRlLCAiYWxsUHJvZHVjdEl0ZW1zIiwgWyJNSVMiLCAiTlJNTCJdKSwgX2RlZmluZVByb3BlcnR5KF9zdGF0ZSwgInNob3dwcm9kdWN0SXRlbXMiLCBbXSksIF9kZWZpbmVQcm9wZXJ0eShfc3RhdGUsICJvcmRlckRhdGEiLCBbXSksIF9kZWZpbmVQcm9wZXJ0eShfc3RhdGUsICJjaGFydFNjcmlwRGF0YSIsIFtdKSwgX2RlZmluZVByb3BlcnR5KF9zdGF0ZSwgIm5zZVN3aXRjaFByaWNlIiwgJzAuMDAnKSwgX2RlZmluZVByb3BlcnR5KF9zdGF0ZSwgImJzZVN3aXRjaFByaWNlIiwgJzAuMDAnKSwgX2RlZmluZVByb3BlcnR5KF9zdGF0ZSwgImF2YWlsYWJsZU1hcmdpbiIsICcwLjAwJyksIF9zdGF0ZSksCiAgbXV0YXRpb25zOiB7CiAgICBzZXRSZW1vdmVDc3M6IGZ1bmN0aW9uIHNldFJlbW92ZUNzcyhzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5yZW1vdmVDc3MgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldE9yZGVyV2luZG93OiBmdW5jdGlvbiBzZXRPcmRlcldpbmRvdyhzdGF0ZSwgcGF5bG9hZCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlLnNob3dPcmRlcldpbmRvdyA9IHBheWxvYWQ7CiAgICAgICAgICAgICAgICBzdGF0ZS5tb2RpZnlPcmRlciA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2V0T3JkZXJXaW5kb3dNb2RpZnk6IGZ1bmN0aW9uIHNldE9yZGVyV2luZG93TW9kaWZ5KHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0ZS5zaG93T3JkZXJXaW5kb3cgPSBwYXlsb2FkOwogICAgICAgICAgICAgICAgc3RhdGUubW9kaWZ5T3JkZXIgPSB0cnVlOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZXRPcmRlclR5cGU6IGZ1bmN0aW9uIHNldE9yZGVyVHlwZShzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5vcmRlclR5cGUgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldFRvZ2dsZU9yZGVyOiBmdW5jdGlvbiBzZXRUb2dnbGVPcmRlcihzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS50b2dnbGVPcmRlciA9IHBheWxvYWQ7CiAgICB9LAogICAgc2V0Q3VycmVudE9yZGVyOiBmdW5jdGlvbiBzZXRDdXJyZW50T3JkZXIoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUuY3VycmVudE9yZGVyID0gcGF5bG9hZC5kYXRhOwoKICAgICAgaWYgKHBheWxvYWQucGFnZSA9PSAiaG9sZGluZ3MiKSB7CiAgICAgICAgc3RhdGUuY3VycmVudEV4Y2hhbmdlID0gcGF5bG9hZC5kYXRhLkV4Y2hTZWcxICYmIHBheWxvYWQuZGF0YS5Oc2V0c3ltICE9ICIwIiA/IHBheWxvYWQuZGF0YS5FeGNoU2VnMSA6IHBheWxvYWQuZGF0YS5FeGNoU2VnMjsKICAgICAgICBzdGF0ZS5jdXJyZW50VG9rZW4gPSBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgPT0gIk5TRSIgPyBwYXlsb2FkLmRhdGEuVG9rZW4xIDogcGF5bG9hZC5kYXRhLlRva2VuMjsKICAgICAgfSBlbHNlIGlmIChwYXlsb2FkLnBhZ2UgPT0gImFuYWx5dGljcyIpIHsKICAgICAgICBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgPSBwYXlsb2FkLmV4Y2g7CiAgICAgICAgc3RhdGUuY3VycmVudFRva2VuID0gcGF5bG9hZC5kYXRhLm5zZVRva2VuID8gcGF5bG9hZC5kYXRhLm5zZVRva2VuIDogcGF5bG9hZC5kYXRhLnRva2VuOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRoaXMgYmxvY2sgaXMgZm9yIFBPU0lUSU9OUyBhbmQgT1JERVJTCiAgICAgICAgc3RhdGUuY3VycmVudEV4Y2hhbmdlID0gcGF5bG9hZC5wYWdlID09ICdta1dhdGNoJyA/IHBheWxvYWQuZGF0YS5leCA6IHBheWxvYWQuZGF0YS5FeGNoYW5nZTsKICAgICAgICBzdGF0ZS5jdXJyZW50VG9rZW4gPSBwYXlsb2FkLmRhdGEudG9rZW4gPyBwYXlsb2FkLmRhdGEudG9rZW4gOiBwYXlsb2FkLmRhdGEuVG9rZW47CiAgICAgIH0KCiAgICAgIGlmIChwYXlsb2FkLnBhZ2UgPT0gIm1rV2F0Y2giKSB7CiAgICAgICAgc3RhdGUuY3VycmVudEluc3RydW1lbnQgPSBzdGF0ZS5jdXJyZW50T3JkZXIuSW5zdHJ1bWVudDsKICAgICAgfSBlbHNlIGlmIChwYXlsb2FkLnBhZ2UgPT0gIm9yZGVycyIgfHwgcGF5bG9hZC5wYWdlID09ICJwb3NpdGlvbnMiKSB7CiAgICAgICAgc3RhdGUuY3VycmVudEluc3RydW1lbnQgPSBzdGF0ZS5jdXJyZW50T3JkZXIuSW5zdG5hbWU7CiAgICAgIH0KCiAgICAgIHN0YXRlLmN1cnJlbnRJbnN0cnVtZW50ID09ICdPUFRJRFgnIHx8IHN0YXRlLmN1cnJlbnRJbnN0cnVtZW50ID09ICdPUFRTVEsnID8gc3RhdGUuaXNOZm8gPSBmYWxzZSA6IHN0YXRlLmlzTmZvID0gdHJ1ZTsKICAgICAgc3RhdGUuY3VycmVudFBhZ2UgPSBwYXlsb2FkLnBhZ2U7CgogICAgICBpZiAocGF5bG9hZC5wYWdlID09ICJob2xkaW5ncyIpIHsKICAgICAgICBzdGF0ZS5jdXJyZW50SW5zdHJ1bWVudCA9IHN0YXRlLmN1cnJlbnRFeGNoYW5nZSA9PSAiTlNFIiA/IHN0YXRlLmN1cnJlbnRPcmRlci5Oc2V0c3ltIDogc3RhdGUuY3VycmVudE9yZGVyLkJzZXRzeW07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdGUuY3VycmVudEluc3RydW1lbnQgPSBwYXlsb2FkLmRhdGEuZm9ybWF0U2NyaXBOYW1lOwogICAgICB9CiAgICB9LAogICAgc2V0UHJpY2VSYW5nZURldGFpbHM6IGZ1bmN0aW9uIHNldFByaWNlUmFuZ2VEZXRhaWxzKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgdGVtcERhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlLm5zZVByaWNlUmFuZ2VEYXRhID0gW107CiAgICAgICAgICAgICAgICBzdGF0ZS5ic2VQcmljZVJhbmdlRGF0YSA9IFtdOwogICAgICAgICAgICAgICAgcGF5bG9hZC5sZW5ndGggPT0gMSB8fCBwYXlsb2FkLmxlbmd0aCA9PSB1bmRlZmluZWQgPyBzdGF0ZS5uc2VCc2VUeXBlID0gZmFsc2UgOiBzdGF0ZS5uc2VCc2VUeXBlID0gdHJ1ZTsgLy8gQ2hlY2sgdW5kZWZpbmVkLCBudWxsICwgZW1wdHkgZm9yIGJvdGggbG93ZXIgYW5kIHVwcGVyUmFuZ2UKCiAgICAgICAgICAgICAgICBpZiAocGF5bG9hZC5sZW5ndGggPj0gMSkgewogICAgICAgICAgICAgICAgICBwYXlsb2FkLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgICAgICAgICAgZWwuRXhjaGcgPT0gc3RhdGUuY3VycmVudEV4Y2hhbmdlID8gc3RhdGUucHJpY2VSYW5nZURldGFpbHMgPSBlbCA6ICcnOwoKICAgICAgICAgICAgICAgICAgICBpZiAoZWwuRXhjaGcgPT0gIk5TRSIpIHsKICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLm5zZVByaWNlUmFuZ2VEYXRhLnB1c2goZWwpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWwuRXhjaGcgPT0gIkJTRSIpIHsKICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmJzZVByaWNlUmFuZ2VEYXRhLnB1c2goZWwpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHN0YXRlLmxvd2VyUmFuZ2UgPSBzdGF0ZS5wcmljZVJhbmdlRGV0YWlscy5sb3dlcmNpcmN1aXRsaW1pdCA/IGNoZWNrTnVsbE5hbihzdGF0ZS5wcmljZVJhbmdlRGV0YWlscy5sb3dlcmNpcmN1aXRsaW1pdC50b1N0cmluZygpLnJlcGxhY2UoLywvZywgIiIpKSA/IHBhcnNlRmxvYXQoc3RhdGUucHJpY2VSYW5nZURldGFpbHMubG93ZXJjaXJjdWl0bGltaXQudG9TdHJpbmcoKS5yZXBsYWNlKC8sL2csICIiKSkgOiAnMC4wMCcgOiAnMC4wMCc7CiAgICAgICAgICAgICAgICAgIHN0YXRlLnVwcGVyUmFuZ2UgPSBzdGF0ZS5wcmljZVJhbmdlRGV0YWlscy5oaWdoZXJjaXJjdWl0bGltaXQgPyBjaGVja051bGxOYW4oc3RhdGUucHJpY2VSYW5nZURldGFpbHMuaGlnaGVyY2lyY3VpdGxpbWl0LnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCAiIikpID8gcGFyc2VGbG9hdChzdGF0ZS5wcmljZVJhbmdlRGV0YWlscy5oaWdoZXJjaXJjdWl0bGltaXQudG9TdHJpbmcoKS5yZXBsYWNlKC8sL2csICIiKSkgOiAnMC4wMCcgOiAnMC4wMCc7CiAgICAgICAgICAgICAgICAgIHRlbXBEYXRhID0gewogICAgICAgICAgICAgICAgICAgIGRhdGE6IFtdLAogICAgICAgICAgICAgICAgICAgIHdoZXJlOiAnb3JkZXJ3aW5kb3cnLAogICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZTogc3RhdGUuY3VycmVudEV4Y2hhbmdlICsgJ3wnICsgc3RhdGUuY3VycmVudFRva2VuICsgJyMnCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIHBheWxvYWQubGVuZ3RoID09IDEgPyBfdGhpcy5kaXNwYXRjaCgnd3NDb25uZWN0aW9uL3dlYnNvY2tldFN1YnNjcmlwdGlvbicsIHRlbXBEYXRhLCB7CiAgICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgICB9KSA6ICcnOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgc3RhdGUucHJpY2VSYW5nZURldGFpbHMgPSBwYXlsb2FkOwogICAgICAgICAgICAgICAgICBzdGF0ZS5sb3dlclJhbmdlID0gY2hlY2tOdWxsTmFuKHN0YXRlLnByaWNlUmFuZ2VEZXRhaWxzLmxvd2VyY2lyY3VpdGxpbWl0LnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCAiIikpID8gcGFyc2VGbG9hdChzdGF0ZS5wcmljZVJhbmdlRGV0YWlscy5sb3dlcmNpcmN1aXRsaW1pdC50b1N0cmluZygpLnJlcGxhY2UoLywvZywgIiIpKSA6ICcwLjAwJzsKICAgICAgICAgICAgICAgICAgc3RhdGUudXBwZXJSYW5nZSA9IGNoZWNrTnVsbE5hbihzdGF0ZS5wcmljZVJhbmdlRGV0YWlscy5oaWdoZXJjaXJjdWl0bGltaXQudG9TdHJpbmcoKS5yZXBsYWNlKC8sL2csICIiKSkgPyBwYXJzZUZsb2F0KHN0YXRlLnByaWNlUmFuZ2VEZXRhaWxzLmhpZ2hlcmNpcmN1aXRsaW1pdC50b1N0cmluZygpLnJlcGxhY2UoLywvZywgIiIpKSA6ICcwLjAwJzsKCiAgICAgICAgICAgICAgICAgIF90aGlzLmRpc3BhdGNoKCdvcmRlcldpbmRvdy9zZXRDdXJyZW50THRwJywgY2hlY2tOdWxsTmFuKHN0YXRlLnByaWNlUmFuZ2VEZXRhaWxzLkx0cCkgPyBzdGF0ZS5wcmljZVJhbmdlRGV0YWlscy5MdHAgOiBjaGVja051bGxOYW4oc3RhdGUuc2NyaXB0UXVvdGVEZXRhaWxzLkxUUCkgPyBzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMuTFRQIDogJzAuMDAnKTsKICAgICAgICAgICAgICAgIH0gLy8gbnNlIGJzZSByYWRpbyBidXR0b24gY2FsbCBmdW5jdGlvbgoKCiAgICAgICAgICAgICAgICBpZiAoIShzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgPT0gIk5TRSIgJiYgcGF5bG9hZC5sZW5ndGggPiAxKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb21taXQoJ29yZGVyV2luZG93L21ha2VBY3RpdmUnLCAnTlNFJyk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgaWYgKCEoc3RhdGUuY3VycmVudEV4Y2hhbmdlID09ICJCU0UiICYmIHBheWxvYWQubGVuZ3RoID4gMSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb21taXQoJ29yZGVyV2luZG93L21ha2VBY3RpdmUnLCAnQlNFJyk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZXRTY3JpcHRRdW90ZURldGFpbHM6IGZ1bmN0aW9uIHNldFNjcmlwdFF1b3RlRGV0YWlscyhzdGF0ZSwgcGF5bG9hZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMgPSBwYXlsb2FkOwoKICAgICAgICAgICAgICAgIF90aGlzMi5kaXNwYXRjaCgnb3JkZXJXaW5kb3cvc2V0RGVmYXVsdFZhbHVlcycsIHN0YXRlLnNjcmlwdFF1b3RlRGV0YWlscyk7CgogICAgICAgICAgICAgICAgX3RoaXMyLmRpc3BhdGNoKCdvcmRlcldpbmRvdy9zZXRDdXJyZW50THRwJywgY2hlY2tOdWxsTmFuKHN0YXRlLnNjcmlwdFF1b3RlRGV0YWlscy5MVFApID8gc3RhdGUuc2NyaXB0UXVvdGVEZXRhaWxzLkxUUCA6ICcwLjAwJyk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNldENoYXJ0U2NyaXBEYXRhOiBmdW5jdGlvbiBzZXRDaGFydFNjcmlwRGF0YShzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5jaGFydFNjcmlwRGF0YSA9IHBheWxvYWQsIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjaGFydHNjcmlwJywgSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpOwogICAgfSwKICAgIHNldEN1cnJlbnRRdHk6IGZ1bmN0aW9uIHNldEN1cnJlbnRRdHkoc3RhdGUsIHF0eSkgewogICAgICBzdGF0ZS5xdWFudGl0eSA9IHF0eTsKICAgIH0sCiAgICBzZXRDdXJyZW50UHJpY2U6IGZ1bmN0aW9uIHNldEN1cnJlbnRQcmljZShzdGF0ZSwgcHJpY2UpIHsKICAgICAgc3RhdGUucHJpY2UgPSBwcmljZTsKICAgIH0sCiAgICBzZXRDdXJyZW50VHJnUHJpY2U6IGZ1bmN0aW9uIHNldEN1cnJlbnRUcmdQcmljZShzdGF0ZSwgdHJnUHJpY2UpIHsKICAgICAgc3RhdGUudHJpZ2dlclByaWNlID0gdHJnUHJpY2U7CiAgICB9LAogICAgLy8gbWFrZSBhY3RpdmUgbWV0aG9kIGZvciBuc2UgYnNlIHJhZGlvIHN3aXRjaAogICAgbWFrZUFjdGl2ZTogZnVuY3Rpb24gbWFrZUFjdGl2ZShzdGF0ZSwgZXhjaGFuZ2UpIHsKICAgICAgaWYgKGV4Y2hhbmdlID09ICJOU0UiICYmICFzdGF0ZS5tb2RpZnlPcmRlcikgewogICAgICAgIGNoZWNrTnVsbE5hbihzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMuTFRQKTsKICAgICAgICBzdGF0ZS50cmlnZ2VyUHJpY2UgPSBzdGF0ZS5sdHAgPSBzdGF0ZS5wcmljZSA9IGNoZWNrTnVsbE5hbihzdGF0ZS5uc2VQcmljZVJhbmdlRGF0YVswXS5MdHApID8gc3RhdGUubnNlUHJpY2VSYW5nZURhdGFbMF0uTHRwIDogY2hlY2tOdWxsTmFuKHN0YXRlLnNjcmlwdFF1b3RlRGV0YWlscy5MVFApID8gc3RhdGUuc2NyaXB0UXVvdGVEZXRhaWxzLkxUUCA6ICcwLjAwJzsKICAgICAgICBjaGVja051bGxOYW4oc3RhdGUubnNlUHJpY2VSYW5nZURhdGFbMF0ubG93ZXJjaXJjdWl0bGltaXQudG9TdHJpbmcoKS5yZXBsYWNlKC8sL2csICIiKSkgPyBzdGF0ZS5sb3dlclJhbmdlID0gcGFyc2VGbG9hdChzdGF0ZS5uc2VQcmljZVJhbmdlRGF0YVswXS5sb3dlcmNpcmN1aXRsaW1pdC50b1N0cmluZygpLnJlcGxhY2UoLywvZywgIiIpKSA6ICcwLjAwJzsKICAgICAgICBjaGVja051bGxOYW4oc3RhdGUubnNlUHJpY2VSYW5nZURhdGFbMF0uaGlnaGVyY2lyY3VpdGxpbWl0LnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCAiIikpID8gc3RhdGUudXBwZXJSYW5nZSA9IHBhcnNlRmxvYXQoc3RhdGUubnNlUHJpY2VSYW5nZURhdGFbMF0uaGlnaGVyY2lyY3VpdGxpbWl0LnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCAiIikpIDogJzAuMDAnOwogICAgICAgIHN0YXRlLm5zZVByaWNlUmFuZ2VEYXRhWzBdLmxvdFNpemUgPyBzdGF0ZS5taW5sb3QgPSBzdGF0ZS5uc2VQcmljZVJhbmdlRGF0YVswXS5sb3RTaXplIDogc3RhdGUubWlubG90ID0gMDsKICAgICAgICBzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHNbJ25zZU9yQnNlVGlja1NpemUnXSA9IHN0YXRlLm5zZVByaWNlUmFuZ2VEYXRhWzBdLnRpY2tTaXplOwogICAgICAgIHRoaXMuY29tbWl0KCdvcmRlcldpbmRvdy9zZXRUaWNrUHJpY2UnLCBzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMpOwogICAgICAgIHRoaXMuZGlzcGF0Y2goJ29yZGVyV2luZG93L3NldEN1cnJlbnRMdHAnLCBjaGVja051bGxOYW4oc3RhdGUubnNlUHJpY2VSYW5nZURhdGFbMF0uTHRwKSA/IHN0YXRlLm5zZVByaWNlUmFuZ2VEYXRhWzBdLkx0cCA6IGNoZWNrTnVsbE5hbihzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMuTFRQKSA/IHN0YXRlLnNjcmlwdFF1b3RlRGV0YWlscy5MVFAgOiAnMC4wMCcpOwogICAgICAgIHN0YXRlLmN1cnJlbnRUb2tlbiA9IHN0YXRlLm5zZVByaWNlUmFuZ2VEYXRhWzBdWyd0b2tlbiddOwogICAgICB9IGVsc2UgaWYgKCFzdGF0ZS5tb2RpZnlPcmRlcikgewogICAgICAgIHN0YXRlLnRyaWdnZXJQcmljZSA9IHN0YXRlLmx0cCA9IHN0YXRlLnByaWNlID0gY2hlY2tOdWxsTmFuKHN0YXRlLmJzZVByaWNlUmFuZ2VEYXRhWzBdLkx0cCkgPyBzdGF0ZS5ic2VQcmljZVJhbmdlRGF0YVswXS5MdHAgOiBjaGVja051bGxOYW4oc3RhdGUuc2NyaXB0UXVvdGVEZXRhaWxzLkxUUCkgPyBzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMuTFRQIDogJzAuMDAnOwogICAgICAgIGNoZWNrTnVsbE5hbihzdGF0ZS5ic2VQcmljZVJhbmdlRGF0YVswXS5sb3dlcmNpcmN1aXRsaW1pdC50b1N0cmluZygpLnJlcGxhY2UoLywvZywgIiIpKSA/IHN0YXRlLmxvd2VyUmFuZ2UgPSBwYXJzZUZsb2F0KHN0YXRlLmJzZVByaWNlUmFuZ2VEYXRhWzBdLmxvd2VyY2lyY3VpdGxpbWl0LnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCAiIikpIDogJzAuMDAnOwogICAgICAgIGNoZWNrTnVsbE5hbihzdGF0ZS5ic2VQcmljZVJhbmdlRGF0YVswXS5oaWdoZXJjaXJjdWl0bGltaXQudG9TdHJpbmcoKS5yZXBsYWNlKC8sL2csICIiKSkgPyBzdGF0ZS51cHBlclJhbmdlID0gcGFyc2VGbG9hdChzdGF0ZS5ic2VQcmljZVJhbmdlRGF0YVswXS5oaWdoZXJjaXJjdWl0bGltaXQudG9TdHJpbmcoKS5yZXBsYWNlKC8sL2csICIiKSkgOiAnMC4wMCc7CiAgICAgICAgc3RhdGUuYnNlUHJpY2VSYW5nZURhdGFbMF0ubG90U2l6ZSA/IHN0YXRlLm1pbmxvdCA9IHN0YXRlLmJzZVByaWNlUmFuZ2VEYXRhWzBdLmxvdFNpemUgOiBzdGF0ZS5taW5sb3QgPSAwOwogICAgICAgIHN0YXRlLnNjcmlwdFF1b3RlRGV0YWlsc1snbnNlT3JCc2VUaWNrU2l6ZSddID0gc3RhdGUuYnNlUHJpY2VSYW5nZURhdGFbMF0udGlja1NpemU7CiAgICAgICAgdGhpcy5jb21taXQoJ29yZGVyV2luZG93L3NldFRpY2tQcmljZScsIHN0YXRlLnNjcmlwdFF1b3RlRGV0YWlscyk7CiAgICAgICAgdGhpcy5kaXNwYXRjaCgnb3JkZXJXaW5kb3cvc2V0Q3VycmVudEx0cCcsIGNoZWNrTnVsbE5hbihzdGF0ZS5ic2VQcmljZVJhbmdlRGF0YVswXS5MdHApID8gc3RhdGUuYnNlUHJpY2VSYW5nZURhdGFbMF0uTHRwIDogY2hlY2tOdWxsTmFuKHN0YXRlLnNjcmlwdFF1b3RlRGV0YWlscy5MVFApID8gc3RhdGUuc2NyaXB0UXVvdGVEZXRhaWxzLkxUUCA6ICcwLjAwJyk7CiAgICAgICAgc3RhdGUuY3VycmVudFRva2VuID0gc3RhdGUuYnNlUHJpY2VSYW5nZURhdGFbMF1bJ3Rva2VuJ107CiAgICAgIH0KCiAgICAgIHRoaXMuY29tbWl0KCJvcmRlcldpbmRvdy92YWxpRGF0ZVF0eSIsICIiKTsKICAgICAgdGhpcy5jb21taXQoJ29yZGVyV2luZG93L3NldE5zZVN3aXRjaFByaWNlJywgY2hlY2tOdWxsTmFuKHN0YXRlLm5zZVByaWNlUmFuZ2VEYXRhWzBdLkx0cCkgPyBzdGF0ZS5uc2VQcmljZVJhbmdlRGF0YVswXS5MdHAgOiBjaGVja051bGxOYW4oc3RhdGUuc2NyaXB0UXVvdGVEZXRhaWxzLkxUUCkgPyBzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMuTFRQIDogJzAuMDAnKTsKICAgICAgdGhpcy5jb21taXQoJ29yZGVyV2luZG93L3NldEJzZVN3aXRjaFByaWNlJywgY2hlY2tOdWxsTmFuKHN0YXRlLmJzZVByaWNlUmFuZ2VEYXRhWzBdLkx0cCkgPyBzdGF0ZS5ic2VQcmljZVJhbmdlRGF0YVswXS5MdHAgOiBjaGVja051bGxOYW4oc3RhdGUuc2NyaXB0UXVvdGVEZXRhaWxzLkxUUCkgPyBzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMuTFRQIDogJzAuMDAnKTsKICAgICAgc3RhdGUuY3VycmVudEV4Y2hhbmdlID0gZXhjaGFuZ2U7CiAgICAgIHZhciB0ZW1wRGF0YSA9IHsKICAgICAgICBkYXRhOiBbXSwKICAgICAgICB3aGVyZTogJ29yZGVyd2luZG93JywKICAgICAgICBzdWJzY3JpYmU6IGV4Y2hhbmdlICsgJ3wnICsgc3RhdGUuY3VycmVudFRva2VuICsgJyMnCiAgICAgIH07CiAgICAgIHRoaXMuZGlzcGF0Y2goJ3dzQ29ubmVjdGlvbi93ZWJzb2NrZXRTdWJzY3JpcHRpb24nLCB0ZW1wRGF0YSwgewogICAgICAgIHJvb3Q6IHRydWUKICAgICAgfSk7CiAgICB9LAogICAgc2V0UHJpY2VUeXBlOiBmdW5jdGlvbiBzZXRQcmljZVR5cGUoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUucHJpY2VUeXBlID0gcGF5bG9hZDsKICAgIH0sCiAgICBzZXRQcm9kVHlwZTogZnVuY3Rpb24gc2V0UHJvZFR5cGUoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUucHJvZFR5cGUgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldE9yZGVyVGFiOiBmdW5jdGlvbiBzZXRPcmRlclRhYihzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5vcmRlclRhYiA9IHBheWxvYWQ7CiAgICB9LAogICAgc2V0VmFsaWRpdHlUeXBlOiBmdW5jdGlvbiBzZXRWYWxpZGl0eVR5cGUoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUudmFsaWRpdHlUeXBlID0gcGF5bG9hZDsKICAgIH0sCiAgICBzZXRXaW5kb3dMb2FkaW5nOiBmdW5jdGlvbiBzZXRXaW5kb3dMb2FkaW5nKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLndpbmRvd0xvYWRpbmcgPSBwYXlsb2FkOwogICAgfSwKICAgIC8vIGJ5IEJoYXJhdGggCiAgICBzZXRQcmljZUl0ZW1zOiBmdW5jdGlvbiBzZXRQcmljZUl0ZW1zKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLnNob3dQcmljZUl0ZW1zID0gcGF5bG9hZDsKICAgIH0sCiAgICBzZXRQcm9kdWN0SXRlbXM6IGZ1bmN0aW9uIHNldFByb2R1Y3RJdGVtcyhzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5zaG93cHJvZHVjdEl0ZW1zID0gcGF5bG9hZDsKICAgIH0sCiAgICBzZXRJc05mbzogZnVuY3Rpb24gc2V0SXNOZm8oc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUuaXNOZm8gPSBwYXlsb2FkOwogICAgfSwKICAgIGNoYW5nZU9yZGVyVHlwZTogZnVuY3Rpb24gY2hhbmdlT3JkZXJUeXBlKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN3aXRjaCAocGF5bG9hZCkgewogICAgICAgIGNhc2UgInJlZ3VsYXIiOiAvL1JlZ3VsYXIgT3JkZXIgLy8gV2UgaGF2ZSB0YWtlbiAocmVndWxhciA9IGFtbykgZXhjZXB0IGZvciB2YWxpZGl0eQoKICAgICAgICBjYXNlICJhbW8iOgogICAgICAgICAgewogICAgICAgICAgICBpZiAoc3RhdGUucHJpY2VUeXBlID09ICJMIikgewogICAgICAgICAgICAgIHN0YXRlLmlzUHJpY2UgPSB0cnVlOwogICAgICAgICAgICAgIHN0YXRlLmlzVHJnUHJpY2UgPSBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5wcmljZVR5cGUgPT0gIk1LVCIpIHsKICAgICAgICAgICAgICBzdGF0ZS5pc1ByaWNlID0gZmFsc2U7CiAgICAgICAgICAgICAgc3RhdGUuaXNUcmdQcmljZSA9IGZhbHNlOwogICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLnByaWNlVHlwZSA9PSAiU0wiKSB7CiAgICAgICAgICAgICAgc3RhdGUuaXNQcmljZSA9IHRydWU7CiAgICAgICAgICAgICAgc3RhdGUuaXNUcmdQcmljZSA9IHRydWU7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUucHJpY2VUeXBlID09ICJTTC1NIikgewogICAgICAgICAgICAgIHN0YXRlLmlzUHJpY2UgPSBmYWxzZTsKICAgICAgICAgICAgICBzdGF0ZS5pc1RyZ1ByaWNlID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgImNvdmVyIjoKICAgICAgICAgIHsKICAgICAgICAgICAgLy8gQ292ZXIgT3JkZXIgdmFsaWRhdGlvbgogICAgICAgICAgICBpZiAoc3RhdGUucHJpY2VUeXBlID09ICJMIikgewogICAgICAgICAgICAgIHN0YXRlLmlzUHJpY2UgPSB0cnVlOwogICAgICAgICAgICAgIHN0YXRlLmlzVHJnUHJpY2UgPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLnByaWNlVHlwZSA9PSAiTUtUIikgewogICAgICAgICAgICAgIHN0YXRlLmlzUHJpY2UgPSBmYWxzZTsKICAgICAgICAgICAgICBzdGF0ZS5pc1RyZ1ByaWNlID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgImJyYWNrZXQiOgogICAgICAgICAgewogICAgICAgICAgICAvLyBicmFja2V0IE9yZGVyIHZhbGlkYXRpb24KICAgICAgICAgICAgaWYgKHN0YXRlLnByaWNlVHlwZSA9PSAiTCIpIHsKICAgICAgICAgICAgICBzdGF0ZS5pc1ByaWNlID0gdHJ1ZTsKICAgICAgICAgICAgICBzdGF0ZS5pc1RyZ1ByaWNlID0gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUucHJpY2VUeXBlID09ICJTTCIpIHsKICAgICAgICAgICAgICBzdGF0ZS5pc1ByaWNlID0gdHJ1ZTsKICAgICAgICAgICAgICBzdGF0ZS5pc1RyZ1ByaWNlID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgPT0gJ05GTycgfHwgc3RhdGUuY3VycmVudEV4Y2hhbmdlID09ICdCRk8nKSB7CiAgICAgICAgdGhpcy5jb21taXQoJ29yZGVyV2luZG93L3NldElzRGlzY2xvc2VkUXR5JywgZmFsc2UpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY29tbWl0KCdvcmRlcldpbmRvdy9zZXRJc0Rpc2Nsb3NlZFF0eScsIHRydWUpOwogICAgICB9CiAgICB9LAogICAgc2V0T3JkZXJEYXRhOiBmdW5jdGlvbiBzZXRPcmRlckRhdGEoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUub3JkZXJEYXRhID0gcGF5bG9hZDsKICAgIH0sCiAgICBzZXRJc0Rpc2Nsb3NlZFF0eTogZnVuY3Rpb24gc2V0SXNEaXNjbG9zZWRRdHkoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUuaXNEaXNjbG9zZWRRdHkgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldFRpY2tQcmljZTogZnVuY3Rpb24gc2V0VGlja1ByaWNlKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIC8vIHRpY2twcmljZSBjYWxjdWxhdGlvbiAKICAgICAgaWYgKHBheWxvYWQubnNlT3JCc2VUaWNrU2l6ZSkgewogICAgICAgIHZhciB0aWNrU2l6ZSA9IHBhcnNlRmxvYXQocGF5bG9hZC5uc2VPckJzZVRpY2tTaXplKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgdGlja1NpemUgPSBwYXJzZUZsb2F0KHBheWxvYWQuVGlja1NpemUpOwogICAgICB9CgogICAgICB2YXIgbXVsdGlwbGllciA9IHBheWxvYWQuTXVsdGlwbGllcjsKICAgICAgdmFyIGRlY2ltYWxQcmV2aXNpb24gPSBwYXlsb2FkLkRlY2ltYWxQcmVjaXNpb247CiAgICAgIHZhciB0ZW1wVGlja1NpemUgPSB0aWNrU2l6ZSAvIChtdWx0aXBsaWVyICogTWF0aC5wb3coMTAsIGRlY2ltYWxQcmV2aXNpb24pKTsKICAgICAgY2hlY2tOdWxsTmFuKHRlbXBUaWNrU2l6ZSkgJiYgdGVtcFRpY2tTaXplICE9IDAgPyBzdGF0ZS50aWNrUHJpY2UgPSB0ZW1wVGlja1NpemUgOiAxOwogICAgfSwKICAgIHNldE5zZVN3aXRjaFByaWNlOiBmdW5jdGlvbiBzZXROc2VTd2l0Y2hQcmljZShzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5uc2VTd2l0Y2hQcmljZSA9IHBheWxvYWQ7CiAgICB9LAogICAgc2V0QnNlU3dpdGNoUHJpY2U6IGZ1bmN0aW9uIHNldEJzZVN3aXRjaFByaWNlKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLmJzZVN3aXRjaFByaWNlID0gcGF5bG9hZDsKICAgIH0sCiAgICBzZXRWYWxpZGl0eUl0ZW1zOiBmdW5jdGlvbiBzZXRWYWxpZGl0eUl0ZW1zKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLnZhbGlkaXR5SXRlbXMgPSBwYXlsb2FkOwogICAgfSwKICAgIHNldERpc2Nsb3NlZFF0eTogZnVuY3Rpb24gc2V0RGlzY2xvc2VkUXR5KHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLmRpc2Nsb3NlZFF1YW50aXR5ID0gcGF5bG9hZDsKICAgIH0sCiAgICBzZXRPcmRlclR5cGVMaXN0OiBmdW5jdGlvbiBzZXRPcmRlclR5cGVMaXN0KHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLm9yZGVyVHlwZUxpc3QgPSBwYXlsb2FkOwogICAgfSwKICAgIC8vIHNldCBBdmFpbGFibGUgbWFyZ2luCiAgICBzZXRBdmFpbGFibGVNYXJnaW46IGZ1bmN0aW9uIHNldEF2YWlsYWJsZU1hcmdpbihzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5hdmFpbGFibGVNYXJnaW4gPSBwYXlsb2FkOwogICAgfSwKICAgIC8vIHNldCBRdWFudGl0eSB3aXRoIGNoZWNrIFBhZ2UKICAgIHZhbGlEYXRlUXR5OiBmdW5jdGlvbiB2YWxpRGF0ZVF0eShzdGF0ZSwgcGFyYW1ldGVycykgewogICAgICBpZiAoc3RhdGUuY3VycmVudFBhZ2UgPT0gJ2hvbGRpbmdzJykgewogICAgICAgIHN0YXRlLm9yZGVyVHlwZS50b0xvd2VyQ2FzZSgpID09ICdidXknID8gdGhpcy5jb21taXQoJ29yZGVyV2luZG93L3NldEN1cnJlbnRRdHknLCBzdGF0ZS5taW5sb3QpIDogdGhpcy5jb21taXQoJ29yZGVyV2luZG93L3NldEN1cnJlbnRRdHknLCBzdGF0ZS5jdXJyZW50T3JkZXIuU2VsbGFibGVRdHkpOwogICAgICB9IGVsc2UgaWYgKHN0YXRlLmN1cnJlbnRQYWdlID09ICdwb3NpdGlvbnMnKSB7CiAgICAgICAgaWYgKE51bWJlcihzdGF0ZS5jdXJyZW50T3JkZXIuTmV0cXR5KSA9PSAwKSB7CiAgICAgICAgICB0aGlzLmNvbW1pdCgnb3JkZXJXaW5kb3cvc2V0Q3VycmVudFF0eScsIHN0YXRlLm1pbmxvdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChOdW1iZXIoc3RhdGUuY3VycmVudE9yZGVyLk5ldHF0eSkgPiAwICYmIHN0YXRlLm9yZGVyVHlwZS50b0xvd2VyQ2FzZSgpID09ICdidXknKSB7CiAgICAgICAgICAgIHRoaXMuY29tbWl0KCdvcmRlcldpbmRvdy9zZXRDdXJyZW50UXR5Jywgc3RhdGUubWlubG90KTsKICAgICAgICAgIH0gZWxzZSBpZiAoTnVtYmVyKHN0YXRlLmN1cnJlbnRPcmRlci5OZXRxdHkpID4gMCAmJiBzdGF0ZS5vcmRlclR5cGUudG9Mb3dlckNhc2UoKSA9PSAnc2VsbCcpIHsKICAgICAgICAgICAgdGhpcy5jb21taXQoJ29yZGVyV2luZG93L3NldEN1cnJlbnRRdHknLCBNYXRoLmFicyhzdGF0ZS5jdXJyZW50T3JkZXIuTmV0cXR5KSk7CiAgICAgICAgICB9IGVsc2UgaWYgKE51bWJlcihzdGF0ZS5jdXJyZW50T3JkZXIuTmV0cXR5KSA8IDAgJiYgc3RhdGUub3JkZXJUeXBlLnRvTG93ZXJDYXNlKCkgPT0gJ2J1eScpIHsKICAgICAgICAgICAgdGhpcy5jb21taXQoJ29yZGVyV2luZG93L3NldEN1cnJlbnRRdHknLCBzdGF0ZS5taW5sb3QpOwogICAgICAgICAgfSBlbHNlIGlmIChOdW1iZXIoc3RhdGUuY3VycmVudE9yZGVyLk5ldHF0eSkgPCAwICYmIHN0YXRlLm9yZGVyVHlwZS50b0xvd2VyQ2FzZSgpID09ICdzZWxsJykgewogICAgICAgICAgICB0aGlzLmNvbW1pdCgnb3JkZXJXaW5kb3cvc2V0Q3VycmVudFF0eScsIE1hdGguYWJzKHN0YXRlLmN1cnJlbnRPcmRlci5OZXRxdHkpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jb21taXQoJ29yZGVyV2luZG93L3NldEN1cnJlbnRRdHknLCBzdGF0ZS5vcmRlckRhdGEucGFnZSA9PSAnb3JkZXJzJyAmJiBzdGF0ZS5tb2RpZnlPcmRlciAmJiBzdGF0ZS5vcmRlckRhdGEudHlwZSA/IHN0YXRlLm9yZGVyRGF0YS5kYXRhLlF0eSA6IHN0YXRlLm1pbmxvdCk7CiAgICAgIH0KICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIC8vIHBsYWNlIG9yZGVyIHNlcnZpY2UKICAgIHBsYWNlT3JkZXI6IGZ1bmN0aW9uIHBsYWNlT3JkZXIoX3JlZiwgcGF5bG9hZCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgcm9vdEdldHRlcnMsIHN5bWJvbE5hbWUsIHBsYWNlT3JkZXI7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlID0gX3JlZi5zdGF0ZSwgY29tbWl0ID0gX3JlZi5jb21taXQsIHJvb3RHZXR0ZXJzID0gX3JlZi5yb290R2V0dGVyczsKICAgICAgICAgICAgICAgIHN0YXRlLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgc3ltYm9sTmFtZSA9IHN0YXRlLmN1cnJlbnRQYWdlID09ICdta1dhdGNoJyA/IHN0YXRlLmN1cnJlbnRFeGNoYW5nZSA9PSAnTlNFJyA/IHN0YXRlLm5zZVByaWNlUmFuZ2VEYXRhWzBdLlRyYWRpbmdTeW1ib2wgOiBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgPT0gJ0JTRScgPyBzdGF0ZS5ic2VQcmljZVJhbmdlRGF0YVswXS5UcmFkaW5nU3ltYm9sIDogc3RhdGUuY3VycmVudE9yZGVyLnN5bWJvbCA6IHN0YXRlLmN1cnJlbnRQYWdlID09ICdvcmRlcnMnID8gc3RhdGUuY3VycmVudEV4Y2hhbmdlID09ICdOU0UnID8gc3RhdGUubnNlUHJpY2VSYW5nZURhdGFbMF0uVHJhZGluZ1N5bWJvbCA6IHN0YXRlLmN1cnJlbnRFeGNoYW5nZSA9PSAnQlNFJyA/IHN0YXRlLmJzZVByaWNlUmFuZ2VEYXRhWzBdLlRyYWRpbmdTeW1ib2wgOiBzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMuVFN5bWJsIDogc3RhdGUuY3VycmVudFBhZ2UgPT0gJ3Bvc2l0aW9ucycgPyBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgPT0gJ05TRScgPyBzdGF0ZS5uc2VQcmljZVJhbmdlRGF0YVswXS5UcmFkaW5nU3ltYm9sIDogc3RhdGUuY3VycmVudEV4Y2hhbmdlID09ICdCU0UnID8gc3RhdGUuYnNlUHJpY2VSYW5nZURhdGFbMF0uVHJhZGluZ1N5bWJvbCA6IHN0YXRlLmN1cnJlbnRPcmRlci5Uc3ltIDogc3RhdGUuY3VycmVudFBhZ2UgPT0gJ2hvbGRpbmdzJyAmJiBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgPT0gJ05TRScgPyBzdGF0ZS5jdXJyZW50T3JkZXIuTnNldHN5bSA6IHN0YXRlLmN1cnJlbnRQYWdlID09ICdob2xkaW5ncycgJiYgc3RhdGUuY3VycmVudEV4Y2hhbmdlID09ICdCU0UnID8gc3RhdGUuY3VycmVudE9yZGVyLkJzZXRzeW0gOiAnJzsKICAgICAgICAgICAgICAgIHBsYWNlT3JkZXIgPSBbewogICAgICAgICAgICAgICAgICBhY3RpdmVfc3RhdHVzOiBudWxsLAogICAgICAgICAgICAgICAgICBjb21wbGV4dHk6IHBheWxvYWQuY29tcGxleGl0eSA9PSAnYnJhY2tldCcgPyAnYm8nIDogcGF5bG9hZC5jb21wbGV4aXR5ID09ICdjb3ZlcicgPyAnY28nIDogcGF5bG9hZC5jb21wbGV4aXR5LAogICAgICAgICAgICAgICAgICBjcmVhdGVkX2J5OiBudWxsLAogICAgICAgICAgICAgICAgICBjcmVhdGVkX29uOiBudWxsLAogICAgICAgICAgICAgICAgICBkaXNjcXR5OiBwYXlsb2FkLm9yZGVyVGFiID09ICJicmFja2V0IiA/IHBheWxvYWQuZGlzY1F0eS50b1N0cmluZygpIDogcGF5bG9hZC5kaXNjUXR5LAogICAgICAgICAgICAgICAgICBlbXNnOiBudWxsLAogICAgICAgICAgICAgICAgICBleGNoOiBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UsCiAgICAgICAgICAgICAgICAgIGlkOiBudWxsLAogICAgICAgICAgICAgICAgICBpbnN0cnVtZW50OiBzdGF0ZS5zY3JpcHRRdW90ZURldGFpbHMuVW5pcXVlS2V5LAogICAgICAgICAgICAgICAgICBsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICBtYXN0ZXJfaWQ6IDAsCiAgICAgICAgICAgICAgICAgIHBDb2RlOiBwYXlsb2FkLmNvbXBsZXhpdHkgPT0gJ2NvdmVyJyA/ICJDTyIgOiBwYXlsb2FkLnBjb2RlLAogICAgICAgICAgICAgICAgICBwcmN0eXA6IHBheWxvYWQucHJpY2VUeXBlLAogICAgICAgICAgICAgICAgICBwcmljZTogcGF5bG9hZC5wcmljZS50b1N0cmluZygpLAogICAgICAgICAgICAgICAgICBxdHk6IHBheWxvYWQucXR5LAogICAgICAgICAgICAgICAgICByZXBvbnNlOiBudWxsLAogICAgICAgICAgICAgICAgICByZXQ6IHBheWxvYWQudmFsaWRpdHkgPyBwYXlsb2FkLnZhbGlkaXR5LnRvVXBwZXJDYXNlKCkgOiAiREFZIiwKICAgICAgICAgICAgICAgICAgc2FsdDogbnVsbCwKICAgICAgICAgICAgICAgICAgc3RhdDogbnVsbCwKICAgICAgICAgICAgICAgICAgc3RvcExvc3M6IHBhcnNlSW50KHBheWxvYWQuc3RvcExvc3MpLAogICAgICAgICAgICAgICAgICBzeW1ib2xfaWQ6IHN0YXRlLmN1cnJlbnRUb2tlbiwKICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBwYXlsb2FkLnN0b3BMb3NzLAogICAgICAgICAgICAgICAgICB0cmFkaW5nX3N5bWJvbDogc3ltYm9sTmFtZSwKICAgICAgICAgICAgICAgICAgdHJhaWxpbmdfc3RvcF9sb3NzOiBwYXJzZUludChwYXlsb2FkLnRyYWlsU3RvcExvc3MpLAogICAgICAgICAgICAgICAgICB0cmFuc3R5cGU6IHN0YXRlLm9yZGVyVHlwZSwKICAgICAgICAgICAgICAgICAgdHJpZ1ByaWNlOiBwYXlsb2FkLnRyZ1ByaWNlLAogICAgICAgICAgICAgICAgICB1cGRhdGVkX2J5OiBudWxsLAogICAgICAgICAgICAgICAgICB1cGRhdGVkX29uOiBudWxsLAogICAgICAgICAgICAgICAgICB1c2VySWQ6IHJvb3RHZXR0ZXJzWydhdXRodGljYXRpb24vZ2V0VXNlcklkJ10sCiAgICAgICAgICAgICAgICAgIHVzZXJTZXNzaW9uSUQ6IHJvb3RHZXR0ZXJzWydhdXRodGljYXRpb24vZ2V0VXNlclNlc3Npb24nXSwKICAgICAgICAgICAgICAgICAgdXNlclNldHRpbmdEdG86IHJvb3RHZXR0ZXJzWydhdXRodGljYXRpb24vZ2V0VXNlclNlc3Npb25EdG8nXQogICAgICAgICAgICAgICAgfV07CiAgICAgICAgICAgICAgICBzdGF0ZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldE9yZGVyV2luZG93JywgZmFsc2UpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZXhlY3V0ZU9yZGVyKHBsYWNlT3JkZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhWzBdWyJlbXNnIl0gPT0gJ0lucHV0IHBhcmFtZXRlcnMgYXJlIHdyb25nJykgewogICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxpbmcudG9hc3RlcignT3JkZXIgbm90IHBsYWNlZCcsICdkYW5nZXInLCByZXNwb25zZS5kYXRhWzBdWyJlbXNnIl0sIDMwMDApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGFbMF0uc3RhdCA9PSAnTm90X09rJykgewogICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IHJlc3BvbnNlLmRhdGFbMF1bJ0Vtc2cnXSA/IHJlc3BvbnNlLmRhdGFbMF1bJ0Vtc2cnXSA6IHJlc3BvbnNlLmRhdGFbMF1bJ2Vtc2cnXTsKICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nLnRvYXN0ZXIoJ09yZGVyIG5vdCBwbGFjZWQnLCAnZGFuZ2VyJywgZXJyb3IsIDMwMDApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxpbmcudG9hc3RlcihyZXNwb25zZS5kYXRhWzBdWyJOT3JkTm8iXSA/IHJlc3BvbnNlLmRhdGFbMF1bIk5PcmRObyJdIDogcmVzcG9uc2UuZGF0YVswXVsibmVzdE9yZGVyTnVtYmVyIl0sICdzdWNjZXNzJywgJ09yZGVyIFBsYWNlZCBTdWNjZXNzZnVsbHknLCAzMDAwKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgY29tbWl0KCdzZXRPcmRlcldpbmRvdycsIGZhbHNlKTsKICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGluZy5lcnJMb2coZXJyKTsKICAgICAgICAgICAgICAgIH0pWyJmaW5hbGx5Il0oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBzdGF0ZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8gcGxhY2VCYXNrZXRPcmRlciBzZXJ2aWNlCiAgICBwbGFjZUJhc2tldE9yZGVyOiBmdW5jdGlvbiBwbGFjZUJhc2tldE9yZGVyKF9yZWYyLCBwYXlsb2FkKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciBzdGF0ZSwgY29tbWl0LCByb290R2V0dGVycywgcGxhY2VPcmRlcjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZSwgY29tbWl0ID0gX3JlZjIuY29tbWl0LCByb290R2V0dGVycyA9IF9yZWYyLnJvb3RHZXR0ZXJzOwogICAgICAgICAgICAgICAgc3RhdGUubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICBwbGFjZU9yZGVyID0gW107CiAgICAgICAgICAgICAgICBwYXlsb2FkLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICBwbGFjZU9yZGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgIGFjdGl2ZV9zdGF0dXM6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgY29tcGxleHR5OiBlbGVtZW50LmNvbXBsZXhpdHksCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZF9ieTogbnVsbCwKICAgICAgICAgICAgICAgICAgICBjcmVhdGVkX29uOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGRpc2NxdHk6IGVsZW1lbnQuZGlzY2xvc2VkUXVhbnRpdHkgPyBlbGVtZW50LmRpc2Nsb3NlZFF1YW50aXR5IDogMCwKICAgICAgICAgICAgICAgICAgICBlbXNnOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGV4Y2g6IGVsZW1lbnQuZXhjaGFuZ2UsCiAgICAgICAgICAgICAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgaW5zdHJ1bWVudDogZWxlbWVudC5pbnN0cnVtZW50LAogICAgICAgICAgICAgICAgICAgIGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgbWFzdGVyX2lkOiAwLAogICAgICAgICAgICAgICAgICAgIHBDb2RlOiBlbGVtZW50LnByb2R1Y3QgPyBlbGVtZW50LnByb2R1Y3QudG9Mb3dlckNhc2UoKSA6IGVsZW1lbnQucHJvZHVjdCwKICAgICAgICAgICAgICAgICAgICBwcmN0eXA6IGVsZW1lbnQub3JkZXJUeXBlLAogICAgICAgICAgICAgICAgICAgIHByaWNlOiBlbGVtZW50LnByaWNlID8gZWxlbWVudC5wcmljZSA6IDAsCiAgICAgICAgICAgICAgICAgICAgcXR5OiBlbGVtZW50LnF1YW50aXR5LAogICAgICAgICAgICAgICAgICAgIHJlcG9uc2U6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgcmV0OiBlbGVtZW50LnZhbGlkaXR5ID8gZWxlbWVudC52YWxpZGl0eS50b1VwcGVyQ2FzZSgpIDogIkRBWSIsCiAgICAgICAgICAgICAgICAgICAgc2FsdDogbnVsbCwKICAgICAgICAgICAgICAgICAgICBzdGF0OiBudWxsLAogICAgICAgICAgICAgICAgICAgIHN0b3BMb3NzOiBlbGVtZW50LnN0b3Bsb3NzID8gcGFyc2VJbnQoZWxlbWVudC5zdG9wbG9zcykgOiAwLAogICAgICAgICAgICAgICAgICAgIHN5bWJvbF9pZDogZWxlbWVudC50b2tlbiwKICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGVsZW1lbnQuc3RvcGxvc3MgPyBwYXJzZUludChlbGVtZW50LnN0b3Bsb3NzKSA6IDAsCiAgICAgICAgICAgICAgICAgICAgdHJhZGluZ19zeW1ib2w6IGVsZW1lbnQudHJhZGluZ1N5bWJvbCwKICAgICAgICAgICAgICAgICAgICB0cmFpbGluZ19zdG9wX2xvc3M6IGVsZW1lbnQudHJhaWxpbmdTdG9wbG9zcyA/IHBhcnNlSW50KGVsZW1lbnQudHJhaWxpbmdTdG9wbG9zcykgOiAwLAogICAgICAgICAgICAgICAgICAgIHRyYW5zdHlwZTogZWxlbWVudC50cmFuc2FjdGlvblR5cGUgPyBlbGVtZW50LnRyYW5zYWN0aW9uVHlwZS50b0xvd2VyQ2FzZSgpIDogZWxlbWVudC50cmFuc2FjdGlvblR5cGUsCiAgICAgICAgICAgICAgICAgICAgdHJpZ1ByaWNlOiBlbGVtZW50LnRyaWdnZXJQcmljZSA/IGVsZW1lbnQudHJpZ2dlclByaWNlIDogMCwKICAgICAgICAgICAgICAgICAgICB1cGRhdGVkX2J5OiBudWxsLAogICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRfb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiByb290R2V0dGVyc1snYXV0aHRpY2F0aW9uL2dldFVzZXJJZCddLAogICAgICAgICAgICAgICAgICAgIHVzZXJTZXNzaW9uSUQ6IHJvb3RHZXR0ZXJzWydhdXRodGljYXRpb24vZ2V0VXNlclNlc3Npb24nXSwKICAgICAgICAgICAgICAgICAgICB1c2VyU2V0dGluZ0R0bzogcm9vdEdldHRlcnNbJ2F1dGh0aWNhdGlvbi9nZXRVc2VyU2Vzc2lvbkR0byddCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwbGFjZU9yZGVyKTsKICAgICAgICAgICAgICAgIHN0YXRlLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0T3JkZXJXaW5kb3cnLCBmYWxzZSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gc2VydmljZS5leGVjdXRlT3JkZXIocGxhY2VPcmRlcikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGFbMF1bImVtc2ciXSA9PSAnSW5wdXQgcGFyYW1ldGVycyBhcmUgd3JvbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nLnRvYXN0ZXIoJ09yZGVyIG5vdCBwbGFjZWQnLCAnZGFuZ2VyJywgZWxlbWVudFsiZW1zZyJdLCAzMDAwKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhWzBdLnN0YXQgPT0gJ05vdF9PaycpIHsKICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxpbmcudG9hc3RlcignT3JkZXIgbm90IHBsYWNlZCcsICdkYW5nZXInLCBlbGVtZW50WydFbXNnJ10sIDMwMDApOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGluZy50b2FzdGVyKGVsZW1lbnRbIk5PcmRObyJdID8gZWxlbWVudFsiTk9yZE5vIl0gOiBlbGVtZW50WyJuZXN0T3JkZXJOdW1iZXIiXSwgJ3N1Y2Nlc3MnLCAnT3JkZXIgUGxhY2VkIFN1Y2Nlc3NmdWxseScsIDMwMDApOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKCcvb3JkZXJzJyk7CiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Jhc2tldE9yZGVyJywgZmFsc2UpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBjb21taXQoJ3NldE9yZGVyV2luZG93JywgZmFsc2UpOwogICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nLmVyckxvZyhlcnIpOwogICAgICAgICAgICAgICAgfSlbImZpbmFsbHkiXShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHN0YXRlLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyBNb2RpZnkgb3JkZXIKICAgIG1vZGlmeU9yZGVyOiBmdW5jdGlvbiBtb2RpZnlPcmRlcihfcmVmMywgcGF5bG9hZCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgcm9vdEdldHRlcnMsIHBsYWNlT3JkZXI7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGUsIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwgcm9vdEdldHRlcnMgPSBfcmVmMy5yb290R2V0dGVyczsKICAgICAgICAgICAgICAgIHBsYWNlT3JkZXIgPSB7CiAgICAgICAgICAgICAgICAgIGFjY291bnRfaWQ6IHN0YXRlLmN1cnJlbnRPcmRlclsiYWNjb3VudElkIl0sCiAgICAgICAgICAgICAgICAgIGRpc2NxdHk6IHBheWxvYWQub3JkZXJUYWIgPT0gImJyYWNrZXQiID8gcGF5bG9hZC5kaXNjUXR5LnRvU3RyaW5nKCkgOiBwYXlsb2FkLmRpc2NRdHksCiAgICAgICAgICAgICAgICAgIGV4Y2g6IHN0YXRlLmN1cnJlbnRPcmRlclsiRXhjaGFuZ2UiXSwKICAgICAgICAgICAgICAgICAgZXhjaFNlZzogc3RhdGUuY3VycmVudE9yZGVyWyJFeHNlZyJdLAogICAgICAgICAgICAgICAgICBmaWxsZWRRdWFudGl0eTogc3RhdGUuY3VycmVudE9yZGVyWyJGaWxsc2hhcmVzIl0sCiAgICAgICAgICAgICAgICAgIG1rdFBybzogc3RhdGUuY3VycmVudE9yZGVyWyJNa3Rwcm8iXSwKICAgICAgICAgICAgICAgICAgbmVzdE9yZGVyTnVtYmVyOiBzdGF0ZS5jdXJyZW50T3JkZXJbIk5zdG9yZG5vIl0sCiAgICAgICAgICAgICAgICAgIHBDb2RlOiBzdGF0ZS5jdXJyZW50T3JkZXJbIlBjb2RlIl0gPT0gIk1JUyIgPyAibWlzIiA6IHN0YXRlLmN1cnJlbnRPcmRlclsiUGNvZGUiXSwKICAgICAgICAgICAgICAgICAgcHJjdHlwOiBwYXlsb2FkLnByaWNlVHlwZSwKICAgICAgICAgICAgICAgICAgc19wcmR0X2FsaTogcm9vdEdldHRlcnNbJ2F1dGh0aWNhdGlvbi9nZXRVc2VyU2Vzc2lvbkR0byddLnNfcHJkdF9hbGksCiAgICAgICAgICAgICAgICAgIHByaWNlOiBwYXlsb2FkLnByaWNlLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIHF0eTogcGF5bG9hZC5xdHksCiAgICAgICAgICAgICAgICAgIHNjcmlwVG9rZW46IHN0YXRlLmN1cnJlbnRPcmRlclsidG9rZW4iXSwKICAgICAgICAgICAgICAgICAgc3ltYm9sX2lkOiBzdGF0ZS5jdXJyZW50T3JkZXJbInRva2VuIl0sCiAgICAgICAgICAgICAgICAgIHRyYWRpbmdfc3ltYm9sOiBzdGF0ZS5jdXJyZW50T3JkZXJbIlRyc3ltIl0sCiAgICAgICAgICAgICAgICAgIHRyYW5zdHlwZTogc3RhdGUub3JkZXJUeXBlLAogICAgICAgICAgICAgICAgICB0cmlnUHJpY2U6IHBheWxvYWQudHJnUHJpY2UsCiAgICAgICAgICAgICAgICAgIHVzZXJJZDogcm9vdEdldHRlcnNbJ2F1dGh0aWNhdGlvbi9nZXRVc2VySWQnXSwKICAgICAgICAgICAgICAgICAgdmFsaWRpdHk6IHBheWxvYWQudmFsaWRpdHkgPyBwYXlsb2FkLnZhbGlkaXR5LnRvVXBwZXJDYXNlKCkgOiAiREFZIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHN0YXRlLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UubW9kaWZ5T3JkZXIocGxhY2VPcmRlcikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDAgJiYgcmVzcG9uc2UuZGF0YS5zdGF0ID09ICJPayIpIHsKICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nLnRvYXN0ZXIoJ01vZGlmaWVkIFN1Y2Nlc3NmdWxseScsICdzdWNjZXNzJywgJ2NoZWNrIG9yZGVyIGJvb2sgZm9yIGZ1cnRoZXIgZGV0YWlscy4nLCAzMDAwKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nLnRvYXN0ZXIoJ09yZGVyIG5vdCBtb2RpZmllZCcsICdkYW5nZXInLCByZXNwb25zZS5kYXRhLkVtc2csIDMwMDApOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBjb21taXQoJ3NldE9yZGVyV2luZG93JywgZmFsc2UpOwogICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nLmVyckxvZyhlcnIpOwogICAgICAgICAgICAgICAgfSlbImZpbmFsbHkiXShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHN0YXRlLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyBnZXQgTmV3IFByaWNlIHJhbmdlIFNlcnZpY2UKICAgIGdldE5ld1ByaWNlUmFuZ2U6IGZ1bmN0aW9uIGdldE5ld1ByaWNlUmFuZ2UoX3JlZjQsIHBheWxvYWQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgdmFyIHN0YXRlLCBjb21taXQsIHJvb3RHZXR0ZXJzLCBleGNoLCB0b2tlbiwganNvbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmNC5zdGF0ZSwgY29tbWl0ID0gX3JlZjQuY29tbWl0LCByb290R2V0dGVycyA9IF9yZWY0LnJvb3RHZXR0ZXJzOwoKICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5jdXJyZW50UGFnZSA9PSAnaG9sZGluZ3MnKSB7CiAgICAgICAgICAgICAgICAgIGV4Y2ggPSBzdGF0ZS5jdXJyZW50T3JkZXIuRXhjaFNlZzEgJiYgc3RhdGUuY3VycmVudE9yZGVyLk5zZXRzeW0gIT0gIjAiID8gc3RhdGUuY3VycmVudE9yZGVyLkV4Y2hTZWcxIDogc3RhdGUuY3VycmVudE9yZGVyLkV4Y2hTZWcyOwogICAgICAgICAgICAgICAgICB0b2tlbiA9IGV4Y2ggPT0gIk5TRSIgPyBzdGF0ZS5jdXJyZW50T3JkZXIuVG9rZW4xIDogc3RhdGUuY3VycmVudE9yZGVyLlRva2VuMjsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuY3VycmVudFBhZ2UgPT0gImFuYWx5dGljcyIpIHsKICAgICAgICAgICAgICAgICAgZXhjaCA9IHBheWxvYWQuZXhjaDsKICAgICAgICAgICAgICAgICAgdG9rZW4gPSBwYXlsb2FkLmV4Y2ggPT0gJ05TRScgPyBzdGF0ZS5jdXJyZW50T3JkZXIubnNlVG9rZW4gOiBzdGF0ZS5jdXJyZW50T3JkZXIudG9rZW47CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmN1cnJlbnRQYWdlID09ICJiYXNrZXQiKSB7CiAgICAgICAgICAgICAgICAgIGV4Y2ggPSBzdGF0ZS5jdXJyZW50T3JkZXIuZXhjaGFuZ2U7CiAgICAgICAgICAgICAgICAgIHRva2VuID0gc3RhdGUuY3VycmVudE9yZGVyLnRva2VuOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZXhjaCA9IHN0YXRlLmN1cnJlbnRQYWdlID09ICdta1dhdGNoJyA/IHN0YXRlLmN1cnJlbnRPcmRlci5leCA6IHN0YXRlLmN1cnJlbnRPcmRlci5FeGNoYW5nZTsKICAgICAgICAgICAgICAgICAgdG9rZW4gPSBzdGF0ZS5jdXJyZW50UGFnZSA9PSAncG9zaXRpb25zJyA/IHN0YXRlLmN1cnJlbnRPcmRlci5Ub2tlbiA6IHN0YXRlLmN1cnJlbnRPcmRlci50b2tlbjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBqc29uID0gewogICAgICAgICAgICAgICAgICAiZXhjaCI6IGV4Y2gsCiAgICAgICAgICAgICAgICAgICJzeW1ib2wiOiB0b2tlbiA/IHRva2VuIDogc3RhdGUuY3VycmVudE9yZGVyLlN5bWJvbCwKICAgICAgICAgICAgICAgICAgJ3VzZXJJZCc6IHJvb3RHZXR0ZXJzWydhdXRodGljYXRpb24vZ2V0VXNlcklkJ10sCiAgICAgICAgICAgICAgICAgICd1c2VyU2Vzc2lvbklEJzogcm9vdEdldHRlcnNbJ2F1dGh0aWNhdGlvbi9nZXRVc2VyU2Vzc2lvbiddCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZ2V0TmV3UHJpY2VSYW5nZShqc29uKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBzdGF0ZS5yZW1vdmVDc3MgPT0gZmFsc2UgPyBjb21taXQoJ3NldFJlbW92ZUNzcycsIGZhbHNlKSA6ICcnOwoKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZW1zZyA9PSAiU2Vzc2lvbiBFeHBpcmVkIiB8fCByZXNwb25zZS5kYXRhID09IFtdKSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGluZy5zZXNzaW9uRXhwaXJlKCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0UHJpY2VSYW5nZURldGFpbHMnLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICBlcnJvckhhbmRsaW5nLmVyckxvZyhlcnIpOwogICAgICAgICAgICAgICAgfSlbImZpbmFsbHkiXShmdW5jdGlvbiAoKSB7fSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIHNjcmlwIHF1b3RlIGRldGFpbHMKICAgIGdldFNjcmlwUXVvdGVEZXRhaWxzOiBmdW5jdGlvbiBnZXRTY3JpcFF1b3RlRGV0YWlscyhfcmVmNSwgcGF5bG9hZCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgZGlzcGF0Y2gsIHJvb3RHZXR0ZXJzLCBleGNoLCB0b2tlbiwganNvbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmNS5zdGF0ZSwgY29tbWl0ID0gX3JlZjUuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWY1LmRpc3BhdGNoLCByb290R2V0dGVycyA9IF9yZWY1LnJvb3RHZXR0ZXJzOwoKICAgICAgICAgICAgICAgIGlmIChwYXlsb2FkLnBhZ2UgPT0gImNoYXJ0IikgewogICAgICAgICAgICAgICAgICBleGNoID0gcGF5bG9hZC5leGNoOwogICAgICAgICAgICAgICAgICB0b2tlbiA9IHBheWxvYWQudG9rZW47CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBpZiAocGF5bG9hZC5wYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgZXhjaCA9IHBheWxvYWQudmFsdWUuZXg7CiAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSBwYXlsb2FkLnZhbHVlLnRva2VuOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5jdXJyZW50UGFnZSA9PSAnaG9sZGluZ3MnKSB7CiAgICAgICAgICAgICAgICAgICAgICBleGNoID0gc3RhdGUuY3VycmVudE9yZGVyLkV4Y2hTZWcxICYmIHN0YXRlLmN1cnJlbnRPcmRlci5Oc2V0c3ltICE9ICIwIiA/IHN0YXRlLmN1cnJlbnRPcmRlci5FeGNoU2VnMSA6IHN0YXRlLmN1cnJlbnRPcmRlci5FeGNoU2VnMjsKICAgICAgICAgICAgICAgICAgICAgIHRva2VuID0gZXhjaCA9PSAiTlNFIiA/IHN0YXRlLmN1cnJlbnRPcmRlci5Ub2tlbjEgOiBzdGF0ZS5jdXJyZW50T3JkZXIuVG9rZW4yOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuY3VycmVudFBhZ2UgPT0gImFuYWx5dGljcyIpIHsKICAgICAgICAgICAgICAgICAgICAgIGV4Y2ggPSBwYXlsb2FkLmV4Y2g7CiAgICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IHBheWxvYWQuZXhjaCA9PSAnTlNFJyA/IHN0YXRlLmN1cnJlbnRPcmRlci5uc2VUb2tlbiA6IHN0YXRlLmN1cnJlbnRPcmRlci50b2tlbjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmN1cnJlbnRQYWdlID09ICJiYXNrZXQiKSB7CiAgICAgICAgICAgICAgICAgICAgICBleGNoID0gc3RhdGUuY3VycmVudE9yZGVyLmV4Y2hhbmdlOwogICAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSBzdGF0ZS5jdXJyZW50T3JkZXIudG9rZW47CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGV4Y2ggPSBzdGF0ZS5jdXJyZW50UGFnZSA9PSAnbWtXYXRjaCcgPyBzdGF0ZS5jdXJyZW50T3JkZXIuZXggOiBzdGF0ZS5jdXJyZW50T3JkZXIuRXhjaGFuZ2U7CiAgICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IHN0YXRlLmN1cnJlbnRQYWdlID09ICdwb3NpdGlvbnMnID8gc3RhdGUuY3VycmVudE9yZGVyLlRva2VuIDogc3RhdGUuY3VycmVudE9yZGVyLnRva2VuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGpzb24gPSB7CiAgICAgICAgICAgICAgICAgICJleGNoIjogZXhjaCwKICAgICAgICAgICAgICAgICAgInN5bWJvbCI6IHRva2VuID8gdG9rZW4gOiBzdGF0ZS5jdXJyZW50T3JkZXIuU3ltYm9sLAogICAgICAgICAgICAgICAgICAndXNlcklkJzogcm9vdEdldHRlcnNbJ2F1dGh0aWNhdGlvbi9nZXRVc2VySWQnXSwKICAgICAgICAgICAgICAgICAgJ3VzZXJTZXNzaW9uSUQnOiByb290R2V0dGVyc1snYXV0aHRpY2F0aW9uL2dldFVzZXJTZXNzaW9uJ10KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gc2VydmljZS5nZXRTY3JpcFF1b3RlRGV0YWlscyhqc29uKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5lbXNnID09ICJTZXNzaW9uIEV4cGlyZWQiKSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGluZy5zZXNzaW9uRXhwaXJlKCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgICAgICAgIGlmIChwYXlsb2FkLnBhZ2UgPT0gJ2NoYXJ0JykgewogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5MVFAgPSBwYXlsb2FkLmZyb20gPT0gJ21rV2F0Y2gnID8gcm9vdEdldHRlcnNbJ2dldENoYXJ0RGF0YSddWydkYXRhJ11bJ2x0cCddIDogcGF5bG9hZC5mcm9tID09ICdwb3NpdGlvbicgPyByb290R2V0dGVyc1snZ2V0Q2hhcnREYXRhJ11bJ2RhdGEnXVsnTFRQJ10gOiBwYXlsb2FkLmZyb20gPT0gJ2hvbGRpbmdzJyA/IHJvb3RHZXR0ZXJzWydnZXRDaGFydERhdGEnXVsnZGF0YSddWydjaGFydEx0cCddIDogcGF5bG9hZC5mcm9tID09ICdob2xkaW5ncycgJiYgcm9vdEdldHRlcnNbJ2dldENoYXJ0RGF0YSddWydkYXRhJ11bJ2x0cCddID8gcm9vdEdldHRlcnNbJ2dldENoYXJ0RGF0YSddWydkYXRhJ11bJ2x0cCddIDogcmVzcG9uc2UuZGF0YS5MVFA7CiAgICAgICAgICAgICAgICAgICAgICBjb21taXQoJ3NldENoYXJ0U2NyaXBEYXRhJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0U2NyaXB0UXVvdGVEZXRhaWxzJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcERhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogJ29yZGVyd2luZG93JywKICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlOiBqc29uLmV4Y2ggKyAnfCcgKyBqc29uLnN5bWJvbCArICcjJwogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgIGpzb24uZXhjaCAhPSAiTlNFIiAmJiBqc29uLmV4Y2ggIT0gIkJTRSIgPyBkaXNwYXRjaCgnd3NDb25uZWN0aW9uL3dlYnNvY2tldFN1YnNjcmlwdGlvbicsIHRlbXBEYXRhLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgICAgICAgIH0pIDogJyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuZW1zZyA9PSAiU2Vzc2lvbiBFeHBpcmVkIikgewogICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxpbmcuc2Vzc2lvbkV4cGlyZSgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxpbmcuZXJyTG9nKGVycik7CiAgICAgICAgICAgICAgICB9KVsiZmluYWxseSJdKGZ1bmN0aW9uICgpIHt9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU5KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2V0RGVmYXVsdFZhbHVlczogZnVuY3Rpb24gc2V0RGVmYXVsdFZhbHVlcyhfcmVmNiwgc2NyaXBEYXRhKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMCgpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlID0gX3JlZjYuc3RhdGUsIGNvbW1pdCA9IF9yZWY2LmNvbW1pdDsKCiAgICAgICAgICAgICAgICAvLyBtaW5sb3QgZm9yIHF1YW50aXR5CiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuY3VycmVudE9yZGVyWyJJbnN0bmFtZSJdID09ICJGVVRDT00iIHx8IHN0YXRlLmN1cnJlbnRPcmRlclsiSW5zdE5hbWUiXSA9PSAiRlVUQ09NIiB8fCBzdGF0ZS5jdXJyZW50T3JkZXJbIkluc3ROYW1lIl0gPT0gIk9QVEZVVCIgfHwgc3RhdGUuY3VycmVudE9yZGVyWyJJbnN0cnVtZW50Il0gPT0gIkZVVENPTSIgfHwgc3RhdGUuY3VycmVudE9yZGVyWyJJbnN0bmFtZSJdID09ICJPUFRGVVQiIHx8IHN0YXRlLmN1cnJlbnRPcmRlclsiSW5zdHJ1bWVudCJdID09ICJPUFRGVVQiIHx8IChzdGF0ZS5jdXJyZW50T3JkZXJbIkluc3RydW1lbnQiXSA9PSAiRlVUSURYIiB8fCBzdGF0ZS5jdXJyZW50T3JkZXJbIkluc3RuYW1lIl0gPT0gIkZVVElEWCIgfHwgc3RhdGUuY3VycmVudE9yZGVyWyJJbnN0TmFtZSJdID09ICJGVVRJRFgiKSAmJiBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgPT0gIk1DWCIpIHsKICAgICAgICAgICAgICAgICAgc2NyaXBEYXRhLkJvZExvdFF0eSA/IHN0YXRlLm1pbmxvdCA9IHBhcnNlRmxvYXQoc2NyaXBEYXRhLkJvZExvdFF0eSkgLyBwYXJzZUZsb2F0KHNjcmlwRGF0YS5Cb2RMb3RRdHkpIDogc3RhdGUubWlubG90ID0gMDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHNjcmlwRGF0YS5Cb2RMb3RRdHkgPyBzdGF0ZS5taW5sb3QgPSBwYXJzZUZsb2F0KHNjcmlwRGF0YS5Cb2RMb3RRdHkpIDogc3RhdGUubWlubG90ID0gMDsKICAgICAgICAgICAgICAgIH0gLy8gbHRwIGZvciBQcmljZQoKCiAgICAgICAgICAgICAgICBjaGVja051bGxOYW4oc2NyaXBEYXRhLkxUUCkgPyBzdGF0ZS5sdHAgPSBzY3JpcERhdGEuTFRQIDogc3RhdGUubHRwID0gJzAuMDAnOwogICAgICAgICAgICAgICAgc3RhdGUuY3VycmVudEV4Y2hhbmdlID09ICJDRFMiID8gcGFyc2VGbG9hdChzdGF0ZS5sdHApLnRvRml4ZWQoNCkgOiBwYXJzZUZsb2F0KHN0YXRlLmx0cCkudG9GaXhlZCgyKTsKICAgICAgICAgICAgICAgIHNjcmlwRGF0YSA/IGNvbW1pdCgnc2V0VGlja1ByaWNlJywgc2NyaXBEYXRhKSA6ICcnOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRDdXJyZW50UHJpY2UnLCBzdGF0ZS5sdHApOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRDdXJyZW50VHJnUHJpY2UnLCBzdGF0ZS5sdHApOwogICAgICAgICAgICAgICAgY29tbWl0KCJzZXRXaW5kb3dMb2FkaW5nIiwgZmFsc2UpOwogICAgICAgICAgICAgICAgY29tbWl0KCJ2YWxpRGF0ZVF0eSIsICIiKTsKCiAgICAgICAgICAgICAgICBpZiAoc3RhdGUubW9kaWZ5T3JkZXIpIHsKICAgICAgICAgICAgICAgICAgY29tbWl0KCdzZXRDdXJyZW50UHJpY2UnLCBzdGF0ZS5jdXJyZW50T3JkZXIuUHJjID09IDAgPyBzdGF0ZS5sdHAgOiBjaGVja051bGxOYW4oc3RhdGUuY3VycmVudE9yZGVyLlByYykgPyBzdGF0ZS5jdXJyZW50T3JkZXIuUHJjIDogJzAuMDAnKTsKICAgICAgICAgICAgICAgICAgY29tbWl0KCdzZXRDdXJyZW50VHJnUHJpY2UnLCBjaGVja051bGxOYW4oc3RhdGUuY3VycmVudE9yZGVyLlRyZ3ByYykgPyBwYXJzZUZsb2F0KHN0YXRlLmN1cnJlbnRPcmRlci5UcmdwcmMpICE9IDAgPyBzdGF0ZS5jdXJyZW50T3JkZXIuVHJncHJjIDogc3RhdGUubHRwIDogJzAuMDAnKTsKICAgICAgICAgICAgICAgICAgY29tbWl0KCdzZXREaXNjbG9zZWRRdHknLCBjaGVja051bGxOYW4oc3RhdGUuY3VycmVudE9yZGVyLkRzY3F0eSkgPyBzdGF0ZS5jdXJyZW50T3JkZXIuRHNjcXR5IDogMCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc2V0UXR5Rm9jdXMoKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEwKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2V0SW5pdGlhbFZhbHVlczogZnVuY3Rpb24gc2V0SW5pdGlhbFZhbHVlcyhfcmVmNywgcGF5bG9hZCkgewogICAgICB2YXIgc3RhdGUgPSBfcmVmNy5zdGF0ZSwKICAgICAgICAgIGNvbW1pdCA9IF9yZWY3LmNvbW1pdCwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjcuZGlzcGF0Y2g7CiAgICAgIGNvbW1pdCgnc2V0T3JkZXJEYXRhJywgcGF5bG9hZCk7CiAgICAgIGRpc3BhdGNoKCdjb21tb24vc2V0T3JkZXJUeXBlQ29tbW9uJywgcGF5bG9hZCwgewogICAgICAgIHJvb3Q6IHRydWUKICAgICAgfSk7CiAgICAgIGRpc3BhdGNoKCdjb21tb24vc2V0UHJvZFR5cGVDb21tb24nLCBwYXlsb2FkLCB7CiAgICAgICAgcm9vdDogdHJ1ZQogICAgICB9KTsKICAgIH0sCiAgICBzZXRPcmRlclByZWZlcmVuY2U6IGZ1bmN0aW9uIHNldE9yZGVyUHJlZmVyZW5jZShfcmVmOCwgcGF5bG9hZCkgewogICAgICB2YXIgc3RhdGUgPSBfcmVmOC5zdGF0ZSwKICAgICAgICAgIGNvbW1pdCA9IF9yZWY4LmNvbW1pdDsKCiAgICAgIC8vIG1hcmtldCB3YXRjaCBvcmRlcldpbmRvdyBwcmVmZXJlbmNlIHNldCB2aWEgbG9jYWxTdG9yYWdlZAogICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9yZGVyUHJlZmVyZW5jZSIpICYmIChwYXlsb2FkLnBhZ2UgPT0gIm1rV2F0Y2giIHx8IHBheWxvYWQucGFnZSA9PSAib3JkZXJzIiAmJiAhc3RhdGUubW9kaWZ5T3JkZXIpKSB7CiAgICAgICAgdmFyIHByZWZlcmVuY2UgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvcmRlclByZWZlcmVuY2UiKSk7CiAgICAgICAgdmFyIHByb2RUeXBlID0gKHN0YXRlLmN1cnJlbnRFeGNoYW5nZSAhPSAiQlNFIiB8fCBzdGF0ZS5jdXJyZW50RXhjaGFuZ2UgIT0gIk5TRSIpICYmIHByZWZlcmVuY2VbInByb2R1Y3QiXSA9PSAnTlJNTCcgPyAnTlJNTCcgOiBwcmVmZXJlbmNlWyJwcm9kdWN0Il07IC8vIHZhciBvcmRlclRhYiA9IHByZWZlcmVuY2VbInZhcmlldHkiXSA9PSAncmVndWxhcicgPyAwIDogcHJlZmVyZW5jZVsidmFyaWV0eSJdID09ICdjb3ZlcicgPyAxIDogcHJlZmVyZW5jZVsidmFyaWV0eSJdID09ICdicmFja2V0JyA/IDIgOiBwcmVmZXJlbmNlWyJ2YXJpZXR5Il0gPT0gJ2FtbycgPyAzIDogJycKCiAgICAgICAgcHJlZmVyZW5jZVsidmFyaWV0eSJdID09ICdyZWd1bGFyJyA/IHByZWZlcmVuY2VbInZhcmlldHkiXSA9ICdSZWd1bGFyJyA6IHByZWZlcmVuY2VbInZhcmlldHkiXSA9PSAnY292ZXInID8gcHJlZmVyZW5jZVsndmFyaWV0eSddID0gJ0NvdmVyJyA6IHByZWZlcmVuY2VbInZhcmlldHkiXSA9PSAnYnJhY2tldCcgPyBwcmVmZXJlbmNlWyJ2YXJpZXR5Il0gPSAnQnJhY2tldCcgOiBwcmVmZXJlbmNlWyJ2YXJpZXR5Il0gPT0gJ2FtbycgPyBwcmVmZXJlbmNlWyJ2YXJpZXR5Il0gPSAnQU1PJyA6ICcnOwogICAgICAgIHZhciBvcmRlclRhYiA9IHN0YXRlLm9yZGVyVHlwZUxpc3QuaW5kZXhPZihwcmVmZXJlbmNlWyJ2YXJpZXR5Il0pOwogICAgICAgIHZhciBwcmljZVR5cGUgPSBwcmVmZXJlbmNlWyJvcmRlclR5cGUiXTsKICAgICAgICB2YXIgdmFsaWRpdHkgPSBwcmVmZXJlbmNlWyJ2YWxpZGl0eSJdOwogICAgICAgIGNvbW1pdCgic2V0T3JkZXJUYWIiLCBvcmRlclRhYik7CiAgICAgICAgY29tbWl0KCdzZXRQcm9kVHlwZScsIHByb2RUeXBlKTsKICAgICAgICBjb21taXQoJ3NldFByaWNlVHlwZScsIHByaWNlVHlwZSk7CiAgICAgICAgY29tbWl0KCdzZXRWYWxpZGl0eVR5cGUnLCB2YWxpZGl0eSk7CiAgICAgIH0gZWxzZSBpZiAocGF5bG9hZC5wYWdlID09ICJob2xkaW5ncyIpIHsKICAgICAgICBjb21taXQoInNldE9yZGVyVGFiIiwgMCk7CiAgICAgICAgY29tbWl0KCdzZXRQcm9kVHlwZScsICdDTkMnKTsKICAgICAgICBjb21taXQoJ3NldFByaWNlVHlwZScsICdNS1QnKTsKICAgICAgICBjb21taXQoJ3NldFZhbGlkaXR5VHlwZScsICdEQVknKTsKICAgICAgfSBlbHNlIGlmIChwYXlsb2FkLnBhZ2UgPT0gInBvc2l0aW9ucyIpIHsKICAgICAgICBjb21taXQoInNldE9yZGVyVGFiIiwgMCk7CiAgICAgICAgY29tbWl0KCdzZXRQcm9kVHlwZScsIHBheWxvYWQuZGF0YS5QY29kZSk7CiAgICAgICAgY29tbWl0KCdzZXRQcmljZVR5cGUnLCAnTUtUJyk7CiAgICAgICAgY29tbWl0KCdzZXRWYWxpZGl0eVR5cGUnLCAnREFZJyk7CiAgICAgIH0KICAgIH0sCiAgICBzZXRDdXJyZW50THRwOiBmdW5jdGlvbiBzZXRDdXJyZW50THRwKF9yZWY5LCBwYXlsb2FkKSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWY5LnN0YXRlOwogICAgICBzdGF0ZS5jdXJyZW50THRwID0gc3RhdGUuY3VycmVudEV4Y2hhbmdlID09ICdDRFMnIHx8IHN0YXRlLmN1cnJlbnRFeGNoYW5nZSA9PSAnQkNEJyA/IHBhcnNlRmxvYXQocGF5bG9hZCkudG9GaXhlZCg0KSA6IHBhcnNlRmxvYXQocGF5bG9hZCkudG9GaXhlZCgyKTsKICAgIH0sCiAgICAvLyBjaGVjayBtYXJnaW4gYXZhaWxibGUgCiAgICBnZXRNYXJnaW5BdmFpbGFibGU6IGZ1bmN0aW9uIGdldE1hcmdpbkF2YWlsYWJsZShfcmVmMTAsIHBheWxvYWQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKCkgewogICAgICAgIHZhciBzdGF0ZSwgY29tbWl0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmMTAuc3RhdGUsIGNvbW1pdCA9IF9yZWYxMC5jb21taXQ7CiAgICAgICAgICAgICAgICBjb21taXQoInNldEF2YWlsYWJsZU1hcmdpbiIsICcwLjAwJyk7CiAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuY2hlY2tNYXJnaW4ocGF5bG9hZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAiMjAwIiAmJiByZXNwb25zZS5kYXRhLnN0YXQgPT0gJ09rJykgewogICAgICAgICAgICAgICAgICAgIGNvbW1pdCgic2V0QXZhaWxhYmxlTWFyZ2luIiwgcmVzcG9uc2UuZGF0YVsnT3JkZXIgTWFyZ2luJ10pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyb3IpIHt9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTEpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIGdldHRlcnM6IHsKICAgIGdldFByaWNlVHlwZTogZnVuY3Rpb24gZ2V0UHJpY2VUeXBlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5wcmljZVR5cGU7CiAgICB9LAogICAgZ2V0UHJvZFR5cGU6IGZ1bmN0aW9uIGdldFByb2RUeXBlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5wcm9kVHlwZTsKICAgIH0sCiAgICBnZXRPcmRlclRhYjogZnVuY3Rpb24gZ2V0T3JkZXJUYWIoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLm9yZGVyVGFiOwogICAgfSwKICAgIGdldFZhbGlkaXR5VHlwZTogZnVuY3Rpb24gZ2V0VmFsaWRpdHlUeXBlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS52YWxpZGl0eVR5cGU7CiAgICB9LAogICAgZ2V0VHJpZ2dlclByaWNlOiBmdW5jdGlvbiBnZXRUcmlnZ2VyUHJpY2Uoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnRyaWdnZXJQcmljZTsKICAgIH0sCiAgICBnZXRDdXJyZW50THRwOiBmdW5jdGlvbiBnZXRDdXJyZW50THRwKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5jdXJyZW50THRwOwogICAgfSwKICAgIGdldEN1cnJlbnRUb2tlbjogZnVuY3Rpb24gZ2V0Q3VycmVudFRva2VuKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5jdXJyZW50VG9rZW47CiAgICB9LAogICAgZ2V0QXZhaWxhYmxlTWFyZ2luOiBmdW5jdGlvbiBnZXRBdmFpbGFibGVNYXJnaW4oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmF2YWlsYWJsZU1hcmdpbjsKICAgIH0KICB9Cn07CmV4cG9ydCBkZWZhdWx0IG9yZGVyV2luZG93Ow=="},{"version":3,"sources":["/home/stoneage/vueJs projects/trustLineTradeVuex/src/store/modules/orderWindow.js"],"names":["Vue","service","errorHandling","router","checkNullNan","value","toString","isNaN","setQtyFocus","qtyInputBox","document","querySelector","focus","orderWindow","namespaced","state","orderTypeList","validityItems","bracketPriceItems","coverPriceItems","orderTab","priceType","prodType","validityType","showOrderWindow","removeCss","orderType","toggleOrder","currentOrder","priceRangeDetails","scriptQuoteDetails","currentExchange","currentInstrument","currentToken","minlot","ltp","currentLtp","triggerPrice","tickPrice","disclosedQuantity","quantity","price","isPrice","Boolean","isTrgPrice","isDisclosedQty","nsePriceRangeData","bsePriceRangeData","lowerRange","upperRange","nseBseType","modifyOrder","currentPage","mutations","setRemoveCss","payload","setOrderWindow","setOrderWindowModify","setOrderType","setToggleOrder","setCurrentOrder","data","page","ExchSeg1","Nsetsym","ExchSeg2","Token1","Token2","exch","nseToken","token","ex","Exchange","Token","Instrument","Instname","isNfo","Bsetsym","formatScripName","setPriceRangeDetails","length","undefined","forEach","el","Exchg","push","lowercircuitlimit","replace","parseFloat","highercircuitlimit","tempData","where","subscribe","dispatch","root","Ltp","LTP","commit","setScriptQuoteDetails","setChartScripData","chartScripData","localStorage","setItem","JSON","stringify","setCurrentQty","qty","setCurrentPrice","setCurrentTrgPrice","trgPrice","makeActive","exchange","lotSize","tickSize","setPriceType","setProdType","setOrderTab","setValidityType","setWindowLoading","windowLoading","setPriceItems","showPriceItems","setProductItems","showproductItems","setIsNfo","changeOrderType","setOrderData","orderData","setIsDisclosedQty","setTickPrice","nseOrBseTickSize","TickSize","multiplier","Multiplier","decimalPrevision","DecimalPrecision","tempTickSize","Math","pow","setNseSwitchPrice","nseSwitchPrice","setBseSwitchPrice","bseSwitchPrice","setValidityItems","setDisclosedQty","setOrderTypeList","setAvailableMargin","availableMargin","valiDateQty","parameters","toLowerCase","SellableQty","Number","Netqty","abs","type","Qty","actions","placeOrder","rootGetters","loading","symbolName","TradingSymbol","symbol","TSymbl","Tsym","active_status","complexty","complexity","created_by","created_on","discqty","discQty","emsg","id","instrument","UniqueKey","link","master_id","pCode","pcode","prctyp","reponse","ret","validity","toUpperCase","salt","stat","stopLoss","parseInt","symbol_id","target","trading_symbol","trailing_stop_loss","trailStopLoss","transtype","trigPrice","updated_by","updated_on","userId","userSessionID","userSettingDto","executeOrder","then","response","toaster","error","err","errLog","placeBasketOrder","element","product","stoploss","tradingSymbol","trailingStoploss","transactionType","console","log","account_id","exchSeg","filledQuantity","mktPro","nestOrderNumber","s_prdt_ali","scripToken","status","Emsg","getNewPriceRange","json","Symbol","sessionExpire","getScripQuoteDetails","from","setDefaultValues","scripData","BodLotQty","toFixed","Prc","Trgprc","Dscqty","setInitialValues","setOrderPreference","getItem","preference","parse","indexOf","Pcode","setCurrentLtp","getMarginAvailable","checkMargin","getters","getPriceType","getProdType","getOrderTab","getValidityType","getTriggerPrice","getCurrentLtp","getCurrentToken","getAvailableMargin"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport service from '../Services/httpservice'\nimport errorHandling from '../Services/errorHandling'\nimport router from '@/router'\n\nfunction checkNullNan (value) {\n    return value && !!value && value.toString() != \"NA\" && value.toString() != \"-\" && !isNaN(value) ? true : false\n}\n\nfunction setQtyFocus () {\n    let qtyInputBox = document.querySelector(\"#qty\");\n    qtyInputBox != null ? qtyInputBox.focus() : ''\n}\n\nconst orderWindow = {\n    namespaced: true,\n    state: {\n        // window btns state variables\n        orderTypeList: [\"Regular\", \"Cover\", \"Bracket\", \"AMO\"],\n        validityItems: [\"DAY\", \"IOC\"],\n        bracketPriceItems: [\"L\", \"SL\"],\n        coverPriceItems: [\"L\", \"MKT\"],\n        orderTab: null,\n        priceType: null,\n        prodType: null,\n        validityType: 'DAY',\n\n        showOrderWindow: false,\n        removeCss: true,\n        orderType: 'Buy',\n        // orderSwitch\n        toggleOrder: false,\n        currentOrder: [],\n        priceRangeDetails: [],\n        scriptQuoteDetails: [],\n        currentExchange: '',\n        currentInstrument: '',\n        currentToken: '',\n\n        // qty & price Values\n        minlot: '',\n        ltp: '',\n        currentLtp: null,\n        triggerPrice: '',\n        tickPrice: '',\n        disclosedQuantity: 0,\n        quantity: '',\n        price: '',\n\n        // disable inputs boolean\n        isPrice: Boolean,\n        isTrgPrice: Boolean,\n        isDisclosedQty: Boolean,\n\n        // price range data\n        nsePriceRangeData: [],\n        bsePriceRangeData: [],\n        lowerRange: '',\n        upperRange: '',\n        nseBseType: false,\n        modifyOrder: false,\n\n        // currentPage Identify\n        currentPage: '',\n        currentInstrument: '',\n        isNfo: true,\n\n        // loading states\n        loading: false,\n        windowLoading: false,\n\n        // by Bharath \n        allPriceItems: [\"L\", \"MKT\", \"SL\", \"SL-M\"],\n        postionPriceItems: [\"L\", \"MKT\", \"SL\"],\n        showPriceItems: [],\n        eqProductItems: [\"MIS\", \"CNC\"],\n        allProductItems: [\"MIS\", \"NRML\"],\n        showproductItems: [],\n\n        // for Modify Order Data \n        orderData: [],\n        chartScripData: [],\n\n        // nse switch state\n        nseSwitchPrice: '0.00',\n        bseSwitchPrice: '0.00',\n        availableMargin: '0.00',\n    },\n    mutations: {\n        setRemoveCss (state, payload) {\n            state.removeCss = payload\n        },\n        async setOrderWindow (state, payload) {\n            state.showOrderWindow = payload\n            state.modifyOrder = false\n        },\n\n        async setOrderWindowModify (state, payload) {\n            state.showOrderWindow = payload\n            state.modifyOrder = true\n        },\n\n        setOrderType (state, payload) {\n            state.orderType = payload\n        },\n\n        setToggleOrder (state, payload) {\n            state.toggleOrder = payload\n        },\n\n        setCurrentOrder (state, payload) {\n            state.currentOrder = payload.data\n            if (payload.page == \"holdings\") {\n                state.currentExchange = payload.data.ExchSeg1 && payload.data.Nsetsym != \"0\" ? payload.data.ExchSeg1 : payload.data.ExchSeg2\n                state.currentToken = state.currentExchange == \"NSE\" ? payload.data.Token1 : payload.data.Token2\n            } else if (payload.page == \"analytics\") {\n                state.currentExchange = payload.exch\n                state.currentToken = payload.data.nseToken ? payload.data.nseToken : payload.data.token\n            } else {\n                // This block is for POSITIONS and ORDERS\n                state.currentExchange = payload.page == 'mkWatch' ? payload.data.ex : payload.data.Exchange\n                state.currentToken = payload.data.token ? payload.data.token : payload.data.Token\n            }\n            if (payload.page == \"mkWatch\") {\n                state.currentInstrument = state.currentOrder.Instrument\n            } else if (payload.page == \"orders\" || payload.page == \"positions\") {\n                state.currentInstrument = state.currentOrder.Instname\n            }\n            state.currentInstrument == 'OPTIDX' || state.currentInstrument == 'OPTSTK' ? state.isNfo = false : state.isNfo = true\n\n            state.currentPage = payload.page\n            if (payload.page == \"holdings\") {\n                state.currentInstrument = state.currentExchange == \"NSE\" ? state.currentOrder.Nsetsym : state.currentOrder.Bsetsym\n            } else {\n                state.currentInstrument = payload.data.formatScripName\n            }\n\n        },\n\n        async setPriceRangeDetails (state, payload) {\n            state.nsePriceRangeData = []\n            state.bsePriceRangeData = []\n            payload.length == 1 || payload.length == undefined ? state.nseBseType = false : state.nseBseType = true\n            // Check undefined, null , empty for both lower and upperRange\n            if (payload.length >= 1) {\n                payload.forEach(el => {\n                    el.Exchg == state.currentExchange ? state.priceRangeDetails = el : ''\n                    if (el.Exchg == \"NSE\") {\n                        state.nsePriceRangeData.push(el)\n                    } else if (el.Exchg == \"BSE\") {\n                        state.bsePriceRangeData.push(el)\n                    }\n                })\n\n                state.lowerRange = state.priceRangeDetails.lowercircuitlimit ? checkNullNan(state.priceRangeDetails.lowercircuitlimit.toString().replace(/,/g, \"\")) ? parseFloat(state.priceRangeDetails.lowercircuitlimit.toString().replace(/,/g, \"\")) : '0.00' : '0.00' \n                state.upperRange = state.priceRangeDetails.highercircuitlimit ? checkNullNan(state.priceRangeDetails.highercircuitlimit.toString().replace(/,/g, \"\")) ? parseFloat(state.priceRangeDetails.highercircuitlimit.toString().replace(/,/g, \"\")) : '0.00' : '0.00' \n\n                var tempData = {\n                    data: [],\n                    where: 'orderwindow',\n                    subscribe: state.currentExchange + '|' + state.currentToken + '#'\n                }\n                payload.length == 1 ? this.dispatch('wsConnection/websocketSubscription', tempData, { root: true }) : ''\n            } else {\n                \n                state.priceRangeDetails = payload\n                state.lowerRange = checkNullNan(state.priceRangeDetails.lowercircuitlimit.toString().replace(/,/g, \"\")) ? parseFloat(state.priceRangeDetails.lowercircuitlimit.toString().replace(/,/g, \"\")) : '0.00'\n                state.upperRange = checkNullNan(state.priceRangeDetails.highercircuitlimit.toString().replace(/,/g, \"\")) ? parseFloat(state.priceRangeDetails.highercircuitlimit.toString().replace(/,/g, \"\")) : '0.00'\n                this.dispatch('orderWindow/setCurrentLtp', checkNullNan(state.priceRangeDetails.Ltp) ? state.priceRangeDetails.Ltp : checkNullNan(state.scriptQuoteDetails.LTP) ? state.scriptQuoteDetails.LTP : '0.00')\n            }\n            // nse bse radio button call function\n\n            if (state.currentExchange == \"NSE\" && payload.length > 1) {\n                await this.commit('orderWindow/makeActive', 'NSE')\n            } else if (state.currentExchange == \"BSE\" && payload.length > 1) {\n                await this.commit('orderWindow/makeActive', 'BSE')\n            }\n        },\n\n        async setScriptQuoteDetails (state, payload) {\n            state.scriptQuoteDetails = payload\n            this.dispatch('orderWindow/setDefaultValues', state.scriptQuoteDetails)\n            this.dispatch('orderWindow/setCurrentLtp', checkNullNan(state.scriptQuoteDetails.LTP) ? state.scriptQuoteDetails.LTP : '0.00')\n        },\n\n        setChartScripData (state, payload) {\n            state.chartScripData = payload,\n                localStorage.setItem('chartscrip', JSON.stringify(payload))\n        },\n\n        setCurrentQty (state, qty) {\n            state.quantity = qty\n        },\n\n        setCurrentPrice (state, price) {\n            state.price = price\n        },\n\n        setCurrentTrgPrice (state, trgPrice) {\n            state.triggerPrice = trgPrice\n        },\n\n        // make active method for nse bse radio switch\n        makeActive (state, exchange) {\n            if (exchange == \"NSE\" && !state.modifyOrder) {\n                checkNullNan(state.scriptQuoteDetails.LTP)\n                state.triggerPrice = state.ltp = state.price = checkNullNan(state.nsePriceRangeData[0].Ltp) ? state.nsePriceRangeData[0].Ltp : checkNullNan(state.scriptQuoteDetails.LTP) ? state.scriptQuoteDetails.LTP : '0.00';\n                checkNullNan(state.nsePriceRangeData[0].lowercircuitlimit.toString().replace(/,/g, \"\")) ? state.lowerRange = parseFloat(state.nsePriceRangeData[0].lowercircuitlimit.toString().replace(/,/g, \"\")) : '0.00'\n                checkNullNan(state.nsePriceRangeData[0].highercircuitlimit.toString().replace(/,/g, \"\")) ? state.upperRange = parseFloat(state.nsePriceRangeData[0].highercircuitlimit.toString().replace(/,/g, \"\")) : '0.00'\n                state.nsePriceRangeData[0].lotSize ? state.minlot = state.nsePriceRangeData[0].lotSize : state.minlot = 0\n                state.scriptQuoteDetails['nseOrBseTickSize'] = state.nsePriceRangeData[0].tickSize\n                this.commit('orderWindow/setTickPrice', state.scriptQuoteDetails)\n                this.dispatch('orderWindow/setCurrentLtp', checkNullNan(state.nsePriceRangeData[0].Ltp) ? state.nsePriceRangeData[0].Ltp : checkNullNan(state.scriptQuoteDetails.LTP) ? state.scriptQuoteDetails.LTP : '0.00')\n                state.currentToken = state.nsePriceRangeData[0]['token']\n            } else if (!state.modifyOrder) {\n                state.triggerPrice = state.ltp = state.price = checkNullNan(state.bsePriceRangeData[0].Ltp) ? state.bsePriceRangeData[0].Ltp : checkNullNan(state.scriptQuoteDetails.LTP) ? state.scriptQuoteDetails.LTP : '0.00'\n                checkNullNan(state.bsePriceRangeData[0].lowercircuitlimit.toString().replace(/,/g, \"\")) ? state.lowerRange = parseFloat(state.bsePriceRangeData[0].lowercircuitlimit.toString().replace(/,/g, \"\")) : '0.00'\n                checkNullNan(state.bsePriceRangeData[0].highercircuitlimit.toString().replace(/,/g, \"\")) ? state.upperRange = parseFloat(state.bsePriceRangeData[0].highercircuitlimit.toString().replace(/,/g, \"\")) : '0.00'\n                state.bsePriceRangeData[0].lotSize ? state.minlot = state.bsePriceRangeData[0].lotSize : state.minlot = 0\n                state.scriptQuoteDetails['nseOrBseTickSize'] = state.bsePriceRangeData[0].tickSize\n                this.commit('orderWindow/setTickPrice', state.scriptQuoteDetails)\n                this.dispatch('orderWindow/setCurrentLtp', checkNullNan(state.bsePriceRangeData[0].Ltp) ? state.bsePriceRangeData[0].Ltp : checkNullNan(state.scriptQuoteDetails.LTP) ? state.scriptQuoteDetails.LTP : '0.00')\n                state.currentToken = state.bsePriceRangeData[0]['token']\n            }\n            this.commit(\"orderWindow/valiDateQty\" , \"\")\n            this.commit('orderWindow/setNseSwitchPrice', checkNullNan(state.nsePriceRangeData[0].Ltp) ? state.nsePriceRangeData[0].Ltp : checkNullNan(state.scriptQuoteDetails.LTP) ? state.scriptQuoteDetails.LTP : '0.00')\n            this.commit('orderWindow/setBseSwitchPrice', checkNullNan(state.bsePriceRangeData[0].Ltp) ? state.bsePriceRangeData[0].Ltp : checkNullNan(state.scriptQuoteDetails.LTP) ? state.scriptQuoteDetails.LTP : '0.00')\n            state.currentExchange = exchange\n            var tempData = {\n                data: [],\n                where: 'orderwindow',\n                subscribe: exchange + '|' + state.currentToken + '#'\n            }\n            this.dispatch('wsConnection/websocketSubscription', tempData, { root: true })\n        },\n\n        setPriceType (state, payload) {\n            state.priceType = payload\n        },\n\n        setProdType (state, payload) {\n            state.prodType = payload\n        },\n\n        setOrderTab (state, payload) {\n            state.orderTab = payload\n        },\n\n        setValidityType (state, payload) {\n            state.validityType = payload\n        },\n\n        setWindowLoading (state, payload) {\n            state.windowLoading = payload;\n        },\n\n        // by Bharath \n        setPriceItems (state, payload) {\n            state.showPriceItems = payload\n        },\n\n        setProductItems (state, payload) {\n            state.showproductItems = payload\n        },\n\n        setIsNfo (state, payload) {\n            state.isNfo = payload\n        },\n\n        changeOrderType (state, payload) {\n            switch (payload) {\n                case \"regular\": //Regular Order // We have taken (regular = amo) except for validity\n                case \"amo\": {\n                    if (state.priceType == \"L\") {\n                        state.isPrice = true;\n                        state.isTrgPrice = false;\n                    } else if (state.priceType == \"MKT\") {\n                        state.isPrice = false;\n                        state.isTrgPrice = false;\n                    } else if (state.priceType == \"SL\") {\n                        state.isPrice = true;\n                        state.isTrgPrice = true;\n                    } else if (state.priceType == \"SL-M\") {\n                        state.isPrice = false;\n                        state.isTrgPrice = true;\n                    }\n                    break;\n                }\n                case \"cover\": {\n                    // Cover Order validation\n                    if (state.priceType == \"L\") {\n                        state.isPrice = true;\n                        state.isTrgPrice = true;\n                    } else if (state.priceType == \"MKT\") {\n                        state.isPrice = false;\n                        state.isTrgPrice = true;\n                    }\n                    break;\n                }\n                case \"bracket\": {\n                    // bracket Order validation\n                    if (state.priceType == \"L\") {\n                        state.isPrice = true;\n                        state.isTrgPrice = false;\n                    } else if (state.priceType == \"SL\") {\n                        state.isPrice = true;\n                        state.isTrgPrice = true;\n                    }\n                    break;\n                }\n            }\n            if (state.currentExchange == 'NFO' || state.currentExchange == 'BFO') {\n                this.commit('orderWindow/setIsDisclosedQty', false);\n            } else {\n                this.commit('orderWindow/setIsDisclosedQty', true);\n            }\n        },\n\n        setOrderData (state, payload) {\n            state.orderData = payload\n        },\n\n        setIsDisclosedQty (state, payload) {\n            state.isDisclosedQty = payload\n        },\n\n        setTickPrice (state, payload) {\n            // tickprice calculation \n            if (payload.nseOrBseTickSize) {\n                var tickSize = parseFloat(payload.nseOrBseTickSize)\n            } else {\n                var tickSize = parseFloat(payload.TickSize)\n            }\n            var multiplier = payload.Multiplier\n            var decimalPrevision = payload.DecimalPrecision\n            var tempTickSize = tickSize / (multiplier * Math.pow(10, decimalPrevision));\n            checkNullNan(tempTickSize) && tempTickSize != 0 ? state.tickPrice = tempTickSize : 1\n        },\n\n        setNseSwitchPrice (state, payload) {\n            state.nseSwitchPrice = payload\n        },\n\n        setBseSwitchPrice (state, payload) {\n            state.bseSwitchPrice = payload\n        },\n\n        setValidityItems (state, payload) {\n            state.validityItems = payload\n        },\n\n        setDisclosedQty (state, payload) {\n            state.disclosedQuantity = payload\n        },\n\n        setOrderTypeList(state, payload){\n            state.orderTypeList = payload\n        },\n\n        // set Available margin\n        setAvailableMargin (state, payload) {\n            state.availableMargin = payload\n        },\n\n        // set Quantity with check Page\n        valiDateQty(state, parameters){\n            if (state.currentPage == 'holdings') {\n                state.orderType.toLowerCase() == 'buy' ? this.commit('orderWindow/setCurrentQty', state.minlot) : this.commit('orderWindow/setCurrentQty', state.currentOrder.SellableQty)\n            }else if(state.currentPage == 'positions'){\n                if(Number(state.currentOrder.Netqty) == 0){\n                    this.commit('orderWindow/setCurrentQty', state.minlot)\n                }else{\n                    if(Number(state.currentOrder.Netqty) > 0 && state.orderType.toLowerCase() == 'buy'){\n                        this.commit('orderWindow/setCurrentQty', state.minlot) \n                    }else if(Number(state.currentOrder.Netqty) > 0 && state.orderType.toLowerCase() == 'sell'){\n                        this.commit('orderWindow/setCurrentQty', Math.abs(state.currentOrder.Netqty)) \n                    }else if(Number(state.currentOrder.Netqty) < 0 && state.orderType.toLowerCase() == 'buy'){\n                        this.commit('orderWindow/setCurrentQty', state.minlot) \n                    }else if(Number(state.currentOrder.Netqty) < 0 && state.orderType.toLowerCase() == 'sell'){\n                        this.commit('orderWindow/setCurrentQty', Math.abs(state.currentOrder.Netqty)) \n                    }\n                }\n            }else {\n                this.commit('orderWindow/setCurrentQty', state.orderData.page == 'orders' && state.modifyOrder && state.orderData.type ? state.orderData.data.Qty : state.minlot)\n            }\n        }\n\n    },\n    actions: {\n        // place order service\n        async placeOrder ({ state, commit, rootGetters }, payload) {\n            state.loading = true;\n            var symbolName = state.currentPage == 'mkWatch' ? state.currentExchange == 'NSE' ? state.nsePriceRangeData[0].TradingSymbol : state.currentExchange == 'BSE' ? state.bsePriceRangeData[0].TradingSymbol : state.currentOrder.symbol\n                : state.currentPage == 'orders' ? state.currentExchange == 'NSE' ? state.nsePriceRangeData[0].TradingSymbol : state.currentExchange == 'BSE' ? state.bsePriceRangeData[0].TradingSymbol : state.scriptQuoteDetails.TSymbl\n                    : state.currentPage == 'positions' ? state.currentExchange == 'NSE' ? state.nsePriceRangeData[0].TradingSymbol : state.currentExchange == 'BSE' ? state.bsePriceRangeData[0].TradingSymbol : state.currentOrder.Tsym\n                        : (state.currentPage == 'holdings' && state.currentExchange == 'NSE') ? state.currentOrder.Nsetsym\n                            : (state.currentPage == 'holdings' && state.currentExchange == 'BSE') ? state.currentOrder.Bsetsym : ''\n            let placeOrder = [{\n                active_status: null,\n                complexty: payload.complexity == 'bracket' ? 'bo' : payload.complexity == 'cover' ? 'co' : payload.complexity,\n                created_by: null,\n                created_on: null,\n                discqty: payload.orderTab == \"bracket\" ? payload.discQty.toString() : payload.discQty,\n                emsg: null,\n                exch: state.currentExchange,\n                id: null,\n                instrument: state.scriptQuoteDetails.UniqueKey,\n                link: null,\n                master_id: 0,\n                pCode: payload.complexity == 'cover' ? \"CO\" : payload.pcode,\n                prctyp: payload.priceType,\n                price: payload.price.toString(),\n                qty: payload.qty,\n                reponse: null,\n                ret: payload.validity ? payload.validity.toUpperCase() : \"DAY\",\n                salt: null,\n                stat: null,\n                stopLoss: parseInt(payload.stopLoss),\n                symbol_id: state.currentToken,\n                target: payload.stopLoss,\n                trading_symbol: symbolName,\n                trailing_stop_loss: parseInt(payload.trailStopLoss),\n                transtype: state.orderType,\n                trigPrice: payload.trgPrice,\n                updated_by: null,\n                updated_on: null,\n                userId: rootGetters['authtication/getUserId'],\n                userSessionID: rootGetters['authtication/getUserSession'],\n                userSettingDto: rootGetters['authtication/getUserSessionDto'],\n            }]\n            state.loading = false;\n            commit('setOrderWindow', false)\n            await service.executeOrder(placeOrder).then(response => {\n                if (response.data[0][\"emsg\"] == 'Input parameters are wrong') {\n                    errorHandling.toaster('Order not placed', 'danger', response.data[0][\"emsg\"], 3000)\n                } else if (response.data[0].stat == 'Not_Ok') {\n                    var error = response.data[0]['Emsg'] ? response.data[0]['Emsg'] : response.data[0]['emsg']\n                    errorHandling.toaster('Order not placed', 'danger', error, 3000)\n                } else {\n                    errorHandling.toaster(response.data[0][\"NOrdNo\"] ? response.data[0][\"NOrdNo\"] : response.data[0][\"nestOrderNumber\"], 'success', 'Order Placed Successfully', 3000)\n                }\n                commit('setOrderWindow', false)\n            }, (err) => {\n                errorHandling.errLog(err)\n            }).finally(() => { state.loading = false })\n        },\n\n        // placeBasketOrder service\n        async placeBasketOrder ({ state, commit, rootGetters }, payload) {\n            state.loading = true;\n            let placeOrder = []\n            payload.data.forEach(element => {\n                placeOrder.push({\n                    active_status: null,\n                    complexty: element.complexity,\n                    created_by: null,\n                    created_on: null,\n                    discqty: element.disclosedQuantity ? element.disclosedQuantity : 0,\n                    emsg: null,\n                    exch: element.exchange,\n                    id: null,\n                    instrument: element.instrument,\n                    link: null,\n                    master_id: 0,\n                    pCode: element.product ? element.product.toLowerCase() : element.product,\n                    prctyp: element.orderType,\n                    price: element.price ? element.price : 0,\n                    qty: element.quantity,\n                    reponse: null,\n                    ret: element.validity ? element.validity.toUpperCase() : \"DAY\",\n                    salt: null,\n                    stat: null,\n                    stopLoss: element.stoploss ? parseInt(element.stoploss) : 0,\n                    symbol_id: element.token,\n                    target: element.stoploss ? parseInt(element.stoploss) : 0,\n                    trading_symbol: element.tradingSymbol,\n                    trailing_stop_loss: element.trailingStoploss ? parseInt(element.trailingStoploss) : 0,\n                    transtype: element.transactionType ? element.transactionType.toLowerCase() : element.transactionType,\n                    trigPrice: element.triggerPrice ? element.triggerPrice : 0,\n                    updated_by: null,\n                    updated_on: null,\n                    userId: rootGetters['authtication/getUserId'],\n                    userSessionID: rootGetters['authtication/getUserSession'],\n                    userSettingDto: rootGetters['authtication/getUserSessionDto'],\n                })\n            })\n            console.log(placeOrder);\n            state.loading = false;\n            commit('setOrderWindow', false)\n            await service.executeOrder(placeOrder).then(response => {\n                if (response.data[0][\"emsg\"] == 'Input parameters are wrong') {\n                    response.data.forEach(element => {\n                        errorHandling.toaster('Order not placed', 'danger', element[\"emsg\"], 3000)\n                    })\n                } else if (response.data[0].stat == 'Not_Ok') {\n                    response.data.forEach(element => {\n                        errorHandling.toaster('Order not placed', 'danger', element['Emsg'], 3000)\n                    })\n                } else {\n                    response.data.forEach(element => {\n                        errorHandling.toaster(element[\"NOrdNo\"] ? element[\"NOrdNo\"] : element[\"nestOrderNumber\"], 'success', 'Order Placed Successfully', 3000)\n                    })\n                    router.push('/orders')\n                    localStorage.setItem('basketOrder', false)\n                }\n                commit('setOrderWindow', false)\n            }, (err) => {\n                errorHandling.errLog(err)\n            }).finally(() => { state.loading = false })\n        },\n\n        // Modify order\n        async modifyOrder ({ state, commit, rootGetters }, payload) {\n            let placeOrder = {\n                account_id: state.currentOrder[\"accountId\"],\n                discqty: payload.orderTab == \"bracket\" ? payload.discQty.toString() : payload.discQty,\n                exch: state.currentOrder[\"Exchange\"],\n                exchSeg: state.currentOrder[\"Exseg\"],\n                filledQuantity: state.currentOrder[\"Fillshares\"],\n                mktPro: state.currentOrder[\"Mktpro\"],\n                nestOrderNumber: state.currentOrder[\"Nstordno\"],\n                pCode: state.currentOrder[\"Pcode\"] == \"MIS\" ? \"mis\" : state.currentOrder[\"Pcode\"],\n                prctyp: payload.priceType,\n                s_prdt_ali: rootGetters['authtication/getUserSessionDto'].s_prdt_ali,\n                price: payload.price.toString(),\n                qty: payload.qty,\n                scripToken: state.currentOrder[\"token\"],\n                symbol_id: state.currentOrder[\"token\"],\n                trading_symbol: state.currentOrder[\"Trsym\"],\n                transtype: state.orderType,\n                trigPrice: payload.trgPrice,\n                userId: rootGetters['authtication/getUserId'],\n                validity: payload.validity ? payload.validity.toUpperCase() : \"DAY\",\n            }\n            state.loading = true;\n            await service.modifyOrder(placeOrder).then(response => {\n                if (response.status == 200 && response.data.stat == \"Ok\") {\n                    errorHandling.toaster('Modified Successfully', 'success', 'check order book for further details.', 3000)\n                } else {\n                    errorHandling.toaster('Order not modified', 'danger', response.data.Emsg, 3000)\n                }\n                commit('setOrderWindow', false)\n            }, (err) => {\n                errorHandling.errLog(err)\n            }).finally(() => { state.loading = false; })\n        },\n\n        // get New Price range Service\n        async getNewPriceRange ({ state, commit, rootGetters }, payload) {\n            if (state.currentPage == 'holdings') {\n                var exch = state.currentOrder.ExchSeg1 && state.currentOrder.Nsetsym != \"0\" ? state.currentOrder.ExchSeg1 : state.currentOrder.ExchSeg2\n                var token = exch == \"NSE\" ? state.currentOrder.Token1 : state.currentOrder.Token2\n            } else if (state.currentPage == \"analytics\") {\n                var exch = payload.exch\n                var token = payload.exch == 'NSE' ? state.currentOrder.nseToken : state.currentOrder.token\n            } else if (state.currentPage == \"basket\") {\n                var exch = state.currentOrder.exchange\n                var token = state.currentOrder.token\n            } else {\n                var exch = state.currentPage == 'mkWatch' ? state.currentOrder.ex : state.currentOrder.Exchange\n                var token = state.currentPage == 'positions' ? state.currentOrder.Token : state.currentOrder.token\n            }\n            let json = {\n                \"exch\": exch,\n                \"symbol\": token ? token : state.currentOrder.Symbol,\n                'userId': rootGetters['authtication/getUserId'],\n                'userSessionID': rootGetters['authtication/getUserSession']\n            }\n            await service.getNewPriceRange(json).then(response => {\n                state.removeCss == false ? commit('setRemoveCss', false) : ''\n                if (response.data.emsg == \"Session Expired\" || response.data == []) {\n                    errorHandling.sessionExpire();\n                } else if (response.status == 200) {\n                    commit('setPriceRangeDetails', response.data)\n                }\n            }, (err) => {\n                errorHandling.errLog(err)\n            }).finally(() => { })\n        },\n\n        // scrip quote details\n        async getScripQuoteDetails ({ state, commit, dispatch, rootGetters }, payload) {\n            if(payload.page == \"chart\"){\n                var exch = payload.exch\n                var token = payload.token\n            }else{\n            if (payload.page) {\n                var exch = payload.value.ex\n                var token = payload.value.token\n            } else {\n                if (state.currentPage == 'holdings') {\n                    var exch = state.currentOrder.ExchSeg1 && state.currentOrder.Nsetsym != \"0\" ? state.currentOrder.ExchSeg1 : state.currentOrder.ExchSeg2\n                    var token = exch == \"NSE\" ? state.currentOrder.Token1 : state.currentOrder.Token2\n                } else if (state.currentPage == \"analytics\") {\n                    var exch = payload.exch\n                    var token = payload.exch == 'NSE' ? state.currentOrder.nseToken : state.currentOrder.token\n                } else if (state.currentPage == \"basket\") {\n                    var exch = state.currentOrder.exchange\n                    var token = state.currentOrder.token\n                } else {\n                    var exch = state.currentPage == 'mkWatch' ? state.currentOrder.ex : state.currentOrder.Exchange\n                    var token = state.currentPage == 'positions' ? state.currentOrder.Token : state.currentOrder.token\n                }\n            }\n        }\n            let json = {\n                \"exch\": exch,\n                \"symbol\": token ? token : state.currentOrder.Symbol,\n                'userId': rootGetters['authtication/getUserId'],\n                'userSessionID': rootGetters['authtication/getUserSession']\n            }\n            await service.getScripQuoteDetails(json).then(response => {\n                if (response.data.emsg == \"Session Expired\") {\n                    errorHandling.sessionExpire();\n                } else if (response.status == 200) {\n\n                    if (payload.page == 'chart') {\n                        response.data.LTP =  payload.from == 'mkWatch' ? rootGetters['getChartData']['data']['ltp'] : payload.from == 'position' ? rootGetters['getChartData']['data']['LTP'] : payload.from == 'holdings' ? rootGetters['getChartData']['data']['chartLtp'] : payload.from == 'holdings' && rootGetters['getChartData']['data']['ltp'] ? rootGetters['getChartData']['data']['ltp'] : response.data.LTP\n                        commit('setChartScripData', response.data)\n                       \n                    } else {\n                        commit('setScriptQuoteDetails', response.data)\n                        var tempData = {\n                            data: [],\n                            where: 'orderwindow',\n                            subscribe: json.exch + '|' + json.symbol + '#'\n                        }\n                        json.exch != \"NSE\" && json.exch != \"BSE\" ? dispatch('wsConnection/websocketSubscription', tempData, { root: true }) : ''\n                    }\n                } else if (response.data.emsg == \"Session Expired\") {\n                    errorHandling.sessionExpire();\n                }\n            }, (err) => {\n                errorHandling.errLog(err)\n            }).finally(() => { })\n        },\n\n        async setDefaultValues ({ state, commit }, scripData) {\n        \n            // minlot for quantity\n            if ((state.currentOrder[\"Instname\"] == \"FUTCOM\" || state.currentOrder[\"InstName\"] == \"FUTCOM\" || state.currentOrder[\"InstName\"] == \"OPTFUT\" || state.currentOrder[\"Instrument\"] == \"FUTCOM\" || state.currentOrder[\"Instname\"] == \"OPTFUT\" || state.currentOrder[\"Instrument\"] == \"OPTFUT\") || ((state.currentOrder[\"Instrument\"] == \"FUTIDX\" || state.currentOrder[\"Instname\"] == \"FUTIDX\" || state.currentOrder[\"InstName\"] == \"FUTIDX\") && state.currentExchange == \"MCX\")) {\n                scripData.BodLotQty ? state.minlot = parseFloat(scripData.BodLotQty) / parseFloat(scripData.BodLotQty) : state.minlot = 0\n            } else {\n                scripData.BodLotQty ? state.minlot = parseFloat(scripData.BodLotQty) : state.minlot = 0\n            }\n\n            // ltp for Price\n            checkNullNan(scripData.LTP) ? state.ltp = scripData.LTP : state.ltp = '0.00'\n            state.currentExchange == \"CDS\" ? parseFloat(state.ltp).toFixed(4) : parseFloat(state.ltp).toFixed(2)\n\n            scripData ? commit('setTickPrice', scripData) : ''\n            commit('setCurrentPrice', state.ltp)\n            commit('setCurrentTrgPrice', state.ltp)\n            commit(\"setWindowLoading\", false)\n            commit(\"valiDateQty\" , \"\")\n            if (state.modifyOrder) {\n                commit('setCurrentPrice', state.currentOrder.Prc == 0 ? state.ltp : checkNullNan(state.currentOrder.Prc) ? state.currentOrder.Prc : '0.00')\n                commit('setCurrentTrgPrice', checkNullNan(state.currentOrder.Trgprc) ? parseFloat(state.currentOrder.Trgprc) != 0 ? state.currentOrder.Trgprc : state.ltp : '0.00')\n                commit('setDisclosedQty', checkNullNan(state.currentOrder.Dscqty) ? state.currentOrder.Dscqty : 0)\n            }\n            setQtyFocus()\n        },\n\n        setInitialValues ({ state, commit, dispatch }, payload) {\n\n            commit('setOrderData', payload)\n            dispatch('common/setOrderTypeCommon' , payload, {root: true})\n            \n            dispatch('common/setProdTypeCommon' , payload, {root: true})\n            \n        },\n\n        setOrderPreference ({ state, commit }, payload) {\n            \n            // market watch orderWindow preference set via localStoraged\n            if (localStorage.getItem(\"orderPreference\") && (payload.page == \"mkWatch\" || payload.page == \"orders\" && !state.modifyOrder)) {\n                var preference = JSON.parse(localStorage.getItem(\"orderPreference\"));\n                var prodType = (state.currentExchange != \"BSE\" || state.currentExchange != \"NSE\") && preference[\"product\"] == 'NRML' ? 'NRML' : preference[\"product\"];\n\n                // var orderTab = preference[\"variety\"] == 'regular' ? 0 : preference[\"variety\"] == 'cover' ? 1 : preference[\"variety\"] == 'bracket' ? 2 : preference[\"variety\"] == 'amo' ? 3 : ''\n                preference[\"variety\"] == 'regular' ? preference[\"variety\"] = 'Regular' : preference[\"variety\"] == 'cover' ? preference['variety'] = 'Cover' : preference[\"variety\"] == 'bracket' ? preference[\"variety\"] = 'Bracket' : preference[\"variety\"] == 'amo' ? preference[\"variety\"] = 'AMO' : ''\n                var orderTab = state.orderTypeList.indexOf(preference[\"variety\"])\n                var priceType = preference[\"orderType\"];\n                var validity = preference[\"validity\"];\n                commit(\"setOrderTab\", orderTab)\n                commit('setProdType', prodType)\n                commit('setPriceType', priceType)\n                commit('setValidityType', validity)\n            } else if (payload.page == \"holdings\") {\n                commit(\"setOrderTab\", 0)\n                commit('setProdType', 'CNC')\n                commit('setPriceType', 'MKT')\n                commit('setValidityType', 'DAY')\n            } else if (payload.page == \"positions\") {\n                commit(\"setOrderTab\", 0)\n                commit('setProdType', payload.data.Pcode)\n                commit('setPriceType', 'MKT')\n                commit('setValidityType', 'DAY')\n            }\n        },\n\n        setCurrentLtp ({ state }, payload) {\n            state.currentLtp = state.currentExchange == 'CDS' || state.currentExchange == 'BCD' ? parseFloat(payload).toFixed(4) : parseFloat(payload).toFixed(2)\n        },\n\n        // check margin availble \n        async getMarginAvailable ({ state, commit }, payload) {\n            commit(\"setAvailableMargin\", '0.00')\n            await service.checkMargin(payload).then(response => {\n                if (response.status == \"200\" && response.data.stat == 'Ok') {\n                    commit(\"setAvailableMargin\", response.data['Order Margin'])\n                }\n            }).catch(error => { })\n        }\n    },\n\n    getters: {\n        getPriceType (state) {\n            return state.priceType\n        },\n        getProdType (state) {\n            return state.prodType\n        },\n        getOrderTab (state) {\n            return state.orderTab\n        },\n        getValidityType (state) {\n            return state.validityType\n        },\n        getTriggerPrice (state) {\n            return state.triggerPrice\n        },\n        getCurrentLtp: state => {\n            return state.currentLtp\n        },\n        getCurrentToken: state => {\n            return state.currentToken\n        },\n        getAvailableMargin: state => {\n            return state.availableMargin\n        }\n    }\n}\n\nexport default orderWindow"]}]}